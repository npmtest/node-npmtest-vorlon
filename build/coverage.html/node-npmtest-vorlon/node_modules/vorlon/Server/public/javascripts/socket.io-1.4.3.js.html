<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-vorlon/node_modules/vorlon/Server/public/javascripts/socket.io-1.4.3.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-vorlon">npmtest-vorlon (v0.0.2)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-vorlon/node_modules/vorlon/Server/public/javascripts/socket.io-1.4.3.js</span></h1>
    <h2>
        
        Statements: <span class="metric">11.4% <small>(336 / 2947)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">8.11% <small>(147 / 1812)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">14.66% <small>(61 / 416)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(4 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-vorlon/node_modules/vorlon/Server/public/javascripts/</a> &#187; socket.io-1.4.3.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6</td><td class="line-coverage"><span class="cline-any cline-yes">70</span>
<span class="cline-any cline-yes">20</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">(function(f){<span class="missing-if-branch" title="else path not taken" >E</span>if(typeof exports==="object"&amp;&amp;typeof module!=="undefined"){module.exports=f()}else <span class="cstat-no" title="statement not covered" >if(typeof define==="function"&amp;&amp;define.amd){<span class="cstat-no" title="statement not covered" >define([],f)}</span>else{<span class="cstat-no" title="statement not covered" >var g;<span class="cstat-no" title="statement not covered" >i</span>f(typeof window!=="undefined"){<span class="cstat-no" title="statement not covered" >g=window}</span>else <span class="cstat-no" title="statement not covered" >if(typeof global!=="undefined"){<span class="cstat-no" title="statement not covered" >g=global}</span>else <span class="cstat-no" title="statement not covered" >if(typeof self!=="undefined"){<span class="cstat-no" title="statement not covered" >g=self}</span>else{<span class="cstat-no" title="statement not covered" >g=this}<span class="cstat-no" title="statement not covered" ></span>g</span></span></span>.io=f()}</span>}</span>)(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){<span class="missing-if-branch" title="if path not taken" >I</span>if(!t[o]){<span class="cstat-no" title="statement not covered" >var a=typeof require=="function"&amp;&amp;require;<span class="cstat-no" title="statement not covered" >i</span>f(!u&amp;&amp;a)<span class="cstat-no" title="statement not covered" >return a(o,!0);<span class="cstat-no" title="statement not covered" >i</span></span>f(i)<span class="cstat-no" title="statement not covered" >return i(o,!0);<span class="cstat-no" title="statement not covered" >v</span></span>ar f=new Error("Cannot find module '"+o+"'");<span class="cstat-no" title="statement not covered" >t</span>hrow f.code="MODULE_NOT_FOUND",f}</span>var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:<span class="branch-1 cbranch-no" title="branch not covered" >e)</span>},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&amp;&amp;require;for(var o=0;o&lt;r.length;o++)s(r[o]);<span class="cstat-no" title="statement not covered" >return s}</span>({1:[function(_dereq_,module,exports){var url=_dereq_("./url");var parser=_dereq_("socket.io-parser");var Manager=_dereq_("./manager");<span class="cstat-no" title="statement not covered" >var debug=_dereq_("debug")("socket.io-client");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=exports=lookup;<span class="cstat-no" title="statement not covered" >v</span>ar cache=exports.managers={};<span class="fstat-no" title="function not covered" >f</span>unction lookup(uri,opts){<span class="cstat-no" title="statement not covered" ></span>if(typeof uri=="object"){<span class="cstat-no" title="statement not covered" >opts=uri;<span class="cstat-no" title="statement not covered" >u</span>ri=undefined}<span class="cstat-no" title="statement not covered" ></span>o</span>pts=opts||{};<span class="cstat-no" title="statement not covered" >v</span>ar parsed=url(uri);<span class="cstat-no" title="statement not covered" >v</span>ar source=parsed.source;<span class="cstat-no" title="statement not covered" >v</span>ar id=parsed.id;<span class="cstat-no" title="statement not covered" >v</span>ar path=parsed.path;<span class="cstat-no" title="statement not covered" >v</span>ar sameNamespace=cache[id]&amp;&amp;path in cache[id].nsps;<span class="cstat-no" title="statement not covered" >v</span>ar newConnection=opts.forceNew||opts["force new connection"]||false===opts.multiplex||sameNamespace;<span class="cstat-no" title="statement not covered" >v</span>ar io;<span class="cstat-no" title="statement not covered" >i</span>f(newConnection){<span class="cstat-no" title="statement not covered" >debug("ignoring socket cache for %s",source);<span class="cstat-no" title="statement not covered" >i</span>o=Manager(source,opts)}</span>else{<span class="cstat-no" title="statement not covered" >if(!cache[id]){<span class="cstat-no" title="statement not covered" >debug("new io instance for %s",source);<span class="cstat-no" title="statement not covered" >c</span>ache[id]=Manager(source,opts)}<span class="cstat-no" title="statement not covered" ></span>i</span>o=cache[id]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn io.socket(parsed.path)}<span class="cstat-no" title="statement not covered" ></span>exports.protocol=parser.protocol;<span class="cstat-no" title="statement not covered" >e</span>xports.connect=lookup;<span class="cstat-no" title="statement not covered" >e</span>xports.Manager=_dereq_("./manager");<span class="cstat-no" title="statement not covered" >e</span>xports.Socket=_dereq_("./socket")}</span>,{"./manager":2,"./socket":4,"./url":5,debug:14,"socket.io-parser":41}],2:[function(_dereq_,module,exports){var eio=_dereq_("engine.io-client");<span class="cstat-no" title="statement not covered" >var Socket=_dereq_("./socket");<span class="cstat-no" title="statement not covered" >v</span>ar Emitter=_dereq_("component-emitter");<span class="cstat-no" title="statement not covered" >v</span>ar parser=_dereq_("socket.io-parser");<span class="cstat-no" title="statement not covered" >v</span>ar on=_dereq_("./on");<span class="cstat-no" title="statement not covered" >v</span>ar bind=_dereq_("component-bind");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("socket.io-client:manager");<span class="cstat-no" title="statement not covered" >v</span>ar indexOf=_dereq_("indexof");<span class="cstat-no" title="statement not covered" >v</span>ar Backoff=_dereq_("backo2");<span class="cstat-no" title="statement not covered" >v</span>ar has=Object.prototype.hasOwnProperty;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Manager;<span class="fstat-no" title="function not covered" >f</span>unction Manager(uri,opts){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Manager))<span class="cstat-no" title="statement not covered" >return new Manager(uri,opts);<span class="cstat-no" title="statement not covered" >i</span></span>f(uri&amp;&amp;"object"==typeof uri){<span class="cstat-no" title="statement not covered" >opts=uri;<span class="cstat-no" title="statement not covered" >u</span>ri=undefined}<span class="cstat-no" title="statement not covered" ></span>o</span>pts=opts||{};<span class="cstat-no" title="statement not covered" >o</span>pts.path=opts.path||"/socket.io";<span class="cstat-no" title="statement not covered" >t</span>his.nsps={};<span class="cstat-no" title="statement not covered" >t</span>his.subs=[];<span class="cstat-no" title="statement not covered" >t</span>his.opts=opts;<span class="cstat-no" title="statement not covered" >t</span>his.reconnection(opts.reconnection!==false);<span class="cstat-no" title="statement not covered" >t</span>his.reconnectionAttempts(opts.reconnectionAttempts||Infinity);<span class="cstat-no" title="statement not covered" >t</span>his.reconnectionDelay(opts.reconnectionDelay||1e3);<span class="cstat-no" title="statement not covered" >t</span>his.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);<span class="cstat-no" title="statement not covered" >t</span>his.randomizationFactor(opts.randomizationFactor||.5);<span class="cstat-no" title="statement not covered" >t</span>his.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});<span class="cstat-no" title="statement not covered" >t</span>his.timeout(null==opts.timeout?2e4:opts.timeout);<span class="cstat-no" title="statement not covered" >t</span>his.readyState="closed";<span class="cstat-no" title="statement not covered" >t</span>his.uri=uri;<span class="cstat-no" title="statement not covered" >t</span>his.connecting=[];<span class="cstat-no" title="statement not covered" >t</span>his.lastPing=null;<span class="cstat-no" title="statement not covered" >t</span>his.encoding=false;<span class="cstat-no" title="statement not covered" >t</span>his.packetBuffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.encoder=new parser.Encoder;<span class="cstat-no" title="statement not covered" >t</span>his.decoder=new parser.Decoder;<span class="cstat-no" title="statement not covered" >t</span>his.autoConnect=opts.autoConnect!==false;<span class="cstat-no" title="statement not covered" >i</span>f(this.autoConnect)<span class="cstat-no" title="statement not covered" >this.open()}<span class="cstat-no" title="statement not covered" ></span></span>Manager.prototype.emitAll=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.emit.apply(this,arguments);<span class="cstat-no" title="statement not covered" >f</span>or(var nsp in this.nsps){<span class="cstat-no" title="statement not covered" >if(has.call(this.nsps,nsp)){<span class="cstat-no" title="statement not covered" >this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.updateSocketIds=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var nsp in this.nsps){<span class="cstat-no" title="statement not covered" >if(has.call(this.nsps,nsp)){<span class="cstat-no" title="statement not covered" >this.nsps[nsp].id=this.engine.id}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter(Manager.prototype);<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.reconnection=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._reconnection;<span class="cstat-no" title="statement not covered" >t</span></span>his._reconnection=!!v;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.reconnectionAttempts=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._reconnectionAttempts;<span class="cstat-no" title="statement not covered" >t</span></span>his._reconnectionAttempts=v;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.reconnectionDelay=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._reconnectionDelay;<span class="cstat-no" title="statement not covered" >t</span></span>his._reconnectionDelay=v;<span class="cstat-no" title="statement not covered" >t</span>his.backoff&amp;&amp;this.backoff.setMin(v);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.randomizationFactor=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._randomizationFactor;<span class="cstat-no" title="statement not covered" >t</span></span>his._randomizationFactor=v;<span class="cstat-no" title="statement not covered" >t</span>his.backoff&amp;&amp;this.backoff.setJitter(v);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.reconnectionDelayMax=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._reconnectionDelayMax;<span class="cstat-no" title="statement not covered" >t</span></span>his._reconnectionDelayMax=v;<span class="cstat-no" title="statement not covered" >t</span>his.backoff&amp;&amp;this.backoff.setMax(v);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.timeout=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>if(!arguments.length)<span class="cstat-no" title="statement not covered" >return this._timeout;<span class="cstat-no" title="statement not covered" >t</span></span>his._timeout=v;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.maybeReconnectOnOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!this.reconnecting&amp;&amp;this._reconnection&amp;&amp;this.backoff.attempts===0){<span class="cstat-no" title="statement not covered" >this.reconnect()}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.open=Manager.prototype.connect=<span class="fstat-no" title="function not covered" >function(fn){<span class="cstat-no" title="statement not covered" ></span>debug("readyState %s",this.readyState);<span class="cstat-no" title="statement not covered" >i</span>f(~this.readyState.indexOf("open"))<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >d</span></span>ebug("opening %s",this.uri);<span class="cstat-no" title="statement not covered" >t</span>his.engine=eio(this.uri,this.opts);<span class="cstat-no" title="statement not covered" >v</span>ar socket=this.engine;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >t</span>his.readyState="opening";<span class="cstat-no" title="statement not covered" >t</span>his.skipReconnect=false;<span class="cstat-no" title="statement not covered" >v</span>ar openSub=on(socket,"open",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onopen();<span class="cstat-no" title="statement not covered" >f</span>n&amp;&amp;fn()}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar errorSub=on(socket,"error",<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>debug("connect_error");<span class="cstat-no" title="statement not covered" >s</span>elf.cleanup();<span class="cstat-no" title="statement not covered" >s</span>elf.readyState="closed";<span class="cstat-no" title="statement not covered" >s</span>elf.emitAll("connect_error",data);<span class="cstat-no" title="statement not covered" >i</span>f(fn){<span class="cstat-no" title="statement not covered" >var err=new Error("Connection error");<span class="cstat-no" title="statement not covered" >e</span>rr.data=data;<span class="cstat-no" title="statement not covered" >f</span>n(err)}</span>else{<span class="cstat-no" title="statement not covered" >self.maybeReconnectOnOpen()}</span>}</span>);<span class="cstat-no" title="statement not covered" >i</span>f(false!==this._timeout){<span class="cstat-no" title="statement not covered" >var timeout=this._timeout;<span class="cstat-no" title="statement not covered" >d</span>ebug("connect attempt will timeout after %d",timeout);<span class="cstat-no" title="statement not covered" >v</span>ar timer=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("connect attempt timed out after %d",timeout);<span class="cstat-no" title="statement not covered" >o</span>penSub.destroy();<span class="cstat-no" title="statement not covered" >s</span>ocket.close();<span class="cstat-no" title="statement not covered" >s</span>ocket.emit("error","timeout");<span class="cstat-no" title="statement not covered" >s</span>elf.emitAll("connect_timeout",timeout)}</span>,timeout);<span class="cstat-no" title="statement not covered" >t</span>his.subs.push({destroy:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(timer)}</span>})}<span class="cstat-no" title="statement not covered" ></span>t</span>his.subs.push(openSub);<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(errorSub);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onopen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("open");<span class="cstat-no" title="statement not covered" >t</span>his.cleanup();<span class="cstat-no" title="statement not covered" >t</span>his.readyState="open";<span class="cstat-no" title="statement not covered" >t</span>his.emit("open");<span class="cstat-no" title="statement not covered" >v</span>ar socket=this.engine;<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(socket,"data",bind(this,"ondata")));<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(socket,"ping",bind(this,"onping")));<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(socket,"pong",bind(this,"onpong")));<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(socket,"error",bind(this,"onerror")));<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(socket,"close",bind(this,"onclose")));<span class="cstat-no" title="statement not covered" >t</span>his.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onping=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.lastPing=new Date;<span class="cstat-no" title="statement not covered" >t</span>his.emitAll("ping")}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onpong=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.emitAll("pong",new Date-this.lastPing)}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.ondata=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.decoder.add(data)}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.ondecoded=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>this.emit("packet",packet)}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onerror=<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>debug("error",err);<span class="cstat-no" title="statement not covered" >t</span>his.emitAll("error",err)}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.socket=<span class="fstat-no" title="function not covered" >function(nsp){<span class="cstat-no" title="statement not covered" ></span>var socket=this.nsps[nsp];<span class="cstat-no" title="statement not covered" >i</span>f(!socket){<span class="cstat-no" title="statement not covered" >socket=new Socket(this,nsp);<span class="cstat-no" title="statement not covered" >t</span>his.nsps[nsp]=socket;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >s</span>ocket.on("connecting",onConnecting);<span class="cstat-no" title="statement not covered" >s</span>ocket.on("connect",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>socket.id=self.engine.id}</span>);<span class="cstat-no" title="statement not covered" >i</span>f(this.autoConnect){<span class="cstat-no" title="statement not covered" >onConnecting()}</span>}<span class="fstat-no" title="function not covered" ></span>f</span>unction onConnecting(){<span class="cstat-no" title="statement not covered" ></span>if(!~indexOf(self.connecting,socket)){<span class="cstat-no" title="statement not covered" >self.connecting.push(socket)}</span>}<span class="cstat-no" title="statement not covered" ></span>return socket}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.destroy=<span class="fstat-no" title="function not covered" >function(socket){<span class="cstat-no" title="statement not covered" ></span>var index=indexOf(this.connecting,socket);<span class="cstat-no" title="statement not covered" >i</span>f(~index)<span class="cstat-no" title="statement not covered" >this.connecting.splice(index,1);<span class="cstat-no" title="statement not covered" >i</span></span>f(this.connecting.length)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span></span>his.close()}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.packet=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>debug("writing packet %j",packet);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >i</span>f(!self.encoding){<span class="cstat-no" title="statement not covered" >self.encoding=true;<span class="cstat-no" title="statement not covered" >t</span>his.encoder.encode(packet,<span class="fstat-no" title="function not covered" >function(encodedPackets){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;encodedPackets.length;i++){<span class="cstat-no" title="statement not covered" >self.engine.write(encodedPackets[i],packet.options)}<span class="cstat-no" title="statement not covered" ></span>s</span>elf.encoding=false;<span class="cstat-no" title="statement not covered" >s</span>elf.processPacketQueue()}</span>)}</span>else{<span class="cstat-no" title="statement not covered" >self.packetBuffer.push(packet)}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.processPacketQueue=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.packetBuffer.length&gt;0&amp;&amp;!this.encoding){<span class="cstat-no" title="statement not covered" >var pack=this.packetBuffer.shift();<span class="cstat-no" title="statement not covered" >t</span>his.packet(pack)}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.cleanup=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("cleanup");<span class="cstat-no" title="statement not covered" >v</span>ar sub;<span class="cstat-no" title="statement not covered" >w</span>hile(sub=this.subs.shift())<span class="cstat-no" title="statement not covered" >sub.destroy();<span class="cstat-no" title="statement not covered" >t</span></span>his.packetBuffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.encoding=false;<span class="cstat-no" title="statement not covered" >t</span>his.lastPing=null;<span class="cstat-no" title="statement not covered" >t</span>his.decoder.destroy()}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.close=Manager.prototype.disconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("disconnect");<span class="cstat-no" title="statement not covered" >t</span>his.skipReconnect=true;<span class="cstat-no" title="statement not covered" >t</span>his.reconnecting=false;<span class="cstat-no" title="statement not covered" >i</span>f("opening"==this.readyState){<span class="cstat-no" title="statement not covered" >this.cleanup()}<span class="cstat-no" title="statement not covered" ></span>t</span>his.backoff.reset();<span class="cstat-no" title="statement not covered" >t</span>his.readyState="closed";<span class="cstat-no" title="statement not covered" >i</span>f(this.engine)<span class="cstat-no" title="statement not covered" >this.engine.close()}</span></span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onclose=<span class="fstat-no" title="function not covered" >function(reason){<span class="cstat-no" title="statement not covered" ></span>debug("onclose");<span class="cstat-no" title="statement not covered" >t</span>his.cleanup();<span class="cstat-no" title="statement not covered" >t</span>his.backoff.reset();<span class="cstat-no" title="statement not covered" >t</span>his.readyState="closed";<span class="cstat-no" title="statement not covered" >t</span>his.emit("close",reason);<span class="cstat-no" title="statement not covered" >i</span>f(this._reconnection&amp;&amp;!this.skipReconnect){<span class="cstat-no" title="statement not covered" >this.reconnect()}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.reconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.reconnecting||this.skipReconnect)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >v</span></span>ar self=this;<span class="cstat-no" title="statement not covered" >i</span>f(this.backoff.attempts&gt;=this._reconnectionAttempts){<span class="cstat-no" title="statement not covered" >debug("reconnect failed");<span class="cstat-no" title="statement not covered" >t</span>his.backoff.reset();<span class="cstat-no" title="statement not covered" >t</span>his.emitAll("reconnect_failed");<span class="cstat-no" title="statement not covered" >t</span>his.reconnecting=false}</span>else{<span class="cstat-no" title="statement not covered" >var delay=this.backoff.duration();<span class="cstat-no" title="statement not covered" >d</span>ebug("will wait %dms before reconnect attempt",delay);<span class="cstat-no" title="statement not covered" >t</span>his.reconnecting=true;<span class="cstat-no" title="statement not covered" >v</span>ar timer=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(self.skipReconnect)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>ebug("attempting reconnect");<span class="cstat-no" title="statement not covered" >s</span>elf.emitAll("reconnect_attempt",self.backoff.attempts);<span class="cstat-no" title="statement not covered" >s</span>elf.emitAll("reconnecting",self.backoff.attempts);<span class="cstat-no" title="statement not covered" >i</span>f(self.skipReconnect)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>elf.open(<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>if(err){<span class="cstat-no" title="statement not covered" >debug("reconnect attempt error");<span class="cstat-no" title="statement not covered" >s</span>elf.reconnecting=false;<span class="cstat-no" title="statement not covered" >s</span>elf.reconnect();<span class="cstat-no" title="statement not covered" >s</span>elf.emitAll("reconnect_error",err.data)}</span>else{<span class="cstat-no" title="statement not covered" >debug("reconnect success");<span class="cstat-no" title="statement not covered" >s</span>elf.onreconnect()}</span>}</span>)}</span>,delay);<span class="cstat-no" title="statement not covered" >t</span>his.subs.push({destroy:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(timer)}</span>})}</span>}</span>;<span class="cstat-no" title="statement not covered" >M</span>anager.prototype.onreconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var attempt=this.backoff.attempts;<span class="cstat-no" title="statement not covered" >t</span>his.reconnecting=false;<span class="cstat-no" title="statement not covered" >t</span>his.backoff.reset();<span class="cstat-no" title="statement not covered" >t</span>his.updateSocketIds();<span class="cstat-no" title="statement not covered" >t</span>his.emitAll("reconnect",attempt)}</span>}</span>,{"./on":3,"./socket":4,backo2:8,"component-bind":11,"component-emitter":12,debug:14,"engine.io-client":16,indexof:33,"socket.io-parser":41}],3:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=on;<span class="fstat-no" title="function not covered" >f</span>unction on(obj,ev,fn){<span class="cstat-no" title="statement not covered" ></span>obj.on(ev,fn);<span class="cstat-no" title="statement not covered" >r</span>eturn{destroy:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>obj.removeListener(ev,fn)}</span>}}</span>},{}],4:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>var parser=_dereq_("socket.io-parser");<span class="cstat-no" title="statement not covered" >v</span>ar Emitter=_dereq_("component-emitter");<span class="cstat-no" title="statement not covered" >v</span>ar toArray=_dereq_("to-array");<span class="cstat-no" title="statement not covered" >v</span>ar on=_dereq_("./on");<span class="cstat-no" title="statement not covered" >v</span>ar bind=_dereq_("component-bind");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("socket.io-client:socket");<span class="cstat-no" title="statement not covered" >v</span>ar hasBin=_dereq_("has-binary");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=exports=Socket;<span class="cstat-no" title="statement not covered" >v</span>ar events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};<span class="cstat-no" title="statement not covered" >v</span>ar emit=Emitter.prototype.emit;<span class="fstat-no" title="function not covered" >f</span>unction Socket(io,nsp){<span class="cstat-no" title="statement not covered" ></span>this.io=io;<span class="cstat-no" title="statement not covered" >t</span>his.nsp=nsp;<span class="cstat-no" title="statement not covered" >t</span>his.json=this;<span class="cstat-no" title="statement not covered" >t</span>his.ids=0;<span class="cstat-no" title="statement not covered" >t</span>his.acks={};<span class="cstat-no" title="statement not covered" >t</span>his.receiveBuffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.sendBuffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.connected=false;<span class="cstat-no" title="statement not covered" >t</span>his.disconnected=true;<span class="cstat-no" title="statement not covered" >i</span>f(this.io.autoConnect)<span class="cstat-no" title="statement not covered" >this.open()}<span class="cstat-no" title="statement not covered" ></span></span>Emitter(Socket.prototype);<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.subEvents=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.subs)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar io=this.io;<span class="cstat-no" title="statement not covered" >t</span>his.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.open=Socket.prototype.connect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.connected)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >t</span></span>his.subEvents();<span class="cstat-no" title="statement not covered" >t</span>his.io.open();<span class="cstat-no" title="statement not covered" >i</span>f("open"==this.io.readyState)<span class="cstat-no" title="statement not covered" >this.onopen();<span class="cstat-no" title="statement not covered" >t</span></span>his.emit("connecting");<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.send=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var args=toArray(arguments);<span class="cstat-no" title="statement not covered" >a</span>rgs.unshift("message");<span class="cstat-no" title="statement not covered" >t</span>his.emit.apply(this,args);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.emit=<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>if(events.hasOwnProperty(ev)){<span class="cstat-no" title="statement not covered" >emit.apply(this,arguments);<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar args=toArray(arguments);<span class="cstat-no" title="statement not covered" >v</span>ar parserType=parser.EVENT;<span class="cstat-no" title="statement not covered" >i</span>f(hasBin(args)){<span class="cstat-no" title="statement not covered" >parserType=parser.BINARY_EVENT}<span class="cstat-no" title="statement not covered" ></span>v</span>ar packet={type:parserType,data:args};<span class="cstat-no" title="statement not covered" >p</span>acket.options={};<span class="cstat-no" title="statement not covered" >p</span>acket.options.compress=!this.flags||false!==this.flags.compress;<span class="cstat-no" title="statement not covered" >i</span>f("function"==typeof args[args.length-1]){<span class="cstat-no" title="statement not covered" >debug("emitting packet with ack id %d",this.ids);<span class="cstat-no" title="statement not covered" >t</span>his.acks[this.ids]=args.pop();<span class="cstat-no" title="statement not covered" >p</span>acket.id=this.ids++}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.connected){<span class="cstat-no" title="statement not covered" >this.packet(packet)}</span>else{<span class="cstat-no" title="statement not covered" >this.sendBuffer.push(packet)}<span class="cstat-no" title="statement not covered" ></span>d</span>elete this.flags;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.packet=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>packet.nsp=this.nsp;<span class="cstat-no" title="statement not covered" >t</span>his.io.packet(packet)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onopen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("transport is open - connecting");<span class="cstat-no" title="statement not covered" >i</span>f("/"!=this.nsp){<span class="cstat-no" title="statement not covered" >this.packet({type:parser.CONNECT})}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onclose=<span class="fstat-no" title="function not covered" >function(reason){<span class="cstat-no" title="statement not covered" ></span>debug("close (%s)",reason);<span class="cstat-no" title="statement not covered" >t</span>his.connected=false;<span class="cstat-no" title="statement not covered" >t</span>his.disconnected=true;<span class="cstat-no" title="statement not covered" >d</span>elete this.id;<span class="cstat-no" title="statement not covered" >t</span>his.emit("disconnect",reason)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onpacket=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>if(packet.nsp!=this.nsp)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>witch(packet.type){case parser.CONNECT:<span class="cstat-no" title="statement not covered" >this.onconnect();<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.EVENT:<span class="cstat-no" title="statement not covered" >this.onevent(packet);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.BINARY_EVENT:<span class="cstat-no" title="statement not covered" >this.onevent(packet);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.ACK:<span class="cstat-no" title="statement not covered" >this.onack(packet);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.BINARY_ACK:<span class="cstat-no" title="statement not covered" >this.onack(packet);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.DISCONNECT:<span class="cstat-no" title="statement not covered" >this.ondisconnect();<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase parser.ERROR:<span class="cstat-no" title="statement not covered" >this.emit("error",packet.data);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onevent=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>var args=packet.data||[];<span class="cstat-no" title="statement not covered" >d</span>ebug("emitting event %j",args);<span class="cstat-no" title="statement not covered" >i</span>f(null!=packet.id){<span class="cstat-no" title="statement not covered" >debug("attaching ack callback to event");<span class="cstat-no" title="statement not covered" >a</span>rgs.push(this.ack(packet.id))}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.connected){<span class="cstat-no" title="statement not covered" >emit.apply(this,args)}</span>else{<span class="cstat-no" title="statement not covered" >this.receiveBuffer.push(args)}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.ack=<span class="fstat-no" title="function not covered" >function(id){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >v</span>ar sent=false;<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(sent)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>ent=true;<span class="cstat-no" title="statement not covered" >v</span>ar args=toArray(arguments);<span class="cstat-no" title="statement not covered" >d</span>ebug("sending ack %j",args);<span class="cstat-no" title="statement not covered" >v</span>ar type=hasBin(args)?parser.BINARY_ACK:parser.ACK;<span class="cstat-no" title="statement not covered" >s</span>elf.packet({type:type,id:id,data:args})}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onack=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>var ack=this.acks[packet.id];<span class="cstat-no" title="statement not covered" >i</span>f("function"==typeof ack){<span class="cstat-no" title="statement not covered" >debug("calling ack %s with %j",packet.id,packet.data);<span class="cstat-no" title="statement not covered" >a</span>ck.apply(this,packet.data);<span class="cstat-no" title="statement not covered" >d</span>elete this.acks[packet.id]}</span>else{<span class="cstat-no" title="statement not covered" >debug("bad ack %s",packet.id)}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.connected=true;<span class="cstat-no" title="statement not covered" >t</span>his.disconnected=false;<span class="cstat-no" title="statement not covered" >t</span>his.emit("connect");<span class="cstat-no" title="statement not covered" >t</span>his.emitBuffered()}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.emitBuffered=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var i;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;this.receiveBuffer.length;i++){<span class="cstat-no" title="statement not covered" >emit.apply(this,this.receiveBuffer[i])}<span class="cstat-no" title="statement not covered" ></span>t</span>his.receiveBuffer=[];<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;this.sendBuffer.length;i++){<span class="cstat-no" title="statement not covered" >this.packet(this.sendBuffer[i])}<span class="cstat-no" title="statement not covered" ></span>t</span>his.sendBuffer=[]}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.ondisconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("server disconnect (%s)",this.nsp);<span class="cstat-no" title="statement not covered" >t</span>his.destroy();<span class="cstat-no" title="statement not covered" >t</span>his.onclose("io server disconnect")}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.subs){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;this.subs.length;i++){<span class="cstat-no" title="statement not covered" >this.subs[i].destroy()}<span class="cstat-no" title="statement not covered" ></span>t</span>his.subs=null}<span class="cstat-no" title="statement not covered" ></span>t</span>his.io.destroy(this)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.close=Socket.prototype.disconnect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.connected){<span class="cstat-no" title="statement not covered" >debug("performing disconnect (%s)",this.nsp);<span class="cstat-no" title="statement not covered" >t</span>his.packet({type:parser.DISCONNECT})}<span class="cstat-no" title="statement not covered" ></span>t</span>his.destroy();<span class="cstat-no" title="statement not covered" >i</span>f(this.connected){<span class="cstat-no" title="statement not covered" >this.onclose("io client disconnect")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.compress=<span class="fstat-no" title="function not covered" >function(compress){<span class="cstat-no" title="statement not covered" ></span>this.flags=this.flags||{};<span class="cstat-no" title="statement not covered" >t</span>his.flags.compress=compress;<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>}</span>,{"./on":3,"component-bind":11,"component-emitter":12,debug:14,"has-binary":31,"socket.io-parser":41,"to-array":44}],5:[function(_dereq_,module,exports){(function(global){var parseuri=_dereq_("parseuri");var debug=_dereq_("debug")("socket.io-client:url");module.exports=url;<span class="fstat-no" title="function not covered" >function url(uri,loc){<span class="cstat-no" title="statement not covered" ></span>var obj=uri;<span class="cstat-no" title="statement not covered" >v</span>ar loc=loc||global.location;<span class="cstat-no" title="statement not covered" >i</span>f(null==uri)<span class="cstat-no" title="statement not covered" >uri=loc.protocol+"//"+loc.host;<span class="cstat-no" title="statement not covered" >i</span></span>f("string"==typeof uri){<span class="cstat-no" title="statement not covered" >if("/"==uri.charAt(0)){<span class="cstat-no" title="statement not covered" >if("/"==uri.charAt(1)){<span class="cstat-no" title="statement not covered" >uri=loc.protocol+uri}</span>else{<span class="cstat-no" title="statement not covered" >uri=loc.host+uri}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!/^(https?|wss?):\/\//.test(uri)){<span class="cstat-no" title="statement not covered" >debug("protocol-less url %s",uri);<span class="cstat-no" title="statement not covered" >i</span>f("undefined"!=typeof loc){<span class="cstat-no" title="statement not covered" >uri=loc.protocol+"//"+uri}</span>else{<span class="cstat-no" title="statement not covered" >uri="https://"+uri}</span>}<span class="cstat-no" title="statement not covered" ></span>d</span>ebug("parse %s",uri);<span class="cstat-no" title="statement not covered" >o</span>bj=parseuri(uri)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!obj.port){<span class="cstat-no" title="statement not covered" >if(/^(http|ws)$/.test(obj.protocol)){<span class="cstat-no" title="statement not covered" >obj.port="80"}</span>else <span class="cstat-no" title="statement not covered" >if(/^(http|ws)s$/.test(obj.protocol)){<span class="cstat-no" title="statement not covered" >obj.port="443"}</span>}<span class="cstat-no" title="statement not covered" ></span></span>o</span>bj.path=obj.path||"/";<span class="cstat-no" title="statement not covered" >v</span>ar ipv6=obj.host.indexOf(":")!==-1;<span class="cstat-no" title="statement not covered" >v</span>ar host=ipv6?"["+obj.host+"]":obj.host;<span class="cstat-no" title="statement not covered" >o</span>bj.id=obj.protocol+"://"+host+":"+obj.port;<span class="cstat-no" title="statement not covered" >o</span>bj.href=obj.protocol+"://"+host+(loc&amp;&amp;loc.port==obj.port?"":":"+obj.port);<span class="cstat-no" title="statement not covered" >r</span>eturn obj}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{debug:14,parseuri:39}],6:[function(_dereq_,module,exports){module.exports=after;<span class="fstat-no" title="function not covered" >function after(count,callback,err_cb){<span class="cstat-no" title="statement not covered" ></span>var bail=false;<span class="cstat-no" title="statement not covered" >e</span>rr_cb=err_cb||noop;<span class="cstat-no" title="statement not covered" >p</span>roxy.count=count;<span class="cstat-no" title="statement not covered" >r</span>eturn count===0?callback():proxy;<span class="fstat-no" title="function not covered" >f</span>unction proxy(err,result){<span class="cstat-no" title="statement not covered" ></span>if(proxy.count&lt;=0){<span class="cstat-no" title="statement not covered" >throw new Error("after called too many times")}<span class="cstat-no" title="statement not covered" ></span>-</span>-proxy.count;<span class="cstat-no" title="statement not covered" >i</span>f(err){<span class="cstat-no" title="statement not covered" >bail=true;<span class="cstat-no" title="statement not covered" >c</span>allback(err);<span class="cstat-no" title="statement not covered" >c</span>allback=err_cb}</span>else <span class="cstat-no" title="statement not covered" >if(proxy.count===0&amp;&amp;!bail){<span class="cstat-no" title="statement not covered" >callback(null,result)}</span>}</span></span>}<span class="fstat-no" title="function not covered" >function noop(){</span>}},{}],7:[function(_dereq_,module,exports){module.exports=<span class="fstat-no" title="function not covered" >function(arraybuffer,start,end){<span class="cstat-no" title="statement not covered" ></span>var bytes=arraybuffer.byteLength;<span class="cstat-no" title="statement not covered" >s</span>tart=start||0;<span class="cstat-no" title="statement not covered" >e</span>nd=end||bytes;<span class="cstat-no" title="statement not covered" >i</span>f(arraybuffer.slice){<span class="cstat-no" title="statement not covered" >return arraybuffer.slice(start,end)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(start&lt;0){<span class="cstat-no" title="statement not covered" >start+=bytes}<span class="cstat-no" title="statement not covered" ></span>i</span>f(end&lt;0){<span class="cstat-no" title="statement not covered" >end+=bytes}<span class="cstat-no" title="statement not covered" ></span>i</span>f(end&gt;bytes){<span class="cstat-no" title="statement not covered" >end=bytes}<span class="cstat-no" title="statement not covered" ></span>i</span>f(start&gt;=bytes||start&gt;=end||bytes===0){<span class="cstat-no" title="statement not covered" >return new ArrayBuffer(0)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar abv=new Uint8Array(arraybuffer);<span class="cstat-no" title="statement not covered" >v</span>ar result=new Uint8Array(end-start);<span class="cstat-no" title="statement not covered" >f</span>or(var i=start,ii=0;i&lt;end;i++,ii++){<span class="cstat-no" title="statement not covered" >result[ii]=abv[i]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result.buffer}</span>},{}],8:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=Backoff;<span class="fstat-no" title="function not covered" >f</span>unction Backoff(opts){<span class="cstat-no" title="statement not covered" ></span>opts=opts||{};<span class="cstat-no" title="statement not covered" >t</span>his.ms=opts.min||100;<span class="cstat-no" title="statement not covered" >t</span>his.max=opts.max||1e4;<span class="cstat-no" title="statement not covered" >t</span>his.factor=opts.factor||2;<span class="cstat-no" title="statement not covered" >t</span>his.jitter=opts.jitter&gt;0&amp;&amp;opts.jitter&lt;=1?opts.jitter:0;<span class="cstat-no" title="statement not covered" >t</span>his.attempts=0}<span class="cstat-no" title="statement not covered" ></span>Backoff.prototype.duration=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var ms=this.ms*Math.pow(this.factor,this.attempts++);<span class="cstat-no" title="statement not covered" >i</span>f(this.jitter){<span class="cstat-no" title="statement not covered" >var rand=Math.random();<span class="cstat-no" title="statement not covered" >v</span>ar deviation=Math.floor(rand*this.jitter*ms);<span class="cstat-no" title="statement not covered" >m</span>s=(Math.floor(rand*10)&amp;1)==0?ms-deviation:ms+deviation}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn Math.min(ms,this.max)|0}</span>;<span class="cstat-no" title="statement not covered" >B</span>ackoff.prototype.reset=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.attempts=0}</span>;<span class="cstat-no" title="statement not covered" >B</span>ackoff.prototype.setMin=<span class="fstat-no" title="function not covered" >function(min){<span class="cstat-no" title="statement not covered" ></span>this.ms=min}</span>;<span class="cstat-no" title="statement not covered" >B</span>ackoff.prototype.setMax=<span class="fstat-no" title="function not covered" >function(max){<span class="cstat-no" title="statement not covered" ></span>this.max=max}</span>;<span class="cstat-no" title="statement not covered" >B</span>ackoff.prototype.setJitter=<span class="fstat-no" title="function not covered" >function(jitter){<span class="cstat-no" title="statement not covered" ></span>this.jitter=jitter}</span>}</span>,{}],9:[function(_dereq_,module,exports){(function(chars){"use strict";exports.encode=<span class="fstat-no" title="function not covered" >function(arraybuffer){<span class="cstat-no" title="statement not covered" ></span>var bytes=new Uint8Array(arraybuffer),i,len=bytes.buffer.byteLength,base64="";<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;len;i+=3){<span class="cstat-no" title="statement not covered" >base64+=chars[bytes.buffer[i]&gt;&gt;2];<span class="cstat-no" title="statement not covered" >b</span>ase64+=chars[(bytes.buffer[i]&amp;3)&lt;&lt;4|bytes.buffer[i+1]&gt;&gt;4];<span class="cstat-no" title="statement not covered" >b</span>ase64+=chars[(bytes.buffer[i+1]&amp;15)&lt;&lt;2|bytes.buffer[i+2]&gt;&gt;6];<span class="cstat-no" title="statement not covered" >b</span>ase64+=chars[bytes.buffer[i+2]&amp;63]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(len%3===2){<span class="cstat-no" title="statement not covered" >base64=base64.substring(0,base64.length-1)+"="}</span>else <span class="cstat-no" title="statement not covered" >if(len%3===1){<span class="cstat-no" title="statement not covered" >base64=base64.substring(0,base64.length-2)+"=="}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn base64}</span>;exports.decode=<span class="fstat-no" title="function not covered" >function(base64){<span class="cstat-no" title="statement not covered" ></span>var bufferLength=base64.length*.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;<span class="cstat-no" title="statement not covered" >i</span>f(base64[base64.length-1]==="="){<span class="cstat-no" title="statement not covered" >bufferLength--;<span class="cstat-no" title="statement not covered" >i</span>f(base64[base64.length-2]==="="){<span class="cstat-no" title="statement not covered" >bufferLength--}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;len;i+=4){<span class="cstat-no" title="statement not covered" >encoded1=chars.indexOf(base64[i]);<span class="cstat-no" title="statement not covered" >e</span>ncoded2=chars.indexOf(base64[i+1]);<span class="cstat-no" title="statement not covered" >e</span>ncoded3=chars.indexOf(base64[i+2]);<span class="cstat-no" title="statement not covered" >e</span>ncoded4=chars.indexOf(base64[i+3]);<span class="cstat-no" title="statement not covered" >b</span>ytes[p++]=encoded1&lt;&lt;2|encoded2&gt;&gt;4;<span class="cstat-no" title="statement not covered" >b</span>ytes[p++]=(encoded2&amp;15)&lt;&lt;4|encoded3&gt;&gt;2;<span class="cstat-no" title="statement not covered" >b</span>ytes[p++]=(encoded3&amp;3)&lt;&lt;6|encoded4&amp;63}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn arraybuffer}</span>})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],10:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){<span class="cstat-no" title="statement not covered" ></span>var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;<span class="cstat-no" title="statement not covered" >v</span>ar blobSupported=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >var a=new Blob(["hi"]);<span class="cstat-no" title="statement not covered" >r</span>eturn a.size===2}</span>catch(e){<span class="cstat-no" title="statement not covered" >return false}</span>}</span>();<span class="cstat-no" title="statement not covered" >v</span>ar blobSupportsArrayBufferView=blobSupported&amp;&amp;<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >var b=new Blob([new Uint8Array([1,2])]);<span class="cstat-no" title="statement not covered" >r</span>eturn b.size===2}</span>catch(e){<span class="cstat-no" title="statement not covered" >return false}</span>}</span>();<span class="cstat-no" title="statement not covered" >v</span>ar blobBuilderSupported=BlobBuilder&amp;&amp;BlobBuilder.prototype.append&amp;&amp;BlobBuilder.prototype.getBlob;<span class="fstat-no" title="function not covered" >f</span>unction mapArrayBufferViews(ary){<span class="cstat-no" title="statement not covered" ></span>for(var i=0;i&lt;ary.length;i++){<span class="cstat-no" title="statement not covered" >var chunk=ary[i];<span class="cstat-no" title="statement not covered" >i</span>f(chunk.buffer instanceof ArrayBuffer){<span class="cstat-no" title="statement not covered" >var buf=chunk.buffer;<span class="cstat-no" title="statement not covered" >i</span>f(chunk.byteLength!==buf.byteLength){<span class="cstat-no" title="statement not covered" >var copy=new Uint8Array(chunk.byteLength);<span class="cstat-no" title="statement not covered" >c</span>opy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));<span class="cstat-no" title="statement not covered" >b</span>uf=copy.buffer}<span class="cstat-no" title="statement not covered" ></span>a</span>ry[i]=buf}</span>}</span>}<span class="fstat-no" title="function not covered" ></span>function BlobBuilderConstructor(ary,options){<span class="cstat-no" title="statement not covered" ></span>options=options||{};<span class="cstat-no" title="statement not covered" >v</span>ar bb=new BlobBuilder;<span class="cstat-no" title="statement not covered" >m</span>apArrayBufferViews(ary);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;ary.length;i++){<span class="cstat-no" title="statement not covered" >bb.append(ary[i])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn options.type?bb.getBlob(options.type):bb.getBlob()}<span class="fstat-no" title="function not covered" ></span>function BlobConstructor(ary,options){<span class="cstat-no" title="statement not covered" ></span>mapArrayBufferViews(ary);<span class="cstat-no" title="statement not covered" >r</span>eturn new Blob(ary,options||{})}<span class="cstat-no" title="statement not covered" ></span>module.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(blobSupported){<span class="cstat-no" title="statement not covered" >return blobSupportsArrayBufferView?global.Blob:BlobConstructor}</span>else <span class="cstat-no" title="statement not covered" >if(blobBuilderSupported){<span class="cstat-no" title="statement not covered" >return BlobBuilderConstructor}</span>else{<span class="cstat-no" title="statement not covered" >return undefined}</span>}</span></span>()}</span>).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})}</span>,{}],11:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>var slice=[].slice;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function(obj,fn){<span class="cstat-no" title="statement not covered" ></span>if("string"==typeof fn)<span class="cstat-no" title="statement not covered" >fn=obj[fn];<span class="cstat-no" title="statement not covered" >i</span></span>f("function"!=typeof fn)<span class="cstat-no" title="statement not covered" >throw new Error("bind() requires a function");<span class="cstat-no" title="statement not covered" >v</span></span>ar args=slice.call(arguments,2);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return fn.apply(obj,args.concat(slice.call(arguments)))}</span>}</span>}</span>,{}],12:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=Emitter;<span class="fstat-no" title="function not covered" >f</span>unction Emitter(obj){<span class="cstat-no" title="statement not covered" ></span>if(obj)<span class="cstat-no" title="statement not covered" >return mixin(obj)}<span class="fstat-no" title="function not covered" ></span></span>function mixin(obj){<span class="cstat-no" title="statement not covered" ></span>for(var key in Emitter.prototype){<span class="cstat-no" title="statement not covered" >obj[key]=Emitter.prototype[key]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn obj}<span class="cstat-no" title="statement not covered" ></span>Emitter.prototype.on=Emitter.prototype.addEventListener=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >(</span>this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter.prototype.once=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="fstat-no" title="function not covered" ></span>function on(){<span class="cstat-no" title="statement not covered" ></span>this.off(event,on);<span class="cstat-no" title="statement not covered" >f</span>n.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>on.fn=fn;<span class="cstat-no" title="statement not covered" >t</span>his.on(event,on);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >i</span>f(0==arguments.length){<span class="cstat-no" title="statement not covered" >this._callbacks={};<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar callbacks=this._callbacks["$"+event];<span class="cstat-no" title="statement not covered" >i</span>f(!callbacks)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(1==arguments.length){<span class="cstat-no" title="statement not covered" >delete this._callbacks["$"+event];<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar cb;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;callbacks.length;i++){<span class="cstat-no" title="statement not covered" >cb=callbacks[i];<span class="cstat-no" title="statement not covered" >i</span>f(cb===fn||cb.fn===fn){<span class="cstat-no" title="statement not covered" >callbacks.splice(i,1);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter.prototype.emit=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >v</span>ar args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];<span class="cstat-no" title="statement not covered" >i</span>f(callbacks){<span class="cstat-no" title="statement not covered" >callbacks=callbacks.slice(0);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,len=callbacks.length;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >callbacks[i].apply(this,args)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter.prototype.listeners=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >r</span>eturn this._callbacks["$"+event]||[]}</span>;<span class="cstat-no" title="statement not covered" >E</span>mitter.prototype.hasListeners=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>return!!this.listeners(event).length}</span>}</span>,{}],13:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var fn=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >f</span>n.prototype=b.prototype;<span class="cstat-no" title="statement not covered" >a</span>.prototype=new fn;<span class="cstat-no" title="statement not covered" >a</span>.prototype.constructor=a}</span>}</span>,{}],14:[function(_dereq_,module,exports){exports=module.exports=_dereq_("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >"undefined"!=typeof chrome.storage?<span class="branch-0 cbranch-no" title="branch not covered" ></span>chrome.storage.local:</span>localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];<span class="fstat-no" title="function not covered" >function useColors(){<span class="cstat-no" title="statement not covered" ></span>return"WebkitAppearance"in document.documentElement.style||window.console&amp;&amp;(console.firebug||console.exception&amp;&amp;console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&amp;&amp;parseInt(RegExp.$1,10)&gt;=31}</span>exports.formatters.j=<span class="fstat-no" title="function not covered" >function(v){<span class="cstat-no" title="statement not covered" ></span>return JSON.stringify(v)}</span>;<span class="fstat-no" title="function not covered" >function formatArgs(){<span class="cstat-no" title="statement not covered" ></span>var args=arguments;<span class="cstat-no" title="statement not covered" >v</span>ar useColors=this.useColors;<span class="cstat-no" title="statement not covered" >a</span>rgs[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);<span class="cstat-no" title="statement not covered" >i</span>f(!useColors)<span class="cstat-no" title="statement not covered" >return args;<span class="cstat-no" title="statement not covered" >v</span></span>ar c="color: "+this.color;<span class="cstat-no" title="statement not covered" >a</span>rgs=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));<span class="cstat-no" title="statement not covered" >v</span>ar index=0;<span class="cstat-no" title="statement not covered" >v</span>ar lastC=0;<span class="cstat-no" title="statement not covered" >a</span>rgs[0].replace(/%[a-z%]/g,<span class="fstat-no" title="function not covered" >function(match){<span class="cstat-no" title="statement not covered" ></span>if("%%"===match)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>ndex++;<span class="cstat-no" title="statement not covered" >i</span>f("%c"===match){<span class="cstat-no" title="statement not covered" >lastC=index}</span>}</span>);<span class="cstat-no" title="statement not covered" >a</span>rgs.splice(lastC,0,c);<span class="cstat-no" title="statement not covered" >r</span>eturn args}<span class="fstat-no" title="function not covered" ></span>function log(){<span class="cstat-no" title="statement not covered" ></span>return"object"===typeof console&amp;&amp;console.log&amp;&amp;Function.prototype.apply.call(console.log,console,arguments)}</span>function save(namespaces){try{<span class="missing-if-branch" title="else path not taken" >E</span>if(null==namespaces){exports.storage.removeItem("debug")}else{<span class="cstat-no" title="statement not covered" >exports.storage.debug=namespaces}</span>}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":15}],15:[function(_dereq_,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=_dereq_("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;<span class="fstat-no" title="function not covered" >function selectColor(){<span class="cstat-no" title="statement not covered" ></span>return exports.colors[prevColor++%exports.colors.length]}</span>function debug(namespace){<span class="fstat-no" title="function not covered" >function disabled(){</span>}disabled.enabled=false;<span class="fstat-no" title="function not covered" >function enabled(){<span class="cstat-no" title="statement not covered" ></span>var self=enabled;<span class="cstat-no" title="statement not covered" >v</span>ar curr=+new Date;<span class="cstat-no" title="statement not covered" >v</span>ar ms=curr-(prevTime||curr);<span class="cstat-no" title="statement not covered" >s</span>elf.diff=ms;<span class="cstat-no" title="statement not covered" >s</span>elf.prev=prevTime;<span class="cstat-no" title="statement not covered" >s</span>elf.curr=curr;<span class="cstat-no" title="statement not covered" >p</span>revTime=curr;<span class="cstat-no" title="statement not covered" >i</span>f(null==self.useColors)<span class="cstat-no" title="statement not covered" >self.useColors=exports.useColors();<span class="cstat-no" title="statement not covered" >i</span></span>f(null==self.color&amp;&amp;self.useColors)<span class="cstat-no" title="statement not covered" >self.color=selectColor();<span class="cstat-no" title="statement not covered" >v</span></span>ar args=Array.prototype.slice.call(arguments);<span class="cstat-no" title="statement not covered" >a</span>rgs[0]=exports.coerce(args[0]);<span class="cstat-no" title="statement not covered" >i</span>f("string"!==typeof args[0]){<span class="cstat-no" title="statement not covered" >args=["%o"].concat(args)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar index=0;<span class="cstat-no" title="statement not covered" >a</span>rgs[0]=args[0].replace(/%([a-z%])/g,<span class="fstat-no" title="function not covered" >function(match,format){<span class="cstat-no" title="statement not covered" ></span>if(match==="%%")<span class="cstat-no" title="statement not covered" >return match;<span class="cstat-no" title="statement not covered" >i</span></span>ndex++;<span class="cstat-no" title="statement not covered" >v</span>ar formatter=exports.formatters[format];<span class="cstat-no" title="statement not covered" >i</span>f("function"===typeof formatter){<span class="cstat-no" title="statement not covered" >var val=args[index];<span class="cstat-no" title="statement not covered" >m</span>atch=formatter.call(self,val);<span class="cstat-no" title="statement not covered" >a</span>rgs.splice(index,1);<span class="cstat-no" title="statement not covered" >i</span>ndex--}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn match}</span>);<span class="cstat-no" title="statement not covered" >i</span>f("function"===typeof exports.formatArgs){<span class="cstat-no" title="statement not covered" >args=exports.formatArgs.apply(self,args)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar logFn=enabled.log||exports.log||console.log.bind(console);<span class="cstat-no" title="statement not covered" >l</span>ogFn.apply(self,args)}</span>enabled.enabled=true;var fn=exports.enabled(namespace)?<span class="branch-0 cbranch-no" title="branch not covered" >enabled:</span>disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i&lt;len;i++){<span class="missing-if-branch" title="else path not taken" >E</span>if(!split[i])continue;<span class="cstat-no" title="statement not covered" >namespaces=split[i].replace(/\*/g,".*?");<span class="cstat-no" title="statement not covered" >i</span>f(namespaces[0]==="-"){<span class="cstat-no" title="statement not covered" >exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}</span>else{<span class="cstat-no" title="statement not covered" >exports.names.push(new RegExp("^"+namespaces+"$"))}</span>}</span>}<span class="fstat-no" title="function not covered" >function disable(){<span class="cstat-no" title="statement not covered" ></span>exports.enable("")}</span>function enabled(name){var i,len;for(i=0,len=exports.skips.length;i&lt;len;i++){<span class="cstat-no" title="statement not covered" >if(exports.skips[i].test(name)){<span class="cstat-no" title="statement not covered" >return false}</span>}</span>for(i=0,len=exports.names.length;i&lt;len;i++){<span class="cstat-no" title="statement not covered" >if(exports.names[i].test(name)){<span class="cstat-no" title="statement not covered" >return true}</span>}</span>return false}<span class="fstat-no" title="function not covered" >function coerce(val){<span class="cstat-no" title="statement not covered" ></span>if(val instanceof Error)<span class="cstat-no" title="statement not covered" >return val.stack||val.message;<span class="cstat-no" title="statement not covered" >r</span></span>eturn val}</span>},{ms:36}],16:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":17}],17:[function(_dereq_,module,exports){module.exports=_dereq_("./socket");<span class="cstat-no" title="statement not covered" >module.exports.parser=_dereq_("engine.io-parser")}</span>,{"./socket":18,"engine.io-parser":27}],18:[function(_dereq_,module,exports){(function(global){var transports=_dereq_("./transports");<span class="cstat-no" title="statement not covered" >var Emitter=_dereq_("component-emitter");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("engine.io-client:socket");<span class="cstat-no" title="statement not covered" >v</span>ar index=_dereq_("indexof");<span class="cstat-no" title="statement not covered" >v</span>ar parser=_dereq_("engine.io-parser");<span class="cstat-no" title="statement not covered" >v</span>ar parseuri=_dereq_("parseuri");<span class="cstat-no" title="statement not covered" >v</span>ar parsejson=_dereq_("parsejson");<span class="cstat-no" title="statement not covered" >v</span>ar parseqs=_dereq_("parseqs");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Socket;<span class="fstat-no" title="function not covered" >f</span>unction noop(){</span>}<span class="fstat-no" title="function not covered" >function Socket(uri,opts){<span class="cstat-no" title="statement not covered" ></span>if(!(this instanceof Socket))<span class="cstat-no" title="statement not covered" >return new Socket(uri,opts);<span class="cstat-no" title="statement not covered" >o</span></span>pts=opts||{};<span class="cstat-no" title="statement not covered" >i</span>f(uri&amp;&amp;"object"==typeof uri){<span class="cstat-no" title="statement not covered" >opts=uri;<span class="cstat-no" title="statement not covered" >u</span>ri=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(uri){<span class="cstat-no" title="statement not covered" >uri=parseuri(uri);<span class="cstat-no" title="statement not covered" >o</span>pts.hostname=uri.host;<span class="cstat-no" title="statement not covered" >o</span>pts.secure=uri.protocol=="https"||uri.protocol=="wss";<span class="cstat-no" title="statement not covered" >o</span>pts.port=uri.port;<span class="cstat-no" title="statement not covered" >i</span>f(uri.query)<span class="cstat-no" title="statement not covered" >opts.query=uri.query}</span></span>else <span class="cstat-no" title="statement not covered" >if(opts.host){<span class="cstat-no" title="statement not covered" >opts.hostname=parseuri(opts.host).host}<span class="cstat-no" title="statement not covered" ></span>t</span></span>his.secure=null!=opts.secure?opts.secure:global.location&amp;&amp;"https:"==location.protocol;<span class="cstat-no" title="statement not covered" >i</span>f(opts.hostname&amp;&amp;!opts.port){<span class="cstat-no" title="statement not covered" >opts.port=this.secure?"443":"80"}<span class="cstat-no" title="statement not covered" ></span>t</span>his.agent=opts.agent||false;<span class="cstat-no" title="statement not covered" >t</span>his.hostname=opts.hostname||(global.location?location.hostname:"localhost");<span class="cstat-no" title="statement not covered" >t</span>his.port=opts.port||(global.location&amp;&amp;location.port?location.port:this.secure?443:80);<span class="cstat-no" title="statement not covered" >t</span>his.query=opts.query||{};<span class="cstat-no" title="statement not covered" >i</span>f("string"==typeof this.query)<span class="cstat-no" title="statement not covered" >this.query=parseqs.decode(this.query);<span class="cstat-no" title="statement not covered" >t</span></span>his.upgrade=false!==opts.upgrade;<span class="cstat-no" title="statement not covered" >t</span>his.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";<span class="cstat-no" title="statement not covered" >t</span>his.forceJSONP=!!opts.forceJSONP;<span class="cstat-no" title="statement not covered" >t</span>his.jsonp=false!==opts.jsonp;<span class="cstat-no" title="statement not covered" >t</span>his.forceBase64=!!opts.forceBase64;<span class="cstat-no" title="statement not covered" >t</span>his.enablesXDR=!!opts.enablesXDR;<span class="cstat-no" title="statement not covered" >t</span>his.timestampParam=opts.timestampParam||"t";<span class="cstat-no" title="statement not covered" >t</span>his.timestampRequests=opts.timestampRequests;<span class="cstat-no" title="statement not covered" >t</span>his.transports=opts.transports||["polling","websocket"];<span class="cstat-no" title="statement not covered" >t</span>his.readyState="";<span class="cstat-no" title="statement not covered" >t</span>his.writeBuffer=[];<span class="cstat-no" title="statement not covered" >t</span>his.policyPort=opts.policyPort||843;<span class="cstat-no" title="statement not covered" >t</span>his.rememberUpgrade=opts.rememberUpgrade||false;<span class="cstat-no" title="statement not covered" >t</span>his.binaryType=null;<span class="cstat-no" title="statement not covered" >t</span>his.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;<span class="cstat-no" title="statement not covered" >t</span>his.perMessageDeflate=false!==opts.perMessageDeflate?opts.perMessageDeflate||{}:false;<span class="cstat-no" title="statement not covered" >i</span>f(true===this.perMessageDeflate)<span class="cstat-no" title="statement not covered" >this.perMessageDeflate={};<span class="cstat-no" title="statement not covered" >i</span></span>f(this.perMessageDeflate&amp;&amp;null==this.perMessageDeflate.threshold){<span class="cstat-no" title="statement not covered" >this.perMessageDeflate.threshold=1024}<span class="cstat-no" title="statement not covered" ></span>t</span>his.pfx=opts.pfx||null;<span class="cstat-no" title="statement not covered" >t</span>his.key=opts.key||null;<span class="cstat-no" title="statement not covered" >t</span>his.passphrase=opts.passphrase||null;<span class="cstat-no" title="statement not covered" >t</span>his.cert=opts.cert||null;<span class="cstat-no" title="statement not covered" >t</span>his.ca=opts.ca||null;<span class="cstat-no" title="statement not covered" >t</span>his.ciphers=opts.ciphers||null;<span class="cstat-no" title="statement not covered" >t</span>his.rejectUnauthorized=opts.rejectUnauthorized===undefined?null:opts.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >v</span>ar freeGlobal=typeof global=="object"&amp;&amp;global;<span class="cstat-no" title="statement not covered" >i</span>f(freeGlobal.global===freeGlobal){<span class="cstat-no" title="statement not covered" >if(opts.extraHeaders&amp;&amp;Object.keys(opts.extraHeaders).length&gt;0){<span class="cstat-no" title="statement not covered" >this.extraHeaders=opts.extraHeaders}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>his.open()}<span class="cstat-no" title="statement not covered" ></span>Socket.priorWebsocketSuccess=false;<span class="cstat-no" title="statement not covered" >E</span>mitter(Socket.prototype);<span class="cstat-no" title="statement not covered" >S</span>ocket.protocol=parser.protocol;<span class="cstat-no" title="statement not covered" >S</span>ocket.Socket=Socket;<span class="cstat-no" title="statement not covered" >S</span>ocket.Transport=_dereq_("./transport");<span class="cstat-no" title="statement not covered" >S</span>ocket.transports=_dereq_("./transports");<span class="cstat-no" title="statement not covered" >S</span>ocket.parser=_dereq_("engine.io-parser");<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.createTransport=<span class="fstat-no" title="function not covered" >function(name){<span class="cstat-no" title="statement not covered" ></span>debug('creating transport "%s"',name);<span class="cstat-no" title="statement not covered" >v</span>ar query=clone(this.query);<span class="cstat-no" title="statement not covered" >q</span>uery.EIO=parser.protocol;<span class="cstat-no" title="statement not covered" >q</span>uery.transport=name;<span class="cstat-no" title="statement not covered" >i</span>f(this.id)<span class="cstat-no" title="statement not covered" >query.sid=this.id;<span class="cstat-no" title="statement not covered" >v</span></span>ar transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});<span class="cstat-no" title="statement not covered" >r</span>eturn transport}</span>;<span class="fstat-no" title="function not covered" >f</span>unction clone(obj){<span class="cstat-no" title="statement not covered" ></span>var o={};<span class="cstat-no" title="statement not covered" >f</span>or(var i in obj){<span class="cstat-no" title="statement not covered" >if(obj.hasOwnProperty(i)){<span class="cstat-no" title="statement not covered" >o[i]=obj[i]}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn o}<span class="cstat-no" title="statement not covered" ></span>Socket.prototype.open=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var transport;<span class="cstat-no" title="statement not covered" >i</span>f(this.rememberUpgrade&amp;&amp;Socket.priorWebsocketSuccess&amp;&amp;this.transports.indexOf("websocket")!=-1){<span class="cstat-no" title="statement not covered" >transport="websocket"}</span>else <span class="cstat-no" title="statement not covered" >if(0===this.transports.length){<span class="cstat-no" title="statement not covered" >var self=this;<span class="cstat-no" title="statement not covered" >s</span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.emit("error","No transports available")}</span>,0);<span class="cstat-no" title="statement not covered" >r</span>eturn}</span>else{<span class="cstat-no" title="statement not covered" >transport=this.transports[0]}<span class="cstat-no" title="statement not covered" ></span>t</span></span>his.readyState="opening";<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >transport=this.createTransport(transport)}</span>catch(e){<span class="cstat-no" title="statement not covered" >this.transports.shift();<span class="cstat-no" title="statement not covered" >t</span>his.open();<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>t</span>ransport.open();<span class="cstat-no" title="statement not covered" >t</span>his.setTransport(transport)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.setTransport=<span class="fstat-no" title="function not covered" >function(transport){<span class="cstat-no" title="statement not covered" ></span>debug("setting transport %s",transport.name);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >i</span>f(this.transport){<span class="cstat-no" title="statement not covered" >debug("clearing existing transport %s",this.transport.name);<span class="cstat-no" title="statement not covered" >t</span>his.transport.removeAllListeners()}<span class="cstat-no" title="statement not covered" ></span>t</span>his.transport=transport;<span class="cstat-no" title="statement not covered" >t</span>ransport.on("drain",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onDrain()}</span>).on("packet",<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>self.onPacket(packet)}</span>).on("error",<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>self.onError(e)}</span>).on("close",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onClose("transport close")}</span>)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.probe=<span class="fstat-no" title="function not covered" >function(name){<span class="cstat-no" title="statement not covered" ></span>debug('probing transport "%s"',name);<span class="cstat-no" title="statement not covered" >v</span>ar transport=this.createTransport(name,{probe:1}),failed=false,self=this;<span class="cstat-no" title="statement not covered" >S</span>ocket.priorWebsocketSuccess=false;<span class="fstat-no" title="function not covered" >f</span>unction onTransportOpen(){<span class="cstat-no" title="statement not covered" ></span>if(self.onlyBinaryUpgrades){<span class="cstat-no" title="statement not covered" >var upgradeLosesBinary=!this.supportsBinary&amp;&amp;self.transport.supportsBinary;<span class="cstat-no" title="statement not covered" >f</span>ailed=failed||upgradeLosesBinary}<span class="cstat-no" title="statement not covered" ></span>i</span>f(failed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>ebug('probe transport "%s" opened',name);<span class="cstat-no" title="statement not covered" >t</span>ransport.send([{type:"ping",data:"probe"}]);<span class="cstat-no" title="statement not covered" >t</span>ransport.once("packet",<span class="fstat-no" title="function not covered" >function(msg){<span class="cstat-no" title="statement not covered" ></span>if(failed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f("pong"==msg.type&amp;&amp;"probe"==msg.data){<span class="cstat-no" title="statement not covered" >debug('probe transport "%s" pong',name);<span class="cstat-no" title="statement not covered" >s</span>elf.upgrading=true;<span class="cstat-no" title="statement not covered" >s</span>elf.emit("upgrading",transport);<span class="cstat-no" title="statement not covered" >i</span>f(!transport)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >S</span></span>ocket.priorWebsocketSuccess="websocket"==transport.name;<span class="cstat-no" title="statement not covered" >d</span>ebug('pausing current transport "%s"',self.transport.name);<span class="cstat-no" title="statement not covered" >s</span>elf.transport.pause(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(failed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f("closed"==self.readyState)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>ebug("changing transport and sending upgrade packet");<span class="cstat-no" title="statement not covered" >c</span>leanup();<span class="cstat-no" title="statement not covered" >s</span>elf.setTransport(transport);<span class="cstat-no" title="statement not covered" >t</span>ransport.send([{type:"upgrade"}]);<span class="cstat-no" title="statement not covered" >s</span>elf.emit("upgrade",transport);<span class="cstat-no" title="statement not covered" >t</span>ransport=null;<span class="cstat-no" title="statement not covered" >s</span>elf.upgrading=false;<span class="cstat-no" title="statement not covered" >s</span>elf.flush()}</span>)}</span>else{<span class="cstat-no" title="statement not covered" >debug('probe transport "%s" failed',name);<span class="cstat-no" title="statement not covered" >v</span>ar err=new Error("probe error");<span class="cstat-no" title="statement not covered" >e</span>rr.transport=transport.name;<span class="cstat-no" title="statement not covered" >s</span>elf.emit("upgradeError",err)}</span>}</span>)}<span class="fstat-no" title="function not covered" ></span>function freezeTransport(){<span class="cstat-no" title="statement not covered" ></span>if(failed)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >f</span></span>ailed=true;<span class="cstat-no" title="statement not covered" >c</span>leanup();<span class="cstat-no" title="statement not covered" >t</span>ransport.close();<span class="cstat-no" title="statement not covered" >t</span>ransport=null}<span class="fstat-no" title="function not covered" ></span>function onerror(err){<span class="cstat-no" title="statement not covered" ></span>var error=new Error("probe error: "+err);<span class="cstat-no" title="statement not covered" >e</span>rror.transport=transport.name;<span class="cstat-no" title="statement not covered" >f</span>reezeTransport();<span class="cstat-no" title="statement not covered" >d</span>ebug('probe transport "%s" failed because of error: %s',name,err);<span class="cstat-no" title="statement not covered" >s</span>elf.emit("upgradeError",error)}<span class="fstat-no" title="function not covered" ></span>function onTransportClose(){<span class="cstat-no" title="statement not covered" ></span>onerror("transport closed")}<span class="fstat-no" title="function not covered" ></span>function onclose(){<span class="cstat-no" title="statement not covered" ></span>onerror("socket closed")}<span class="fstat-no" title="function not covered" ></span>function onupgrade(to){<span class="cstat-no" title="statement not covered" ></span>if(transport&amp;&amp;to.name!=transport.name){<span class="cstat-no" title="statement not covered" >debug('"%s" works - aborting "%s"',to.name,transport.name);<span class="cstat-no" title="statement not covered" >f</span>reezeTransport()}</span>}<span class="fstat-no" title="function not covered" ></span>function cleanup(){<span class="cstat-no" title="statement not covered" ></span>transport.removeListener("open",onTransportOpen);<span class="cstat-no" title="statement not covered" >t</span>ransport.removeListener("error",onerror);<span class="cstat-no" title="statement not covered" >t</span>ransport.removeListener("close",onTransportClose);<span class="cstat-no" title="statement not covered" >s</span>elf.removeListener("close",onclose);<span class="cstat-no" title="statement not covered" >s</span>elf.removeListener("upgrading",onupgrade)}<span class="cstat-no" title="statement not covered" ></span>transport.once("open",onTransportOpen);<span class="cstat-no" title="statement not covered" >t</span>ransport.once("error",onerror);<span class="cstat-no" title="statement not covered" >t</span>ransport.once("close",onTransportClose);</span></span>
<span class="cstat-no" title="statement not covered" >this.once("close",onclose);<span class="cstat-no" title="statement not covered" >t</span>his.once("upgrading",onupgrade);<span class="cstat-no" title="statement not covered" >t</span>ransport.open()}</span>;<span class="cstat-no" title="statement not covered" >Socket.prototype.onOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("socket open");<span class="cstat-no" title="statement not covered" >t</span>his.readyState="open";<span class="cstat-no" title="statement not covered" >S</span>ocket.priorWebsocketSuccess="websocket"==this.transport.name;<span class="cstat-no" title="statement not covered" >t</span>his.emit("open");<span class="cstat-no" title="statement not covered" >t</span>his.flush();<span class="cstat-no" title="statement not covered" >i</span>f("open"==this.readyState&amp;&amp;this.upgrade&amp;&amp;this.transport.pause){<span class="cstat-no" title="statement not covered" >debug("starting upgrade probes");<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=this.upgrades.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >this.probe(this.upgrades[i])}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onPacket=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>if("opening"==this.readyState||"open"==this.readyState){<span class="cstat-no" title="statement not covered" >debug('socket receive: type "%s", data "%s"',packet.type,packet.data);<span class="cstat-no" title="statement not covered" >t</span>his.emit("packet",packet);<span class="cstat-no" title="statement not covered" >t</span>his.emit("heartbeat");<span class="cstat-no" title="statement not covered" >s</span>witch(packet.type){case"open":<span class="cstat-no" title="statement not covered" >this.onHandshake(parsejson(packet.data));<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"pong":<span class="cstat-no" title="statement not covered" >this.setPing();<span class="cstat-no" title="statement not covered" >t</span>his.emit("pong");<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"error":<span class="cstat-no" title="statement not covered" >var err=new Error("server error");<span class="cstat-no" title="statement not covered" >e</span>rr.code=packet.data;<span class="cstat-no" title="statement not covered" >t</span>his.onError(err);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"message":<span class="cstat-no" title="statement not covered" >this.emit("data",packet.data);<span class="cstat-no" title="statement not covered" >t</span>his.emit("message",packet.data);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}</span>else{<span class="cstat-no" title="statement not covered" >debug('packet received with socket readyState "%s"',this.readyState)}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onHandshake=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.emit("handshake",data);<span class="cstat-no" title="statement not covered" >t</span>his.id=data.sid;<span class="cstat-no" title="statement not covered" >t</span>his.transport.query.sid=data.sid;<span class="cstat-no" title="statement not covered" >t</span>his.upgrades=this.filterUpgrades(data.upgrades);<span class="cstat-no" title="statement not covered" >t</span>his.pingInterval=data.pingInterval;<span class="cstat-no" title="statement not covered" >t</span>his.pingTimeout=data.pingTimeout;<span class="cstat-no" title="statement not covered" >t</span>his.onOpen();<span class="cstat-no" title="statement not covered" >i</span>f("closed"==this.readyState)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >t</span></span>his.setPing();<span class="cstat-no" title="statement not covered" >t</span>his.removeListener("heartbeat",this.onHeartbeat);<span class="cstat-no" title="statement not covered" >t</span>his.on("heartbeat",this.onHeartbeat)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onHeartbeat=<span class="fstat-no" title="function not covered" >function(timeout){<span class="cstat-no" title="statement not covered" ></span>clearTimeout(this.pingTimeoutTimer);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >s</span>elf.pingTimeoutTimer=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("closed"==self.readyState)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >s</span></span>elf.onClose("ping timeout")}</span>,timeout||self.pingInterval+self.pingTimeout)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.setPing=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >c</span>learTimeout(self.pingIntervalTimer);<span class="cstat-no" title="statement not covered" >s</span>elf.pingIntervalTimer=setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("writing ping packet - expecting pong within %sms",self.pingTimeout);<span class="cstat-no" title="statement not covered" >s</span>elf.ping();<span class="cstat-no" title="statement not covered" >s</span>elf.onHeartbeat(self.pingTimeout)}</span>,self.pingInterval)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.ping=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >t</span>his.sendPacket("ping",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.emit("ping")}</span>)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onDrain=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.writeBuffer.splice(0,this.prevBufferLen);<span class="cstat-no" title="statement not covered" >t</span>his.prevBufferLen=0;<span class="cstat-no" title="statement not covered" >i</span>f(0===this.writeBuffer.length){<span class="cstat-no" title="statement not covered" >this.emit("drain")}</span>else{<span class="cstat-no" title="statement not covered" >this.flush()}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.flush=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("closed"!=this.readyState&amp;&amp;this.transport.writable&amp;&amp;!this.upgrading&amp;&amp;this.writeBuffer.length){<span class="cstat-no" title="statement not covered" >debug("flushing %d packets in socket",this.writeBuffer.length);<span class="cstat-no" title="statement not covered" >t</span>his.transport.send(this.writeBuffer);<span class="cstat-no" title="statement not covered" >t</span>his.prevBufferLen=this.writeBuffer.length;<span class="cstat-no" title="statement not covered" >t</span>his.emit("flush")}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.write=Socket.prototype.send=<span class="fstat-no" title="function not covered" >function(msg,options,fn){<span class="cstat-no" title="statement not covered" ></span>this.sendPacket("message",msg,options,fn);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.sendPacket=<span class="fstat-no" title="function not covered" >function(type,data,options,fn){<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof data){<span class="cstat-no" title="statement not covered" >fn=data;<span class="cstat-no" title="statement not covered" >d</span>ata=undefined}<span class="cstat-no" title="statement not covered" ></span>i</span>f("function"==typeof options){<span class="cstat-no" title="statement not covered" >fn=options;<span class="cstat-no" title="statement not covered" >o</span>ptions=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f("closing"==this.readyState||"closed"==this.readyState){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>o</span>ptions=options||{};<span class="cstat-no" title="statement not covered" >o</span>ptions.compress=false!==options.compress;<span class="cstat-no" title="statement not covered" >v</span>ar packet={type:type,data:data,options:options};<span class="cstat-no" title="statement not covered" >t</span>his.emit("packetCreate",packet);<span class="cstat-no" title="statement not covered" >t</span>his.writeBuffer.push(packet);<span class="cstat-no" title="statement not covered" >i</span>f(fn)<span class="cstat-no" title="statement not covered" >this.once("flush",fn);<span class="cstat-no" title="statement not covered" >t</span></span>his.flush()}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.close=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("opening"==this.readyState||"open"==this.readyState){<span class="cstat-no" title="statement not covered" >this.readyState="closing";<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >i</span>f(this.writeBuffer.length){<span class="cstat-no" title="statement not covered" >this.once("drain",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.upgrading){<span class="cstat-no" title="statement not covered" >waitForUpgrade()}</span>else{<span class="cstat-no" title="statement not covered" >close()}</span>}</span>)}</span>else <span class="cstat-no" title="statement not covered" >if(this.upgrading){<span class="cstat-no" title="statement not covered" >waitForUpgrade()}</span>else{<span class="cstat-no" title="statement not covered" >close()}</span>}<span class="fstat-no" title="function not covered" ></span></span>f</span>unction close(){<span class="cstat-no" title="statement not covered" ></span>self.onClose("forced close");<span class="cstat-no" title="statement not covered" >d</span>ebug("socket closing - telling transport to close");<span class="cstat-no" title="statement not covered" >s</span>elf.transport.close()}<span class="fstat-no" title="function not covered" ></span>function cleanupAndClose(){<span class="cstat-no" title="statement not covered" ></span>self.removeListener("upgrade",cleanupAndClose);<span class="cstat-no" title="statement not covered" >s</span>elf.removeListener("upgradeError",cleanupAndClose);<span class="cstat-no" title="statement not covered" >c</span>lose()}<span class="fstat-no" title="function not covered" ></span>function waitForUpgrade(){<span class="cstat-no" title="statement not covered" ></span>self.once("upgrade",cleanupAndClose);<span class="cstat-no" title="statement not covered" >s</span>elf.once("upgradeError",cleanupAndClose)}<span class="cstat-no" title="statement not covered" ></span>return this}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onError=<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>debug("socket error %j",err);<span class="cstat-no" title="statement not covered" >S</span>ocket.priorWebsocketSuccess=false;<span class="cstat-no" title="statement not covered" >t</span>his.emit("error",err);<span class="cstat-no" title="statement not covered" >t</span>his.onClose("transport error",err)}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.onClose=<span class="fstat-no" title="function not covered" >function(reason,desc){<span class="cstat-no" title="statement not covered" ></span>if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){<span class="cstat-no" title="statement not covered" >debug('socket close with reason: "%s"',reason);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >c</span>learTimeout(this.pingIntervalTimer);<span class="cstat-no" title="statement not covered" >c</span>learTimeout(this.pingTimeoutTimer);<span class="cstat-no" title="statement not covered" >t</span>his.transport.removeAllListeners("close");<span class="cstat-no" title="statement not covered" >t</span>his.transport.close();<span class="cstat-no" title="statement not covered" >t</span>his.transport.removeAllListeners();<span class="cstat-no" title="statement not covered" >t</span>his.readyState="closed";<span class="cstat-no" title="statement not covered" >t</span>his.id=null;<span class="cstat-no" title="statement not covered" >t</span>his.emit("close",reason,desc);<span class="cstat-no" title="statement not covered" >s</span>elf.writeBuffer=[];<span class="cstat-no" title="statement not covered" >s</span>elf.prevBufferLen=0}</span>}</span>;<span class="cstat-no" title="statement not covered" >S</span>ocket.prototype.filterUpgrades=<span class="fstat-no" title="function not covered" >function(upgrades){<span class="cstat-no" title="statement not covered" ></span>var filteredUpgrades=[];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,j=upgrades.length;i&lt;j;i++){<span class="cstat-no" title="statement not covered" >if(~index(this.transports,upgrades[i]))<span class="cstat-no" title="statement not covered" >filteredUpgrades.push(upgrades[i])}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn filteredUpgrades}</span>}</span>).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{"./transport":19,"./transports":20,"component-emitter":26,debug:14,"engine.io-parser":27,indexof:33,parsejson:37,parseqs:38,parseuri:39}],19:[function(_dereq_,module,exports){var parser=_dereq_("engine.io-parser");<span class="cstat-no" title="statement not covered" >var Emitter=_dereq_("component-emitter");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Transport;<span class="fstat-no" title="function not covered" >f</span>unction Transport(opts){<span class="cstat-no" title="statement not covered" ></span>this.path=opts.path;<span class="cstat-no" title="statement not covered" >t</span>his.hostname=opts.hostname;<span class="cstat-no" title="statement not covered" >t</span>his.port=opts.port;<span class="cstat-no" title="statement not covered" >t</span>his.secure=opts.secure;<span class="cstat-no" title="statement not covered" >t</span>his.query=opts.query;<span class="cstat-no" title="statement not covered" >t</span>his.timestampParam=opts.timestampParam;<span class="cstat-no" title="statement not covered" >t</span>his.timestampRequests=opts.timestampRequests;<span class="cstat-no" title="statement not covered" >t</span>his.readyState="";<span class="cstat-no" title="statement not covered" >t</span>his.agent=opts.agent||false;<span class="cstat-no" title="statement not covered" >t</span>his.socket=opts.socket;<span class="cstat-no" title="statement not covered" >t</span>his.enablesXDR=opts.enablesXDR;<span class="cstat-no" title="statement not covered" >t</span>his.pfx=opts.pfx;<span class="cstat-no" title="statement not covered" >t</span>his.key=opts.key;<span class="cstat-no" title="statement not covered" >t</span>his.passphrase=opts.passphrase;<span class="cstat-no" title="statement not covered" >t</span>his.cert=opts.cert;<span class="cstat-no" title="statement not covered" >t</span>his.ca=opts.ca;<span class="cstat-no" title="statement not covered" >t</span>his.ciphers=opts.ciphers;<span class="cstat-no" title="statement not covered" >t</span>his.rejectUnauthorized=opts.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >t</span>his.extraHeaders=opts.extraHeaders}<span class="cstat-no" title="statement not covered" ></span>Emitter(Transport.prototype);<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.onError=<span class="fstat-no" title="function not covered" >function(msg,desc){<span class="cstat-no" title="statement not covered" ></span>var err=new Error(msg);<span class="cstat-no" title="statement not covered" >e</span>rr.type="TransportError";<span class="cstat-no" title="statement not covered" >e</span>rr.description=desc;<span class="cstat-no" title="statement not covered" >t</span>his.emit("error",err);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.open=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("closed"==this.readyState||""==this.readyState){<span class="cstat-no" title="statement not covered" >this.readyState="opening";<span class="cstat-no" title="statement not covered" >t</span>his.doOpen()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.close=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("opening"==this.readyState||"open"==this.readyState){<span class="cstat-no" title="statement not covered" >this.doClose();<span class="cstat-no" title="statement not covered" >t</span>his.onClose()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.send=<span class="fstat-no" title="function not covered" >function(packets){<span class="cstat-no" title="statement not covered" ></span>if("open"==this.readyState){<span class="cstat-no" title="statement not covered" >this.write(packets)}</span>else{<span class="cstat-no" title="statement not covered" >throw new Error("Transport not open")}</span>}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.onOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.readyState="open";<span class="cstat-no" title="statement not covered" >t</span>his.writable=true;<span class="cstat-no" title="statement not covered" >t</span>his.emit("open")}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.onData=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var packet=parser.decodePacket(data,this.socket.binaryType);<span class="cstat-no" title="statement not covered" >t</span>his.onPacket(packet)}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.onPacket=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>this.emit("packet",packet)}</span>;<span class="cstat-no" title="statement not covered" >T</span>ransport.prototype.onClose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.readyState="closed";<span class="cstat-no" title="statement not covered" >t</span>his.emit("close")}</span>}</span>,{"component-emitter":26,"engine.io-parser":27}],20:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var XHR=_dereq_("./polling-xhr");<span class="cstat-no" title="statement not covered" >var JSONP=_dereq_("./polling-jsonp");<span class="cstat-no" title="statement not covered" >v</span>ar websocket=_dereq_("./websocket");<span class="cstat-no" title="statement not covered" >e</span>xports.polling=polling;<span class="cstat-no" title="statement not covered" >e</span>xports.websocket=websocket;<span class="fstat-no" title="function not covered" >f</span>unction polling(opts){<span class="cstat-no" title="statement not covered" ></span>var xhr;<span class="cstat-no" title="statement not covered" >v</span>ar xd=false;<span class="cstat-no" title="statement not covered" >v</span>ar xs=false;<span class="cstat-no" title="statement not covered" >v</span>ar jsonp=false!==opts.jsonp;<span class="cstat-no" title="statement not covered" >i</span>f(global.location){<span class="cstat-no" title="statement not covered" >var isSSL="https:"==location.protocol;<span class="cstat-no" title="statement not covered" >v</span>ar port=location.port;<span class="cstat-no" title="statement not covered" >i</span>f(!port){<span class="cstat-no" title="statement not covered" >port=isSSL?443:80}<span class="cstat-no" title="statement not covered" ></span>x</span>d=opts.hostname!=location.hostname||port!=opts.port;<span class="cstat-no" title="statement not covered" >x</span>s=opts.secure!=isSSL}<span class="cstat-no" title="statement not covered" ></span>o</span>pts.xdomain=xd;<span class="cstat-no" title="statement not covered" >o</span>pts.xscheme=xs;<span class="cstat-no" title="statement not covered" >x</span>hr=new XMLHttpRequest(opts);<span class="cstat-no" title="statement not covered" >i</span>f("open"in xhr&amp;&amp;!opts.forceJSONP){<span class="cstat-no" title="statement not covered" >return new XHR(opts)}</span>else{<span class="cstat-no" title="statement not covered" >if(!jsonp)<span class="cstat-no" title="statement not covered" >throw new Error("JSONP disabled");<span class="cstat-no" title="statement not covered" >r</span></span>eturn new JSONP(opts)}</span>}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,"xmlhttprequest-ssl":25}],21:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){<span class="cstat-no" title="statement not covered" ></span>var Polling=_dereq_("./polling");<span class="cstat-no" title="statement not covered" >v</span>ar inherit=_dereq_("component-inherit");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=JSONPPolling;<span class="cstat-no" title="statement not covered" >v</span>ar rNewline=/\n/g;<span class="cstat-no" title="statement not covered" >v</span>ar rEscapedNewline=/\\n/g;<span class="cstat-no" title="statement not covered" >v</span>ar callbacks;<span class="cstat-no" title="statement not covered" >v</span>ar index=0;<span class="fstat-no" title="function not covered" >f</span>unction empty(){</span>}<span class="fstat-no" title="function not covered" >function JSONPPolling(opts){<span class="cstat-no" title="statement not covered" ></span>Polling.call(this,opts);<span class="cstat-no" title="statement not covered" >t</span>his.query=this.query||{};<span class="cstat-no" title="statement not covered" >i</span>f(!callbacks){<span class="cstat-no" title="statement not covered" >if(!global.___eio)<span class="cstat-no" title="statement not covered" >global.___eio=[];<span class="cstat-no" title="statement not covered" >c</span></span>allbacks=global.___eio}<span class="cstat-no" title="statement not covered" ></span>t</span>his.index=callbacks.length;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >c</span>allbacks.push(<span class="fstat-no" title="function not covered" >function(msg){<span class="cstat-no" title="statement not covered" ></span>self.onData(msg)}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.query.j=this.index;<span class="cstat-no" title="statement not covered" >i</span>f(global.document&amp;&amp;global.addEventListener){<span class="cstat-no" title="statement not covered" >global.addEventListener("beforeunload",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(self.script)<span class="cstat-no" title="statement not covered" >self.script.onerror=empty}</span></span>,false)}</span>}<span class="cstat-no" title="statement not covered" ></span>inherit(JSONPPolling,Polling);<span class="cstat-no" title="statement not covered" >J</span>SONPPolling.prototype.supportsBinary=false;<span class="cstat-no" title="statement not covered" >J</span>SONPPolling.prototype.doClose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.script){<span class="cstat-no" title="statement not covered" >this.script.parentNode.removeChild(this.script);<span class="cstat-no" title="statement not covered" >t</span>his.script=null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.form){<span class="cstat-no" title="statement not covered" >this.form.parentNode.removeChild(this.form);<span class="cstat-no" title="statement not covered" >t</span>his.form=null;<span class="cstat-no" title="statement not covered" >t</span>his.iframe=null}<span class="cstat-no" title="statement not covered" ></span>P</span>olling.prototype.doClose.call(this)}</span>;<span class="cstat-no" title="statement not covered" >J</span>SONPPolling.prototype.doPoll=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >v</span>ar script=document.createElement("script");<span class="cstat-no" title="statement not covered" >i</span>f(this.script){<span class="cstat-no" title="statement not covered" >this.script.parentNode.removeChild(this.script);<span class="cstat-no" title="statement not covered" >t</span>his.script=null}<span class="cstat-no" title="statement not covered" ></span>s</span>cript.async=true;<span class="cstat-no" title="statement not covered" >s</span>cript.src=this.uri();<span class="cstat-no" title="statement not covered" >s</span>cript.onerror=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>self.onError("jsonp poll error",e)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar insertAt=document.getElementsByTagName("script")[0];<span class="cstat-no" title="statement not covered" >i</span>nsertAt.parentNode.insertBefore(script,insertAt);<span class="cstat-no" title="statement not covered" >t</span>his.script=script;<span class="cstat-no" title="statement not covered" >v</span>ar isUAgecko="undefined"!=typeof navigator&amp;&amp;/gecko/i.test(navigator.userAgent);<span class="cstat-no" title="statement not covered" >i</span>f(isUAgecko){<span class="cstat-no" title="statement not covered" >setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var iframe=document.createElement("iframe");<span class="cstat-no" title="statement not covered" >d</span>ocument.body.appendChild(iframe);<span class="cstat-no" title="statement not covered" >d</span>ocument.body.removeChild(iframe)}</span>,100)}</span>}</span>;<span class="cstat-no" title="statement not covered" >J</span>SONPPolling.prototype.doWrite=<span class="fstat-no" title="function not covered" >function(data,fn){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >i</span>f(!this.form){<span class="cstat-no" title="statement not covered" >var form=document.createElement("form");<span class="cstat-no" title="statement not covered" >v</span>ar area=document.createElement("textarea");<span class="cstat-no" title="statement not covered" >v</span>ar id=this.iframeId="eio_iframe_"+this.index;<span class="cstat-no" title="statement not covered" >v</span>ar iframe;<span class="cstat-no" title="statement not covered" >f</span>orm.className="socketio";<span class="cstat-no" title="statement not covered" >f</span>orm.style.position="absolute";<span class="cstat-no" title="statement not covered" >f</span>orm.style.top="-1000px";<span class="cstat-no" title="statement not covered" >f</span>orm.style.left="-1000px";<span class="cstat-no" title="statement not covered" >f</span>orm.target=id;<span class="cstat-no" title="statement not covered" >f</span>orm.method="POST";<span class="cstat-no" title="statement not covered" >f</span>orm.setAttribute("accept-charset","utf-8");<span class="cstat-no" title="statement not covered" >a</span>rea.name="d";<span class="cstat-no" title="statement not covered" >f</span>orm.appendChild(area);<span class="cstat-no" title="statement not covered" >d</span>ocument.body.appendChild(form);<span class="cstat-no" title="statement not covered" >t</span>his.form=form;<span class="cstat-no" title="statement not covered" >t</span>his.area=area}<span class="cstat-no" title="statement not covered" ></span>t</span>his.form.action=this.uri();<span class="fstat-no" title="function not covered" >f</span>unction complete(){<span class="cstat-no" title="statement not covered" ></span>initIframe();<span class="cstat-no" title="statement not covered" >f</span>n()}<span class="fstat-no" title="function not covered" ></span>function initIframe(){<span class="cstat-no" title="statement not covered" ></span>if(self.iframe){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >self.form.removeChild(self.iframe)}</span>catch(e){<span class="cstat-no" title="statement not covered" >self.onError("jsonp polling iframe removal error",e)}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>ry{<span class="cstat-no" title="statement not covered" >var html='&lt;iframe src="javascript:0" name="'+self.iframeId+'"&gt;';<span class="cstat-no" title="statement not covered" >i</span>frame=document.createElement(html)}</span>catch(e){<span class="cstat-no" title="statement not covered" >iframe=document.createElement("iframe");<span class="cstat-no" title="statement not covered" >i</span>frame.name=self.iframeId;<span class="cstat-no" title="statement not covered" >i</span>frame.src="javascript:0"}<span class="cstat-no" title="statement not covered" ></span>i</span>frame.id=self.iframeId;<span class="cstat-no" title="statement not covered" >s</span>elf.form.appendChild(iframe);<span class="cstat-no" title="statement not covered" >s</span>elf.iframe=iframe}<span class="cstat-no" title="statement not covered" ></span>initIframe();<span class="cstat-no" title="statement not covered" >d</span>ata=data.replace(rEscapedNewline,"\\\n");<span class="cstat-no" title="statement not covered" >t</span>his.area.value=data.replace(rNewline,"\\n");<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >this.form.submit()}</span>catch(e){}<span class="cstat-no" title="statement not covered" >i</span>f(this.iframe.attachEvent){<span class="cstat-no" title="statement not covered" >this.iframe.onreadystatechange=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(self.iframe.readyState=="complete"){<span class="cstat-no" title="statement not covered" >complete()}</span>}</span>}</span>else{<span class="cstat-no" title="statement not covered" >this.iframe.onload=complete}</span>}</span>}</span>).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})}</span>,{"./polling":23,"component-inherit":13}],22:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var Polling=_dereq_("./polling");<span class="cstat-no" title="statement not covered" >var Emitter=_dereq_("component-emitter");<span class="cstat-no" title="statement not covered" >v</span>ar inherit=_dereq_("component-inherit");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("engine.io-client:polling-xhr");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=XHR;<span class="cstat-no" title="statement not covered" >m</span>odule.exports.Request=Request;<span class="fstat-no" title="function not covered" >f</span>unction empty(){</span>}<span class="fstat-no" title="function not covered" >function XHR(opts){<span class="cstat-no" title="statement not covered" ></span>Polling.call(this,opts);<span class="cstat-no" title="statement not covered" >i</span>f(global.location){<span class="cstat-no" title="statement not covered" >var isSSL="https:"==location.protocol;<span class="cstat-no" title="statement not covered" >v</span>ar port=location.port;<span class="cstat-no" title="statement not covered" >i</span>f(!port){<span class="cstat-no" title="statement not covered" >port=isSSL?443:80}<span class="cstat-no" title="statement not covered" ></span>t</span>his.xd=opts.hostname!=global.location.hostname||port!=opts.port;<span class="cstat-no" title="statement not covered" >t</span>his.xs=opts.secure!=isSSL}</span>else{<span class="cstat-no" title="statement not covered" >this.extraHeaders=opts.extraHeaders}</span>}<span class="cstat-no" title="statement not covered" ></span>inherit(XHR,Polling);<span class="cstat-no" title="statement not covered" >X</span>HR.prototype.supportsBinary=true;<span class="cstat-no" title="statement not covered" >X</span>HR.prototype.request=<span class="fstat-no" title="function not covered" >function(opts){<span class="cstat-no" title="statement not covered" ></span>opts=opts||{};<span class="cstat-no" title="statement not covered" >o</span>pts.uri=this.uri();<span class="cstat-no" title="statement not covered" >o</span>pts.xd=this.xd;<span class="cstat-no" title="statement not covered" >o</span>pts.xs=this.xs;<span class="cstat-no" title="statement not covered" >o</span>pts.agent=this.agent||false;<span class="cstat-no" title="statement not covered" >o</span>pts.supportsBinary=this.supportsBinary;<span class="cstat-no" title="statement not covered" >o</span>pts.enablesXDR=this.enablesXDR;<span class="cstat-no" title="statement not covered" >o</span>pts.pfx=this.pfx;<span class="cstat-no" title="statement not covered" >o</span>pts.key=this.key;<span class="cstat-no" title="statement not covered" >o</span>pts.passphrase=this.passphrase;<span class="cstat-no" title="statement not covered" >o</span>pts.cert=this.cert;<span class="cstat-no" title="statement not covered" >o</span>pts.ca=this.ca;<span class="cstat-no" title="statement not covered" >o</span>pts.ciphers=this.ciphers;<span class="cstat-no" title="statement not covered" >o</span>pts.rejectUnauthorized=this.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >o</span>pts.extraHeaders=this.extraHeaders;<span class="cstat-no" title="statement not covered" >r</span>eturn new Request(opts)}</span>;<span class="cstat-no" title="statement not covered" >X</span>HR.prototype.doWrite=<span class="fstat-no" title="function not covered" >function(data,fn){<span class="cstat-no" title="statement not covered" ></span>var isBinary=typeof data!=="string"&amp;&amp;data!==undefined;<span class="cstat-no" title="statement not covered" >v</span>ar req=this.request({method:"POST",data:data,isBinary:isBinary});<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >r</span>eq.on("success",fn);<span class="cstat-no" title="statement not covered" >r</span>eq.on("error",<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>self.onError("xhr post error",err)}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.sendXhr=req}</span>;<span class="cstat-no" title="statement not covered" >X</span>HR.prototype.doPoll=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("xhr poll");<span class="cstat-no" title="statement not covered" >v</span>ar req=this.request();<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >r</span>eq.on("data",<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>self.onData(data)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eq.on("error",<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>self.onError("xhr poll error",err)}</span>);<span class="cstat-no" title="statement not covered" >t</span>his.pollXhr=req}</span>;<span class="fstat-no" title="function not covered" >f</span>unction Request(opts){<span class="cstat-no" title="statement not covered" ></span>this.method=opts.method||"GET";<span class="cstat-no" title="statement not covered" >t</span>his.uri=opts.uri;<span class="cstat-no" title="statement not covered" >t</span>his.xd=!!opts.xd;<span class="cstat-no" title="statement not covered" >t</span>his.xs=!!opts.xs;<span class="cstat-no" title="statement not covered" >t</span>his.async=false!==opts.async;<span class="cstat-no" title="statement not covered" >t</span>his.data=undefined!=opts.data?opts.data:null;<span class="cstat-no" title="statement not covered" >t</span>his.agent=opts.agent;<span class="cstat-no" title="statement not covered" >t</span>his.isBinary=opts.isBinary;<span class="cstat-no" title="statement not covered" >t</span>his.supportsBinary=opts.supportsBinary;<span class="cstat-no" title="statement not covered" >t</span>his.enablesXDR=opts.enablesXDR;<span class="cstat-no" title="statement not covered" >t</span>his.pfx=opts.pfx;<span class="cstat-no" title="statement not covered" >t</span>his.key=opts.key;<span class="cstat-no" title="statement not covered" >t</span>his.passphrase=opts.passphrase;<span class="cstat-no" title="statement not covered" >t</span>his.cert=opts.cert;<span class="cstat-no" title="statement not covered" >t</span>his.ca=opts.ca;<span class="cstat-no" title="statement not covered" >t</span>his.ciphers=opts.ciphers;<span class="cstat-no" title="statement not covered" >t</span>his.rejectUnauthorized=opts.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >t</span>his.extraHeaders=opts.extraHeaders;<span class="cstat-no" title="statement not covered" >t</span>his.create()}<span class="cstat-no" title="statement not covered" ></span>Emitter(Request.prototype);<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.create=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};<span class="cstat-no" title="statement not covered" >o</span>pts.pfx=this.pfx;<span class="cstat-no" title="statement not covered" >o</span>pts.key=this.key;<span class="cstat-no" title="statement not covered" >o</span>pts.passphrase=this.passphrase;<span class="cstat-no" title="statement not covered" >o</span>pts.cert=this.cert;<span class="cstat-no" title="statement not covered" >o</span>pts.ca=this.ca;<span class="cstat-no" title="statement not covered" >o</span>pts.ciphers=this.ciphers;<span class="cstat-no" title="statement not covered" >o</span>pts.rejectUnauthorized=this.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >v</span>ar xhr=this.xhr=new XMLHttpRequest(opts);<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >debug("xhr open %s: %s",this.method,this.uri);<span class="cstat-no" title="statement not covered" >x</span>hr.open(this.method,this.uri,this.async);<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >if(this.extraHeaders){<span class="cstat-no" title="statement not covered" >xhr.setDisableHeaderCheck(true);<span class="cstat-no" title="statement not covered" >f</span>or(var i in this.extraHeaders){<span class="cstat-no" title="statement not covered" >if(this.extraHeaders.hasOwnProperty(i)){<span class="cstat-no" title="statement not covered" >xhr.setRequestHeader(i,this.extraHeaders[i])}</span>}</span>}</span>}</span>catch(e){}<span class="cstat-no" title="statement not covered" >i</span>f(this.supportsBinary){<span class="cstat-no" title="statement not covered" >xhr.responseType="arraybuffer"}<span class="cstat-no" title="statement not covered" ></span>i</span>f("POST"==this.method){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(this.isBinary){<span class="cstat-no" title="statement not covered" >xhr.setRequestHeader("Content-type","application/octet-stream")}</span>else{<span class="cstat-no" title="statement not covered" >xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}</span>}</span>catch(e){}}<span class="cstat-no" title="statement not covered" ></span>i</span>f("withCredentials"in xhr){<span class="cstat-no" title="statement not covered" >xhr.withCredentials=true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.hasXDR()){<span class="cstat-no" title="statement not covered" >xhr.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onLoad()}</span>;<span class="cstat-no" title="statement not covered" >x</span>hr.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onError(xhr.responseText)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >xhr.onreadystatechange=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(4!=xhr.readyState)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(200==xhr.status||1223==xhr.status){<span class="cstat-no" title="statement not covered" >self.onLoad()}</span>else{<span class="cstat-no" title="statement not covered" >setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onError(xhr.status)}</span>,0)}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>d</span>ebug("xhr data %s",this.data);<span class="cstat-no" title="statement not covered" >x</span>hr.send(this.data)}</span>catch(e){<span class="cstat-no" title="statement not covered" >setTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onError(e)}</span>,0);<span class="cstat-no" title="statement not covered" >r</span>eturn}<span class="cstat-no" title="statement not covered" ></span>i</span>f(global.document){<span class="cstat-no" title="statement not covered" >this.index=Request.requestsCount++;<span class="cstat-no" title="statement not covered" >R</span>equest.requests[this.index]=this}</span>}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.onSuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.emit("success");<span class="cstat-no" title="statement not covered" >t</span>his.cleanup()}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.onData=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>this.emit("data",data);<span class="cstat-no" title="statement not covered" >t</span>his.onSuccess()}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.onError=<span class="fstat-no" title="function not covered" >function(err){<span class="cstat-no" title="statement not covered" ></span>this.emit("error",err);<span class="cstat-no" title="statement not covered" >t</span>his.cleanup(true)}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.cleanup=<span class="fstat-no" title="function not covered" >function(fromError){<span class="cstat-no" title="statement not covered" ></span>if("undefined"==typeof this.xhr||null===this.xhr){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.hasXDR()){<span class="cstat-no" title="statement not covered" >this.xhr.onload=this.xhr.onerror=empty}</span>else{<span class="cstat-no" title="statement not covered" >this.xhr.onreadystatechange=empty}<span class="cstat-no" title="statement not covered" ></span>i</span>f(fromError){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >this.xhr.abort()}</span>catch(e){}}<span class="cstat-no" title="statement not covered" ></span>i</span>f(global.document){<span class="cstat-no" title="statement not covered" >delete Request.requests[this.index]}<span class="cstat-no" title="statement not covered" ></span>t</span>his.xhr=null}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.onLoad=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var data;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >var contentType;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}</span>catch(e){}<span class="cstat-no" title="statement not covered" >i</span>f(contentType==="application/octet-stream"){<span class="cstat-no" title="statement not covered" >data=this.xhr.response}</span>else{<span class="cstat-no" title="statement not covered" >if(!this.supportsBinary){<span class="cstat-no" title="statement not covered" >data=this.xhr.responseText}</span>else{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}</span>catch(e){<span class="cstat-no" title="statement not covered" >var ui8Arr=new Uint8Array(this.xhr.response);<span class="cstat-no" title="statement not covered" >v</span>ar dataArray=[];<span class="cstat-no" title="statement not covered" >f</span>or(var idx=0,length=ui8Arr.length;idx&lt;length;idx++){<span class="cstat-no" title="statement not covered" >dataArray.push(ui8Arr[idx])}<span class="cstat-no" title="statement not covered" ></span>d</span>ata=String.fromCharCode.apply(null,dataArray)}</span>}</span>}</span>}</span>catch(e){<span class="cstat-no" title="statement not covered" >this.onError(e)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(null!=data){<span class="cstat-no" title="statement not covered" >this.onData(data)}</span>}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.hasXDR=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"undefined"!==typeof global.XDomainRequest&amp;&amp;!this.xs&amp;&amp;this.enablesXDR}</span>;<span class="cstat-no" title="statement not covered" >R</span>equest.prototype.abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.cleanup()}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(global.document){<span class="cstat-no" title="statement not covered" >Request.requestsCount=0;<span class="cstat-no" title="statement not covered" >R</span>equest.requests={};<span class="cstat-no" title="statement not covered" >i</span>f(global.attachEvent){<span class="cstat-no" title="statement not covered" >global.attachEvent("onunload",unloadHandler)}</span>else <span class="cstat-no" title="statement not covered" >if(global.addEventListener){<span class="cstat-no" title="statement not covered" >global.addEventListener("beforeunload",unloadHandler,false)}</span>}<span class="fstat-no" title="function not covered" ></span></span>f</span>unction unloadHandler(){<span class="cstat-no" title="statement not covered" ></span>for(var i in Request.requests){<span class="cstat-no" title="statement not covered" >if(Request.requests.hasOwnProperty(i)){<span class="cstat-no" title="statement not covered" >Request.requests[i].abort()}</span>}</span>}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{"./polling":23,"component-emitter":26,"component-inherit":13,debug:14,"xmlhttprequest-ssl":25}],23:[function(_dereq_,module,exports){var Transport=_dereq_("../transport");<span class="cstat-no" title="statement not covered" >var parseqs=_dereq_("parseqs");<span class="cstat-no" title="statement not covered" >v</span>ar parser=_dereq_("engine.io-parser");<span class="cstat-no" title="statement not covered" >v</span>ar inherit=_dereq_("component-inherit");<span class="cstat-no" title="statement not covered" >v</span>ar yeast=_dereq_("yeast");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("engine.io-client:polling");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=Polling;<span class="cstat-no" title="statement not covered" >v</span>ar hasXHR2=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");<span class="cstat-no" title="statement not covered" >v</span>ar xhr=new XMLHttpRequest({xdomain:false});<span class="cstat-no" title="statement not covered" >r</span>eturn null!=xhr.responseType}</span>();<span class="fstat-no" title="function not covered" >f</span>unction Polling(opts){<span class="cstat-no" title="statement not covered" ></span>var forceBase64=opts&amp;&amp;opts.forceBase64;<span class="cstat-no" title="statement not covered" >i</span>f(!hasXHR2||forceBase64){<span class="cstat-no" title="statement not covered" >this.supportsBinary=false}<span class="cstat-no" title="statement not covered" ></span>T</span>ransport.call(this,opts)}<span class="cstat-no" title="statement not covered" ></span>inherit(Polling,Transport);<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.name="polling";<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.doOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.poll()}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.pause=<span class="fstat-no" title="function not covered" >function(onPause){<span class="cstat-no" title="statement not covered" ></span>var pending=0;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >t</span>his.readyState="pausing";<span class="fstat-no" title="function not covered" >f</span>unction pause(){<span class="cstat-no" title="statement not covered" ></span>debug("paused");<span class="cstat-no" title="statement not covered" >s</span>elf.readyState="paused";<span class="cstat-no" title="statement not covered" >o</span>nPause()}<span class="cstat-no" title="statement not covered" ></span>if(this.polling||!this.writable){<span class="cstat-no" title="statement not covered" >var total=0;<span class="cstat-no" title="statement not covered" >i</span>f(this.polling){<span class="cstat-no" title="statement not covered" >debug("we are currently polling - waiting to pause");<span class="cstat-no" title="statement not covered" >t</span>otal++;<span class="cstat-no" title="statement not covered" >t</span>his.once("pollComplete",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("pre-pause polling complete");<span class="cstat-no" title="statement not covered" >-</span>-total||pause()}</span>)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!this.writable){<span class="cstat-no" title="statement not covered" >debug("we are currently writing - waiting to pause");<span class="cstat-no" title="statement not covered" >t</span>otal++;<span class="cstat-no" title="statement not covered" >t</span>his.once("drain",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("pre-pause writing complete");<span class="cstat-no" title="statement not covered" >-</span>-total||pause()}</span>)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >pause()}</span>}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.poll=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>debug("polling");<span class="cstat-no" title="statement not covered" >t</span>his.polling=true;<span class="cstat-no" title="statement not covered" >t</span>his.doPoll();<span class="cstat-no" title="statement not covered" >t</span>his.emit("poll")}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.onData=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >d</span>ebug("polling got data %s",data);<span class="cstat-no" title="statement not covered" >v</span>ar callback=<span class="fstat-no" title="function not covered" >function(packet,index,total){<span class="cstat-no" title="statement not covered" ></span>if("opening"==self.readyState){<span class="cstat-no" title="statement not covered" >self.onOpen()}<span class="cstat-no" title="statement not covered" ></span>i</span>f("close"==packet.type){<span class="cstat-no" title="statement not covered" >self.onClose();<span class="cstat-no" title="statement not covered" >r</span>eturn false}<span class="cstat-no" title="statement not covered" ></span>s</span>elf.onPacket(packet)}</span>;<span class="cstat-no" title="statement not covered" >p</span>arser.decodePayload(data,this.socket.binaryType,callback);<span class="cstat-no" title="statement not covered" >i</span>f("closed"!=this.readyState){<span class="cstat-no" title="statement not covered" >this.polling=false;<span class="cstat-no" title="statement not covered" >t</span>his.emit("pollComplete");<span class="cstat-no" title="statement not covered" >i</span>f("open"==this.readyState){<span class="cstat-no" title="statement not covered" >this.poll()}</span>else{<span class="cstat-no" title="statement not covered" >debug('ignoring poll - transport state "%s"',this.readyState)}</span>}</span>}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.doClose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="fstat-no" title="function not covered" >f</span>unction close(){<span class="cstat-no" title="statement not covered" ></span>debug("writing close packet");<span class="cstat-no" title="statement not covered" >s</span>elf.write([{type:"close"}])}<span class="cstat-no" title="statement not covered" ></span>if("open"==this.readyState){<span class="cstat-no" title="statement not covered" >debug("transport open - closing");<span class="cstat-no" title="statement not covered" >c</span>lose()}</span>else{<span class="cstat-no" title="statement not covered" >debug("transport not open - deferring close");<span class="cstat-no" title="statement not covered" >t</span>his.once("open",close)}</span>}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.write=<span class="fstat-no" title="function not covered" >function(packets){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >t</span>his.writable=false;<span class="cstat-no" title="statement not covered" >v</span>ar callbackfn=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.writable=true;<span class="cstat-no" title="statement not covered" >s</span>elf.emit("drain")}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar self=this;<span class="cstat-no" title="statement not covered" >p</span>arser.encodePayload(packets,this.supportsBinary,<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>self.doWrite(data,callbackfn)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >P</span>olling.prototype.uri=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var query=this.query||{};<span class="cstat-no" title="statement not covered" >v</span>ar schema=this.secure?"https":"http";<span class="cstat-no" title="statement not covered" >v</span>ar port="";<span class="cstat-no" title="statement not covered" >i</span>f(false!==this.timestampRequests){<span class="cstat-no" title="statement not covered" >query[this.timestampParam]=yeast()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!this.supportsBinary&amp;&amp;!query.sid){<span class="cstat-no" title="statement not covered" >query.b64=1}<span class="cstat-no" title="statement not covered" ></span>q</span>uery=parseqs.encode(query);<span class="cstat-no" title="statement not covered" >i</span>f(this.port&amp;&amp;("https"==schema&amp;&amp;this.port!=443||"http"==schema&amp;&amp;this.port!=80)){<span class="cstat-no" title="statement not covered" >port=":"+this.port}<span class="cstat-no" title="statement not covered" ></span>i</span>f(query.length){<span class="cstat-no" title="statement not covered" >query="?"+query}<span class="cstat-no" title="statement not covered" ></span>v</span>ar ipv6=this.hostname.indexOf(":")!==-1;<span class="cstat-no" title="statement not covered" >r</span>eturn schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}</span>}</span>,{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:38,"xmlhttprequest-ssl":25,yeast:46}],24:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){<span class="cstat-no" title="statement not covered" ></span>var Transport=_dereq_("../transport");<span class="cstat-no" title="statement not covered" >v</span>ar parser=_dereq_("engine.io-parser");<span class="cstat-no" title="statement not covered" >v</span>ar parseqs=_dereq_("parseqs");<span class="cstat-no" title="statement not covered" >v</span>ar inherit=_dereq_("component-inherit");<span class="cstat-no" title="statement not covered" >v</span>ar yeast=_dereq_("yeast");<span class="cstat-no" title="statement not covered" >v</span>ar debug=_dereq_("debug")("engine.io-client:websocket");<span class="cstat-no" title="statement not covered" >v</span>ar BrowserWebSocket=global.WebSocket||global.MozWebSocket;<span class="cstat-no" title="statement not covered" >v</span>ar WebSocket=BrowserWebSocket||(typeof window!=="undefined"?null:_dereq_("ws"));<span class="cstat-no" title="statement not covered" >m</span>odule.exports=WS;<span class="fstat-no" title="function not covered" >f</span>unction WS(opts){<span class="cstat-no" title="statement not covered" ></span>var forceBase64=opts&amp;&amp;opts.forceBase64;<span class="cstat-no" title="statement not covered" >i</span>f(forceBase64){<span class="cstat-no" title="statement not covered" >this.supportsBinary=false}<span class="cstat-no" title="statement not covered" ></span>t</span>his.perMessageDeflate=opts.perMessageDeflate;<span class="cstat-no" title="statement not covered" >T</span>ransport.call(this,opts)}<span class="cstat-no" title="statement not covered" ></span>inherit(WS,Transport);<span class="cstat-no" title="statement not covered" >W</span>S.prototype.name="websocket";<span class="cstat-no" title="statement not covered" >W</span>S.prototype.supportsBinary=true;<span class="cstat-no" title="statement not covered" >W</span>S.prototype.doOpen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!this.check()){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>v</span>ar self=this;<span class="cstat-no" title="statement not covered" >v</span>ar uri=this.uri();<span class="cstat-no" title="statement not covered" >v</span>ar protocols=void 0;<span class="cstat-no" title="statement not covered" >v</span>ar opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};<span class="cstat-no" title="statement not covered" >o</span>pts.pfx=this.pfx;<span class="cstat-no" title="statement not covered" >o</span>pts.key=this.key;<span class="cstat-no" title="statement not covered" >o</span>pts.passphrase=this.passphrase;<span class="cstat-no" title="statement not covered" >o</span>pts.cert=this.cert;<span class="cstat-no" title="statement not covered" >o</span>pts.ca=this.ca;<span class="cstat-no" title="statement not covered" >o</span>pts.ciphers=this.ciphers;<span class="cstat-no" title="statement not covered" >o</span>pts.rejectUnauthorized=this.rejectUnauthorized;<span class="cstat-no" title="statement not covered" >i</span>f(this.extraHeaders){<span class="cstat-no" title="statement not covered" >opts.headers=this.extraHeaders}<span class="cstat-no" title="statement not covered" ></span>t</span>his.ws=BrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts);<span class="cstat-no" title="statement not covered" >i</span>f(this.ws.binaryType===undefined){<span class="cstat-no" title="statement not covered" >this.supportsBinary=false}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.ws.supports&amp;&amp;this.ws.supports.binary){<span class="cstat-no" title="statement not covered" >this.supportsBinary=true;<span class="cstat-no" title="statement not covered" >t</span>his.ws.binaryType="buffer"}</span>else{<span class="cstat-no" title="statement not covered" >this.ws.binaryType="arraybuffer"}<span class="cstat-no" title="statement not covered" ></span>t</span>his.addEventListeners()}</span>;<span class="cstat-no" title="statement not covered" >W</span>S.prototype.addEventListeners=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >t</span>his.ws.onopen=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onOpen()}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.ws.onclose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.onClose()}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.ws.onmessage=<span class="fstat-no" title="function not covered" >function(ev){<span class="cstat-no" title="statement not covered" ></span>self.onData(ev.data)}</span>;<span class="cstat-no" title="statement not covered" >t</span>his.ws.onerror=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>self.onError("websocket error",e)}</span>}</span>;<span class="cstat-no" title="statement not covered" >i</span>f("undefined"!=typeof navigator&amp;&amp;/iPad|iPhone|iPod/i.test(navigator.userAgent)){<span class="cstat-no" title="statement not covered" >WS.prototype.onData=<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >s</span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>Transport.prototype.onData.call(self,data)}</span>,0)}</span>}<span class="cstat-no" title="statement not covered" ></span>W</span>S.prototype.write=<span class="fstat-no" title="function not covered" >function(packets){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >t</span>his.writable=false;<span class="cstat-no" title="statement not covered" >v</span>ar total=packets.length;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=total;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>parser.encodePacket(packet,self.supportsBinary,<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>if(!BrowserWebSocket){<span class="cstat-no" title="statement not covered" >var opts={};<span class="cstat-no" title="statement not covered" >i</span>f(packet.options){<span class="cstat-no" title="statement not covered" >opts.compress=packet.options.compress}<span class="cstat-no" title="statement not covered" ></span>i</span>f(self.perMessageDeflate){<span class="cstat-no" title="statement not covered" >var len="string"==typeof data?global.Buffer.byteLength(data):data.length;<span class="cstat-no" title="statement not covered" >i</span>f(len&lt;self.perMessageDeflate.threshold){<span class="cstat-no" title="statement not covered" >opts.compress=false}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>ry{<span class="cstat-no" title="statement not covered" >if(BrowserWebSocket){<span class="cstat-no" title="statement not covered" >self.ws.send(data)}</span>else{<span class="cstat-no" title="statement not covered" >self.ws.send(data,opts)}</span>}</span>catch(e){<span class="cstat-no" title="statement not covered" >debug("websocket closed before onclose event")}<span class="cstat-no" title="statement not covered" ></span>-</span>-total||done()}</span>)}</span>)(packets[i])}<span class="fstat-no" title="function not covered" ></span>f</span>unction done(){<span class="cstat-no" title="statement not covered" ></span>self.emit("flush");<span class="cstat-no" title="statement not covered" >s</span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>self.writable=true;<span class="cstat-no" title="statement not covered" >s</span>elf.emit("drain")}</span>,0)}</span>};<span class="cstat-no" title="statement not covered" >W</span>S.prototype.onClose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>Transport.prototype.onClose.call(this)}</span>;<span class="cstat-no" title="statement not covered" >W</span>S.prototype.doClose=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(typeof this.ws!=="undefined"){<span class="cstat-no" title="statement not covered" >this.ws.close()}</span>}</span>;<span class="cstat-no" title="statement not covered" >W</span>S.prototype.uri=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var query=this.query||{};<span class="cstat-no" title="statement not covered" >v</span>ar schema=this.secure?"wss":"ws";<span class="cstat-no" title="statement not covered" >v</span>ar port="";<span class="cstat-no" title="statement not covered" >i</span>f(this.port&amp;&amp;("wss"==schema&amp;&amp;this.port!=443||"ws"==schema&amp;&amp;this.port!=80)){<span class="cstat-no" title="statement not covered" >port=":"+this.port}<span class="cstat-no" title="statement not covered" ></span>i</span>f(this.timestampRequests){<span class="cstat-no" title="statement not covered" >query[this.timestampParam]=yeast()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!this.supportsBinary){<span class="cstat-no" title="statement not covered" >query.b64=1}<span class="cstat-no" title="statement not covered" ></span>q</span>uery=parseqs.encode(query);<span class="cstat-no" title="statement not covered" >i</span>f(query.length){<span class="cstat-no" title="statement not covered" >query="?"+query}<span class="cstat-no" title="statement not covered" ></span>v</span>ar ipv6=this.hostname.indexOf(":")!==-1;<span class="cstat-no" title="statement not covered" >r</span>eturn schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}</span>;<span class="cstat-no" title="statement not covered" >W</span>S.prototype.check=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!!WebSocket&amp;&amp;!("__initialize"in WebSocket&amp;&amp;this.name===WS.prototype.name)}</span>}</span>).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})}</span>,{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:38,ws:undefined,yeast:46}],25:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=<span class="fstat-no" title="function not covered" >function(opts){<span class="cstat-no" title="statement not covered" ></span>var xdomain=opts.xdomain;<span class="cstat-no" title="statement not covered" >v</span>ar xscheme=opts.xscheme;<span class="cstat-no" title="statement not covered" >v</span>ar enablesXDR=opts.enablesXDR;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >if("undefined"!=typeof XMLHttpRequest&amp;&amp;(!xdomain||hasCORS)){<span class="cstat-no" title="statement not covered" >return new XMLHttpRequest}</span>}</span>catch(e){}<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >if("undefined"!=typeof XDomainRequest&amp;&amp;!xscheme&amp;&amp;enablesXDR){<span class="cstat-no" title="statement not covered" >return new XDomainRequest}</span>}</span>catch(e){}<span class="cstat-no" title="statement not covered" >i</span>f(!xdomain){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >return new ActiveXObject("Microsoft.XMLHTTP")}</span>catch(e){}}</span>}</span>},{"has-cors":32}],26:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){<span class="missing-if-branch" title="else path not taken" >E</span>if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >(</span>this._callbacks[event]=this._callbacks[event]||[]).push(fn);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;Emitter.prototype.once=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="cstat-no" title="statement not covered" ></span>var self=this;<span class="cstat-no" title="statement not covered" >t</span>his._callbacks=this._callbacks||{};<span class="fstat-no" title="function not covered" >f</span>unction on(){<span class="cstat-no" title="statement not covered" ></span>self.off(event,on);<span class="cstat-no" title="statement not covered" >f</span>n.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>on.fn=fn;<span class="cstat-no" title="statement not covered" >t</span>his.on(event,on);<span class="cstat-no" title="statement not covered" >r</span>eturn this}</span>;Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=<span class="fstat-no" title="function not covered" >function(event,fn){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >i</span>f(0==arguments.length){<span class="cstat-no" title="statement not covered" >this._callbacks={};<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar callbacks=this._callbacks[event];<span class="cstat-no" title="statement not covered" >i</span>f(!callbacks)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(1==arguments.length){<span class="cstat-no" title="statement not covered" >delete this._callbacks[event];<span class="cstat-no" title="statement not covered" >r</span>eturn this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar cb;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;callbacks.length;i++){<span class="cstat-no" title="statement not covered" >cb=callbacks[i];<span class="cstat-no" title="statement not covered" >i</span>f(cb===fn||cb.fn===fn){<span class="cstat-no" title="statement not covered" >callbacks.splice(i,1);<span class="cstat-no" title="statement not covered" >b</span>reak}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;Emitter.prototype.emit=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >v</span>ar args=[].slice.call(arguments,1),callbacks=this._callbacks[event];<span class="cstat-no" title="statement not covered" >i</span>f(callbacks){<span class="cstat-no" title="statement not covered" >callbacks=callbacks.slice(0);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,len=callbacks.length;i&lt;len;++i){<span class="cstat-no" title="statement not covered" >callbacks[i].apply(this,args)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>;Emitter.prototype.listeners=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>this._callbacks=this._callbacks||{};<span class="cstat-no" title="statement not covered" >r</span>eturn this._callbacks[event]||[]}</span>;Emitter.prototype.hasListeners=<span class="fstat-no" title="function not covered" >function(event){<span class="cstat-no" title="statement not covered" ></span>return!!this.listeners(event).length}</span>},{}],27:[function(_dereq_,module,exports){(function(global){var keys=_dereq_("./keys");var hasBinary=_dereq_("has-binary");var sliceBuffer=_dereq_("arraybuffer.slice");var base64encoder=_dereq_("base64-arraybuffer");var after=_dereq_("after");var utf8=_dereq_("utf8");var isAndroid=navigator.userAgent.match(/Android/i);<span class="cstat-no" title="statement not covered" >var isPhantomJS=/PhantomJS/i.test(navigator.userAgent);<span class="cstat-no" title="statement not covered" >v</span>ar dontSendBlobs=isAndroid||isPhantomJS;<span class="cstat-no" title="statement not covered" >e</span>xports.protocol=3;<span class="cstat-no" title="statement not covered" >v</span>ar packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};<span class="cstat-no" title="statement not covered" >v</span>ar packetslist=keys(packets);<span class="cstat-no" title="statement not covered" >v</span>ar err={type:"error",data:"parser error"};<span class="cstat-no" title="statement not covered" >v</span>ar Blob=_dereq_("blob");<span class="cstat-no" title="statement not covered" >e</span>xports.encodePacket=<span class="fstat-no" title="function not covered" >function(packet,supportsBinary,utf8encode,callback){<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof supportsBinary){<span class="cstat-no" title="statement not covered" >callback=supportsBinary;<span class="cstat-no" title="statement not covered" >s</span>upportsBinary=false}<span class="cstat-no" title="statement not covered" ></span>i</span>f("function"==typeof utf8encode){<span class="cstat-no" title="statement not covered" >callback=utf8encode;<span class="cstat-no" title="statement not covered" >u</span>tf8encode=null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar data=packet.data===undefined?undefined:packet.data.buffer||packet.data;<span class="cstat-no" title="statement not covered" >i</span>f(global.ArrayBuffer&amp;&amp;data instanceof ArrayBuffer){<span class="cstat-no" title="statement not covered" >return encodeArrayBuffer(packet,supportsBinary,callback)}</span>else <span class="cstat-no" title="statement not covered" >if(Blob&amp;&amp;data instanceof global.Blob){<span class="cstat-no" title="statement not covered" >return encodeBlob(packet,supportsBinary,callback)}<span class="cstat-no" title="statement not covered" ></span>i</span></span>f(data&amp;&amp;data.base64){<span class="cstat-no" title="statement not covered" >return encodeBase64Object(packet,callback)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar encoded=packets[packet.type];<span class="cstat-no" title="statement not covered" >i</span>f(undefined!==packet.data){<span class="cstat-no" title="statement not covered" >encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn callback(""+encoded)}</span>;<span class="fstat-no" title="function not covered" >f</span>unction encodeBase64Object(packet,callback){<span class="cstat-no" title="statement not covered" ></span>var message="b"+exports.packets[packet.type]+packet.data.data;<span class="cstat-no" title="statement not covered" >r</span>eturn callback(message)}<span class="fstat-no" title="function not covered" ></span>function encodeArrayBuffer(packet,supportsBinary,callback){<span class="cstat-no" title="statement not covered" ></span>if(!supportsBinary){<span class="cstat-no" title="statement not covered" >return exports.encodeBase64Packet(packet,callback)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar data=packet.data;<span class="cstat-no" title="statement not covered" >v</span>ar contentArray=new Uint8Array(data);<span class="cstat-no" title="statement not covered" >v</span>ar resultBuffer=new Uint8Array(1+data.byteLength);<span class="cstat-no" title="statement not covered" >r</span>esultBuffer[0]=packets[packet.type];<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;contentArray.length;i++){<span class="cstat-no" title="statement not covered" >resultBuffer[i+1]=contentArray[i]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn callback(resultBuffer.buffer)}<span class="fstat-no" title="function not covered" ></span>function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){<span class="cstat-no" title="statement not covered" ></span>if(!supportsBinary){<span class="cstat-no" title="statement not covered" >return exports.encodeBase64Packet(packet,callback)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar fr=new FileReader;<span class="cstat-no" title="statement not covered" >f</span>r.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>packet.data=fr.result;<span class="cstat-no" title="statement not covered" >e</span>xports.encodePacket(packet,supportsBinary,true,callback)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn fr.readAsArrayBuffer(packet.data)}<span class="fstat-no" title="function not covered" ></span>function encodeBlob(packet,supportsBinary,callback){<span class="cstat-no" title="statement not covered" ></span>if(!supportsBinary){<span class="cstat-no" title="statement not covered" >return exports.encodeBase64Packet(packet,callback)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(dontSendBlobs){<span class="cstat-no" title="statement not covered" >return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar length=new Uint8Array(1);<span class="cstat-no" title="statement not covered" >l</span>ength[0]=packets[packet.type];<span class="cstat-no" title="statement not covered" >v</span>ar blob=new Blob([length.buffer,packet.data]);<span class="cstat-no" title="statement not covered" >r</span>eturn callback(blob)}<span class="cstat-no" title="statement not covered" ></span>exports.encodeBase64Packet=<span class="fstat-no" title="function not covered" >function(packet,callback){<span class="cstat-no" title="statement not covered" ></span>var message="b"+exports.packets[packet.type];<span class="cstat-no" title="statement not covered" >i</span>f(Blob&amp;&amp;packet.data instanceof global.Blob){<span class="cstat-no" title="statement not covered" >var fr=new FileReader;<span class="cstat-no" title="statement not covered" >f</span>r.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b64=fr.result.split(",")[1];<span class="cstat-no" title="statement not covered" >c</span>allback(message+b64)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn fr.readAsDataURL(packet.data)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar b64data;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}</span>catch(e){<span class="cstat-no" title="statement not covered" >var typed=new Uint8Array(packet.data);<span class="cstat-no" title="statement not covered" >v</span>ar basic=new Array(typed.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;typed.length;i++){<span class="cstat-no" title="statement not covered" >basic[i]=typed[i]}<span class="cstat-no" title="statement not covered" ></span>b</span>64data=String.fromCharCode.apply(null,basic)}<span class="cstat-no" title="statement not covered" ></span>m</span>essage+=global.btoa(b64data);<span class="cstat-no" title="statement not covered" >r</span>eturn callback(message)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.decodePacket=<span class="fstat-no" title="function not covered" >function(data,binaryType,utf8decode){<span class="cstat-no" title="statement not covered" ></span>if(typeof data=="string"||data===undefined){<span class="cstat-no" title="statement not covered" >if(data.charAt(0)=="b"){<span class="cstat-no" title="statement not covered" >return exports.decodeBase64Packet(data.substr(1),binaryType)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(utf8decode){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >data=utf8.decode(data)}</span>catch(e){<span class="cstat-no" title="statement not covered" >return err}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar type=data.charAt(0);<span class="cstat-no" title="statement not covered" >i</span>f(Number(type)!=type||!packetslist[type]){<span class="cstat-no" title="statement not covered" >return err}<span class="cstat-no" title="statement not covered" ></span>i</span>f(data.length&gt;1){<span class="cstat-no" title="statement not covered" >return{type:packetslist[type],data:data.substring(1)}}</span>else{<span class="cstat-no" title="statement not covered" >return{type:packetslist[type]}}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>ar asArray=new Uint8Array(data);<span class="cstat-no" title="statement not covered" >v</span>ar type=asArray[0];<span class="cstat-no" title="statement not covered" >v</span>ar rest=sliceBuffer(data,1);<span class="cstat-no" title="statement not covered" >i</span>f(Blob&amp;&amp;binaryType==="blob"){<span class="cstat-no" title="statement not covered" >rest=new Blob([rest])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:packetslist[type],data:rest}}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.decodeBase64Packet=<span class="fstat-no" title="function not covered" >function(msg,binaryType){<span class="cstat-no" title="statement not covered" ></span>var type=packetslist[msg.charAt(0)];<span class="cstat-no" title="statement not covered" >i</span>f(!global.ArrayBuffer){<span class="cstat-no" title="statement not covered" >return{type:type,data:{base64:true,data:msg.substr(1)}}}<span class="cstat-no" title="statement not covered" ></span>v</span>ar data=base64encoder.decode(msg.substr(1));<span class="cstat-no" title="statement not covered" >i</span>f(binaryType==="blob"&amp;&amp;Blob){<span class="cstat-no" title="statement not covered" >data=new Blob([data])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{type:type,data:data}}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.encodePayload=<span class="fstat-no" title="function not covered" >function(packets,supportsBinary,callback){<span class="cstat-no" title="statement not covered" ></span>if(typeof supportsBinary=="function"){<span class="cstat-no" title="statement not covered" >callback=supportsBinary;<span class="cstat-no" title="statement not covered" >s</span>upportsBinary=null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar isBinary=hasBinary(packets);<span class="cstat-no" title="statement not covered" >i</span>f(supportsBinary&amp;&amp;isBinary){<span class="cstat-no" title="statement not covered" >if(Blob&amp;&amp;!dontSendBlobs){<span class="cstat-no" title="statement not covered" >return exports.encodePayloadAsBlob(packets,callback)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn exports.encodePayloadAsArrayBuffer(packets,callback)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!packets.length){<span class="cstat-no" title="statement not covered" >return callback("0:")}<span class="fstat-no" title="function not covered" ></span>f</span>unction setLengthHeader(message){<span class="cstat-no" title="statement not covered" ></span>return message.length+":"+message}<span class="fstat-no" title="function not covered" ></span>function encodeOne(packet,doneCallback){<span class="cstat-no" title="statement not covered" ></span>exports.encodePacket(packet,!isBinary?false:supportsBinary,true,<span class="fstat-no" title="function not covered" >function(message){<span class="cstat-no" title="statement not covered" ></span>doneCallback(null,setLengthHeader(message))}</span>)}<span class="cstat-no" title="statement not covered" ></span>map(packets,encodeOne,<span class="fstat-no" title="function not covered" >function(err,results){<span class="cstat-no" title="statement not covered" ></span>return callback(results.join(""))}</span>)}</span>;<span class="fstat-no" title="function not covered" >f</span>unction map(ary,each,done){<span class="cstat-no" title="statement not covered" ></span>var result=new Array(ary.length);<span class="cstat-no" title="statement not covered" >v</span>ar next=after(ary.length,done);<span class="cstat-no" title="statement not covered" >v</span>ar eachWithIndex=<span class="fstat-no" title="function not covered" >function(i,el,cb){<span class="cstat-no" title="statement not covered" ></span>each(el,<span class="fstat-no" title="function not covered" >function(error,msg){<span class="cstat-no" title="statement not covered" ></span>result[i]=msg;<span class="cstat-no" title="statement not covered" >c</span>b(error,result)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;ary.length;i++){<span class="cstat-no" title="statement not covered" >eachWithIndex(i,ary[i],next)}</span>}<span class="cstat-no" title="statement not covered" ></span>exports.decodePayload=<span class="fstat-no" title="function not covered" >function(data,binaryType,callback){<span class="cstat-no" title="statement not covered" ></span>if(typeof data!="string"){<span class="cstat-no" title="statement not covered" >return exports.decodePayloadAsBinary(data,binaryType,callback)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof binaryType==="function"){<span class="cstat-no" title="statement not covered" >callback=binaryType;<span class="cstat-no" title="statement not covered" >b</span>inaryType=null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar packet;<span class="cstat-no" title="statement not covered" >i</span>f(data==""){<span class="cstat-no" title="statement not covered" >return callback(err,0,1)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar length="",n,msg;<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=data.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var chr=data.charAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(":"!=chr){<span class="cstat-no" title="statement not covered" >length+=chr}</span>else{<span class="cstat-no" title="statement not covered" >if(""==length||length!=(n=Number(length))){<span class="cstat-no" title="statement not covered" >return callback(err,0,1)}<span class="cstat-no" title="statement not covered" ></span>m</span>sg=data.substr(i+1,n);<span class="cstat-no" title="statement not covered" >i</span>f(length!=msg.length){<span class="cstat-no" title="statement not covered" >return callback(err,0,1)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(msg.length){<span class="cstat-no" title="statement not covered" >packet=exports.decodePacket(msg,binaryType,true);<span class="cstat-no" title="statement not covered" >i</span>f(err.type==packet.type&amp;&amp;err.data==packet.data){<span class="cstat-no" title="statement not covered" >return callback(err,0,1)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar ret=callback(packet,i+n,l);<span class="cstat-no" title="statement not covered" >i</span>f(false===ret)<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span></span>i</span>+=n;<span class="cstat-no" title="statement not covered" >l</span>ength=""}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(length!=""){<span class="cstat-no" title="statement not covered" >return callback(err,0,1)}</span>}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.encodePayloadAsArrayBuffer=<span class="fstat-no" title="function not covered" >function(packets,callback){<span class="cstat-no" title="statement not covered" ></span>if(!packets.length){<span class="cstat-no" title="statement not covered" >return callback(new ArrayBuffer(0))}<span class="fstat-no" title="function not covered" ></span>f</span>unction encodeOne(packet,doneCallback){<span class="cstat-no" title="statement not covered" ></span>exports.encodePacket(packet,true,true,<span class="fstat-no" title="function not covered" >function(data){<span class="cstat-no" title="statement not covered" ></span>return doneCallback(null,data)}</span>)}<span class="cstat-no" title="statement not covered" ></span>map(packets,encodeOne,<span class="fstat-no" title="function not covered" >function(err,encodedPackets){<span class="cstat-no" title="statement not covered" ></span>var totalLength=encodedPackets.reduce(<span class="fstat-no" title="function not covered" >function(acc,p){<span class="cstat-no" title="statement not covered" ></span>var len;<span class="cstat-no" title="statement not covered" >i</span>f(typeof p==="string"){<span class="cstat-no" title="statement not covered" >len=p.length}</span>else{<span class="cstat-no" title="statement not covered" >len=p.byteLength}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn acc+len.toString().length+len+2}</span>,0);<span class="cstat-no" title="statement not covered" >v</span>ar resultArray=new Uint8Array(totalLength);<span class="cstat-no" title="statement not covered" >v</span>ar bufferIndex=0;<span class="cstat-no" title="statement not covered" >e</span>ncodedPackets.forEach(<span class="fstat-no" title="function not covered" >function(p){<span class="cstat-no" title="statement not covered" ></span>var isString=typeof p==="string";<span class="cstat-no" title="statement not covered" >v</span>ar ab=p;<span class="cstat-no" title="statement not covered" >i</span>f(isString){<span class="cstat-no" title="statement not covered" >var view=new Uint8Array(p.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;p.length;i++){<span class="cstat-no" title="statement not covered" >view[i]=p.charCodeAt(i)}<span class="cstat-no" title="statement not covered" ></span>a</span>b=view.buffer}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isString){<span class="cstat-no" title="statement not covered" >resultArray[bufferIndex++]=0}</span>else{<span class="cstat-no" title="statement not covered" >resultArray[bufferIndex++]=1}<span class="cstat-no" title="statement not covered" ></span>v</span>ar lenStr=ab.byteLength.toString();<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;lenStr.length;i++){<span class="cstat-no" title="statement not covered" >resultArray[bufferIndex++]=parseInt(lenStr[i])}<span class="cstat-no" title="statement not covered" ></span>r</span>esultArray[bufferIndex++]=255;<span class="cstat-no" title="statement not covered" >v</span>ar view=new Uint8Array(ab);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;view.length;i++){<span class="cstat-no" title="statement not covered" >resultArray[bufferIndex++]=view[i]}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn callback(resultArray.buffer)}</span>)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.encodePayloadAsBlob=<span class="fstat-no" title="function not covered" >function(packets,callback){<span class="fstat-no" title="function not covered" ></span>function encodeOne(packet,doneCallback){<span class="cstat-no" title="statement not covered" ></span>exports.encodePacket(packet,true,true,<span class="fstat-no" title="function not covered" >function(encoded){<span class="cstat-no" title="statement not covered" ></span>var binaryIdentifier=new Uint8Array(1);<span class="cstat-no" title="statement not covered" >b</span>inaryIdentifier[0]=1;<span class="cstat-no" title="statement not covered" >i</span>f(typeof encoded==="string"){<span class="cstat-no" title="statement not covered" >var view=new Uint8Array(encoded.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;encoded.length;i++){<span class="cstat-no" title="statement not covered" >view[i]=encoded.charCodeAt(i)}<span class="cstat-no" title="statement not covered" ></span>e</span>ncoded=view.buffer;<span class="cstat-no" title="statement not covered" >b</span>inaryIdentifier[0]=0}<span class="cstat-no" title="statement not covered" ></span>v</span>ar len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;<span class="cstat-no" title="statement not covered" >v</span>ar lenStr=len.toString();<span class="cstat-no" title="statement not covered" >v</span>ar lengthAry=new Uint8Array(lenStr.length+1);</span></span></span>
<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;lenStr.length;i++){<span class="cstat-no" title="statement not covered" >lengthAry[i]=parseInt(lenStr[i])}<span class="cstat-no" title="statement not covered" ></span>l</span>engthAry[lenStr.length]=255;<span class="cstat-no" title="statement not covered" >i</span>f(Blob){<span class="cstat-no" title="statement not covered" >var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);<span class="cstat-no" title="statement not covered" >d</span>oneCallback(null,blob)}</span>}</span>)}<span class="cstat-no" title="statement not covered" >map(packets,encodeOne,<span class="fstat-no" title="function not covered" >function(err,results){<span class="cstat-no" title="statement not covered" ></span>return callback(new Blob(results))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >exports.decodePayloadAsBinary=<span class="fstat-no" title="function not covered" >function(data,binaryType,callback){<span class="cstat-no" title="statement not covered" ></span>if(typeof binaryType==="function"){<span class="cstat-no" title="statement not covered" >callback=binaryType;<span class="cstat-no" title="statement not covered" >b</span>inaryType=null}<span class="cstat-no" title="statement not covered" ></span>v</span>ar bufferTail=data;<span class="cstat-no" title="statement not covered" >v</span>ar buffers=[];<span class="cstat-no" title="statement not covered" >v</span>ar numberTooLong=false;<span class="cstat-no" title="statement not covered" >w</span>hile(bufferTail.byteLength&gt;0){<span class="cstat-no" title="statement not covered" >var tailArray=new Uint8Array(bufferTail);<span class="cstat-no" title="statement not covered" >v</span>ar isString=tailArray[0]===0;<span class="cstat-no" title="statement not covered" >v</span>ar msgLength="";<span class="cstat-no" title="statement not covered" >f</span>or(var i=1;;i++){<span class="cstat-no" title="statement not covered" >if(tailArray[i]==255)<span class="cstat-no" title="statement not covered" >break;<span class="cstat-no" title="statement not covered" >i</span></span>f(msgLength.length&gt;310){<span class="cstat-no" title="statement not covered" >numberTooLong=true;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>m</span>sgLength+=tailArray[i]}<span class="cstat-no" title="statement not covered" ></span>i</span>f(numberTooLong)<span class="cstat-no" title="statement not covered" >return callback(err,0,1);<span class="cstat-no" title="statement not covered" >b</span></span>ufferTail=sliceBuffer(bufferTail,2+msgLength.length);<span class="cstat-no" title="statement not covered" >m</span>sgLength=parseInt(msgLength);<span class="cstat-no" title="statement not covered" >v</span>ar msg=sliceBuffer(bufferTail,0,msgLength);<span class="cstat-no" title="statement not covered" >i</span>f(isString){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >msg=String.fromCharCode.apply(null,new Uint8Array(msg))}</span>catch(e){<span class="cstat-no" title="statement not covered" >var typed=new Uint8Array(msg);<span class="cstat-no" title="statement not covered" >m</span>sg="";<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;typed.length;i++){<span class="cstat-no" title="statement not covered" >msg+=String.fromCharCode(typed[i])}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>b</span>uffers.push(msg);<span class="cstat-no" title="statement not covered" >b</span>ufferTail=sliceBuffer(bufferTail,msgLength)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar total=buffers.length;<span class="cstat-no" title="statement not covered" >b</span>uffers.forEach(<span class="fstat-no" title="function not covered" >function(buffer,i){<span class="cstat-no" title="statement not covered" ></span>callback(exports.decodePacket(buffer,binaryType,true),i,total)}</span>)}</span>}</span>).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{"./keys":28,after:6,"arraybuffer.slice":7,"base64-arraybuffer":9,blob:10,"has-binary":29,utf8:45}],28:[function(_dereq_,module,exports){module.exports=Object.keys||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function keys(obj){<span class="cstat-no" title="statement not covered" ></span>var arr=[];<span class="cstat-no" title="statement not covered" >v</span>ar has=Object.prototype.hasOwnProperty;<span class="cstat-no" title="statement not covered" >f</span>or(var i in obj){<span class="cstat-no" title="statement not covered" >if(has.call(obj,i)){<span class="cstat-no" title="statement not covered" >arr.push(i)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn arr}</span>}</span>,{}],29:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;<span class="fstat-no" title="function not covered" >function hasBinary(data){<span class="fstat-no" title="function not covered" ></span>function _hasBinary(obj){<span class="cstat-no" title="statement not covered" ></span>if(!obj)<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span></span>f(global.Buffer&amp;&amp;global.Buffer.isBuffer(obj)||global.ArrayBuffer&amp;&amp;obj instanceof ArrayBuffer||global.Blob&amp;&amp;obj instanceof Blob||global.File&amp;&amp;obj instanceof File){<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isArray(obj)){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;obj.length;i++){<span class="cstat-no" title="statement not covered" >if(_hasBinary(obj[i])){<span class="cstat-no" title="statement not covered" >return true}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(obj&amp;&amp;"object"==typeof obj){<span class="cstat-no" title="statement not covered" >if(obj.toJSON){<span class="cstat-no" title="statement not covered" >obj=obj.toJSON()}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var key in obj){<span class="cstat-no" title="statement not covered" >if(Object.prototype.hasOwnProperty.call(obj,key)&amp;&amp;_hasBinary(obj[key])){<span class="cstat-no" title="statement not covered" >return true}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn false}<span class="cstat-no" title="statement not covered" ></span>return _hasBinary(data)}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{isarray:34}],30:[function(_dereq_,module,exports){module.exports=function(){return this}()},{}],31:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){<span class="cstat-no" title="statement not covered" ></span>var isArray=_dereq_("isarray");<span class="cstat-no" title="statement not covered" >m</span>odule.exports=hasBinary;<span class="fstat-no" title="function not covered" >f</span>unction hasBinary(data){<span class="fstat-no" title="function not covered" ></span>function _hasBinary(obj){<span class="cstat-no" title="statement not covered" ></span>if(!obj)<span class="cstat-no" title="statement not covered" >return false;<span class="cstat-no" title="statement not covered" >i</span></span>f(global.Buffer&amp;&amp;global.Buffer.isBuffer&amp;&amp;global.Buffer.isBuffer(obj)||global.ArrayBuffer&amp;&amp;obj instanceof ArrayBuffer||global.Blob&amp;&amp;obj instanceof Blob||global.File&amp;&amp;obj instanceof File){<span class="cstat-no" title="statement not covered" >return true}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isArray(obj)){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;obj.length;i++){<span class="cstat-no" title="statement not covered" >if(_hasBinary(obj[i])){<span class="cstat-no" title="statement not covered" >return true}</span>}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(obj&amp;&amp;"object"==typeof obj){<span class="cstat-no" title="statement not covered" >if(obj.toJSON&amp;&amp;"function"==typeof obj.toJSON){<span class="cstat-no" title="statement not covered" >obj=obj.toJSON()}<span class="cstat-no" title="statement not covered" ></span>f</span>or(var key in obj){<span class="cstat-no" title="statement not covered" >if(Object.prototype.hasOwnProperty.call(obj,key)&amp;&amp;_hasBinary(obj[key])){<span class="cstat-no" title="statement not covered" >return true}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn false}<span class="cstat-no" title="statement not covered" ></span>return _hasBinary(data)}</span>}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})}</span>,{isarray:34}],32:[function(_dereq_,module,exports){var global=_dereq_("global");try{module.exports="XMLHttpRequest"in global&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >"withCredentials"in new global.XMLHttpRequest}</span>catch(err){<span class="cstat-no" title="statement not covered" >module.exports=false}</span>},{global:30}],33:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>var indexOf=[].indexOf;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function(arr,obj){<span class="cstat-no" title="statement not covered" ></span>if(indexOf)<span class="cstat-no" title="statement not covered" >return arr.indexOf(obj);<span class="cstat-no" title="statement not covered" >f</span></span>or(var i=0;i&lt;arr.length;++i){<span class="cstat-no" title="statement not covered" >if(arr[i]===obj)<span class="cstat-no" title="statement not covered" >return i}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn-1}</span>}</span>,{}],34:[function(_dereq_,module,exports){module.exports=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(arr){<span class="cstat-no" title="statement not covered" ></span>return Object.prototype.toString.call(arr)=="[object Array]"}</span>}</span>,{}],35:[function(_dereq_,module,exports){(function(global){(function(){var isLoader=typeof define==="function"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd;</span>var objectTypes={"function":true,object:true};var freeExports=objectTypes[typeof exports]&amp;&amp;exports&amp;&amp;!exports.nodeType&amp;&amp;exports;var root=objectTypes[typeof window]&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >window|</span>|this,freeGlobal=freeExports&amp;&amp;objectTypes[typeof module]&amp;&amp;module&amp;&amp;!module.nodeType&amp;&amp;typeof global=="object"&amp;&amp;global;<span class="missing-if-branch" title="else path not taken" >E</span>if(freeGlobal&amp;&amp;(freeGlobal["global"]===freeGlobal||<span class="branch-2 cbranch-no" title="branch not covered" >freeGlobal["window"]===freeGlobal|</span>|<span class="branch-3 cbranch-no" title="branch not covered" >freeGlobal["self"]===freeGlobal)</span>){root=freeGlobal}function runInContext(context,exports){context||(<span class="branch-1 cbranch-no" title="branch not covered" >context=root["Object"]())</span>;exports||(<span class="branch-1 cbranch-no" title="branch not covered" >exports=root["Object"]())</span>;var Number=context["Number"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["Number"],</span>String=context["String"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["String"],</span>Object=context["Object"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["Object"],</span>Date=context["Date"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["Date"],</span>SyntaxError=context["SyntaxError"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["SyntaxError"],</span>TypeError=context["TypeError"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["TypeError"],</span>Math=context["Math"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["Math"],</span>nativeJSON=context["JSON"]||<span class="branch-1 cbranch-no" title="branch not covered" >root["JSON"];<span class="missing-if-branch" title="else path not taken" >E</span></span>if(typeof nativeJSON=="object"&amp;&amp;nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&amp;&amp;isExtended.getUTCMonth()===0&amp;&amp;isExtended.getUTCDate()===1&amp;&amp;isExtended.getUTCHours()==10&amp;&amp;isExtended.getUTCMinutes()==37&amp;&amp;isExtended.getUTCSeconds()==6&amp;&amp;isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){<span class="missing-if-branch" title="if path not taken" >I</span>if(has[name]!==undef){<span class="cstat-no" title="statement not covered" >return has[name]}</span>var isSupported;<span class="missing-if-branch" title="if path not taken" >I</span>if(name=="bug-string-char-index"){<span class="cstat-no" title="statement not covered" >isSupported="a"[0]!="a"}</span>else if(name=="json"){isSupported=has("json-stringify")&amp;&amp;has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&amp;&amp;isExtended;<span class="missing-if-branch" title="else path not taken" >E</span>if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&amp;&amp;stringify(new Number)==="0"&amp;&amp;stringify(new String)=='""'&amp;&amp;stringify(getClass)===undef&amp;&amp;stringify(undef)===undef&amp;&amp;stringify()===undef&amp;&amp;stringify(value)==="1"&amp;&amp;stringify([value])=="[1]"&amp;&amp;stringify([undef])=="[null]"&amp;&amp;stringify(null)=="null"&amp;&amp;stringify([undef,getClass,null])=="[null,null,null]"&amp;&amp;stringify({a:[value,true,false,null,"\x00\b\n\f\r	"]})==serialized&amp;&amp;stringify(null,value)==="1"&amp;&amp;stringify([1,2],null,1)=="[\n 1,\n 2\n]"&amp;&amp;stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&amp;&amp;stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&amp;&amp;stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&amp;&amp;stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){<span class="cstat-no" title="statement not covered" >stringifySupported=false}</span>}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;<span class="missing-if-branch" title="else path not taken" >E</span>if(typeof parse=="function"){try{<span class="missing-if-branch" title="else path not taken" >E</span>if(parse("0")===0&amp;&amp;!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&amp;&amp;value["a"][0]===1;<span class="missing-if-branch" title="else path not taken" >E</span>if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}<span class="missing-if-branch" title="else path not taken" >E</span>if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}<span class="missing-if-branch" title="else path not taken" >E</span>if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){<span class="cstat-no" title="statement not covered" >parseSupported=false}</span>}isSupported=parseSupported}}return has[name]=!!isSupported}<span class="missing-if-branch" title="if path not taken" >I</span>if(!has("json")){<span class="cstat-no" title="statement not covered" >var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";<span class="cstat-no" title="statement not covered" >v</span>ar charIndexBuggy=has("bug-string-char-index");<span class="cstat-no" title="statement not covered" >i</span>f(!isExtended){<span class="cstat-no" title="statement not covered" >var floor=Math.floor;<span class="cstat-no" title="statement not covered" >v</span>ar Months=[0,31,59,90,120,151,181,212,243,273,304,334];<span class="cstat-no" title="statement not covered" >v</span>ar getDay=<span class="fstat-no" title="function not covered" >function(year,month){<span class="cstat-no" title="statement not covered" ></span>return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month&gt;1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!(isProperty=objectProto.hasOwnProperty)){<span class="cstat-no" title="statement not covered" >isProperty=<span class="fstat-no" title="function not covered" >function(property){<span class="cstat-no" title="statement not covered" ></span>var members={},constructor;<span class="cstat-no" title="statement not covered" >i</span>f((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){<span class="cstat-no" title="statement not covered" >isProperty=<span class="fstat-no" title="function not covered" >function(property){<span class="cstat-no" title="statement not covered" ></span>var original=this.__proto__,result=property in(this.__proto__=null,this);<span class="cstat-no" title="statement not covered" >t</span>his.__proto__=original;<span class="cstat-no" title="statement not covered" >r</span>eturn result}</span>}</span>else{<span class="cstat-no" title="statement not covered" >constructor=members.constructor;<span class="cstat-no" title="statement not covered" >i</span>sProperty=<span class="fstat-no" title="function not covered" >function(property){<span class="cstat-no" title="statement not covered" ></span>var parent=(this.constructor||constructor).prototype;<span class="cstat-no" title="statement not covered" >r</span>eturn property in this&amp;&amp;!(property in parent&amp;&amp;this[property]===parent[property])}</span>}<span class="cstat-no" title="statement not covered" ></span>m</span>embers=null;<span class="cstat-no" title="statement not covered" >r</span>eturn isProperty.call(this,property)}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>orEach=<span class="fstat-no" title="function not covered" >function(object,callback){<span class="cstat-no" title="statement not covered" ></span>var size=0,Properties,members,property;<span class="cstat-no" title="statement not covered" >(</span>Properties=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.valueOf=0}</span>).prototype.valueOf=0;<span class="cstat-no" title="statement not covered" >m</span>embers=new Properties;<span class="cstat-no" title="statement not covered" >f</span>or(property in members){<span class="cstat-no" title="statement not covered" >if(isProperty.call(members,property)){<span class="cstat-no" title="statement not covered" >size++}</span>}<span class="cstat-no" title="statement not covered" ></span>P</span>roperties=members=null;<span class="cstat-no" title="statement not covered" >i</span>f(!size){<span class="cstat-no" title="statement not covered" >members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];<span class="cstat-no" title="statement not covered" >f</span>orEach=<span class="fstat-no" title="function not covered" >function(object,callback){<span class="cstat-no" title="statement not covered" ></span>var isFunction=getClass.call(object)==functionClass,property,length;<span class="cstat-no" title="statement not covered" >v</span>ar hasProperty=!isFunction&amp;&amp;typeof object.constructor!="function"&amp;&amp;objectTypes[typeof object.hasOwnProperty]&amp;&amp;object.hasOwnProperty||isProperty;<span class="cstat-no" title="statement not covered" >f</span>or(property in object){<span class="cstat-no" title="statement not covered" >if(!(isFunction&amp;&amp;property=="prototype")&amp;&amp;hasProperty.call(object,property)){<span class="cstat-no" title="statement not covered" >callback(property)}</span>}<span class="cstat-no" title="statement not covered" ></span>f</span>or(length=members.length;property=members[--length];hasProperty.call(object,property)&amp;&amp;callback(property));}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(size==2){<span class="cstat-no" title="statement not covered" >forEach=<span class="fstat-no" title="function not covered" >function(object,callback){<span class="cstat-no" title="statement not covered" ></span>var members={},isFunction=getClass.call(object)==functionClass,property;<span class="cstat-no" title="statement not covered" >f</span>or(property in object){<span class="cstat-no" title="statement not covered" >if(!(isFunction&amp;&amp;property=="prototype")&amp;&amp;!isProperty.call(members,property)&amp;&amp;(members[property]=1)&amp;&amp;isProperty.call(object,property)){<span class="cstat-no" title="statement not covered" >callback(property)}</span>}</span>}</span>}</span>else{<span class="cstat-no" title="statement not covered" >forEach=<span class="fstat-no" title="function not covered" >function(object,callback){<span class="cstat-no" title="statement not covered" ></span>var isFunction=getClass.call(object)==functionClass,property,isConstructor;<span class="cstat-no" title="statement not covered" >f</span>or(property in object){<span class="cstat-no" title="statement not covered" >if(!(isFunction&amp;&amp;property=="prototype")&amp;&amp;isProperty.call(object,property)&amp;&amp;!(isConstructor=property==="constructor")){<span class="cstat-no" title="statement not covered" >callback(property)}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isConstructor||isProperty.call(object,property="constructor")){<span class="cstat-no" title="statement not covered" >callback(property)}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn forEach(object,callback)}</span>;<span class="cstat-no" title="statement not covered" >i</span>f(!has("json-stringify")){<span class="cstat-no" title="statement not covered" >var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};<span class="cstat-no" title="statement not covered" >v</span>ar leadingZeroes="000000";<span class="cstat-no" title="statement not covered" >v</span>ar toPaddedString=<span class="fstat-no" title="function not covered" >function(width,value){<span class="cstat-no" title="statement not covered" ></span>return(leadingZeroes+(value||0)).slice(-width)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar unicodePrefix="\\u00";<span class="cstat-no" title="statement not covered" >v</span>ar quote=<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length&gt;10;<span class="cstat-no" title="statement not covered" >v</span>ar symbols=useCharIndex&amp;&amp;(charIndexBuggy?value.split(""):value);<span class="cstat-no" title="statement not covered" >f</span>or(;index&lt;length;index++){<span class="cstat-no" title="statement not covered" >var charCode=value.charCodeAt(index);<span class="cstat-no" title="statement not covered" >s</span>witch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:<span class="cstat-no" title="statement not covered" >result+=Escapes[charCode];<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >if(charCode&lt;32){<span class="cstat-no" title="statement not covered" >result+=unicodePrefix+toPaddedString(2,charCode.toString(16));<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>r</span>esult+=useCharIndex?symbols[index]:value.charAt(index)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn result+'"'}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar serialize=<span class="fstat-no" title="function not covered" >function(property,object,callback,properties,whitespace,indentation,stack){<span class="cstat-no" title="statement not covered" ></span>var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >value=object[property]}</span>catch(exception){}<span class="cstat-no" title="statement not covered" >i</span>f(typeof value=="object"&amp;&amp;value){<span class="cstat-no" title="statement not covered" >className=getClass.call(value);<span class="cstat-no" title="statement not covered" >i</span>f(className==dateClass&amp;&amp;!isProperty.call(value,"toJSON")){<span class="cstat-no" title="statement not covered" >if(value&gt;-1/0&amp;&amp;value&lt;1/0){<span class="cstat-no" title="statement not covered" >if(getDay){<span class="cstat-no" title="statement not covered" >date=floor(value/864e5);<span class="cstat-no" title="statement not covered" >f</span>or(year=floor(date/365.2425)+1970-1;getDay(year+1,0)&lt;=date;year++);<span class="cstat-no" title="statement not covered" >f</span>or(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)&lt;=date;month++);<span class="cstat-no" title="statement not covered" >d</span>ate=1+date-getDay(year,month);<span class="cstat-no" title="statement not covered" >t</span>ime=(value%864e5+864e5)%864e5;<span class="cstat-no" title="statement not covered" >h</span>ours=floor(time/36e5)%24;<span class="cstat-no" title="statement not covered" >m</span>inutes=floor(time/6e4)%60;<span class="cstat-no" title="statement not covered" >s</span>econds=floor(time/1e3)%60;<span class="cstat-no" title="statement not covered" >m</span>illiseconds=time%1e3}</span>else{<span class="cstat-no" title="statement not covered" >year=value.getUTCFullYear();<span class="cstat-no" title="statement not covered" >m</span>onth=value.getUTCMonth();<span class="cstat-no" title="statement not covered" >d</span>ate=value.getUTCDate();<span class="cstat-no" title="statement not covered" >h</span>ours=value.getUTCHours();<span class="cstat-no" title="statement not covered" >m</span>inutes=value.getUTCMinutes();<span class="cstat-no" title="statement not covered" >s</span>econds=value.getUTCSeconds();<span class="cstat-no" title="statement not covered" >m</span>illiseconds=value.getUTCMilliseconds()}<span class="cstat-no" title="statement not covered" ></span>v</span>alue=(year&lt;=0||year&gt;=1e4?(year&lt;0?"-":"+")+toPaddedString(6,year&lt;0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}</span>else{<span class="cstat-no" title="statement not covered" >value=null}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(typeof value.toJSON=="function"&amp;&amp;(className!=numberClass&amp;&amp;className!=stringClass&amp;&amp;className!=arrayClass||isProperty.call(value,"toJSON"))){<span class="cstat-no" title="statement not covered" >value=value.toJSON(property)}</span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(callback){<span class="cstat-no" title="statement not covered" >value=callback.call(object,property,value)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(value===null){<span class="cstat-no" title="statement not covered" >return"null"}<span class="cstat-no" title="statement not covered" ></span>c</span>lassName=getClass.call(value);<span class="cstat-no" title="statement not covered" >i</span>f(className==booleanClass){<span class="cstat-no" title="statement not covered" >return""+value}</span>else <span class="cstat-no" title="statement not covered" >if(className==numberClass){<span class="cstat-no" title="statement not covered" >return value&gt;-1/0&amp;&amp;value&lt;1/0?""+value:"null"}</span>else <span class="cstat-no" title="statement not covered" >if(className==stringClass){<span class="cstat-no" title="statement not covered" >return quote(""+value)}<span class="cstat-no" title="statement not covered" ></span>i</span></span></span>f(typeof value=="object"){<span class="cstat-no" title="statement not covered" >for(length=stack.length;length--;){<span class="cstat-no" title="statement not covered" >if(stack[length]===value){<span class="cstat-no" title="statement not covered" >throw TypeError()}</span>}<span class="cstat-no" title="statement not covered" ></span>s</span>tack.push(value);<span class="cstat-no" title="statement not covered" >r</span>esults=[];<span class="cstat-no" title="statement not covered" >p</span>refix=indentation;<span class="cstat-no" title="statement not covered" >i</span>ndentation+=whitespace;<span class="cstat-no" title="statement not covered" >i</span>f(className==arrayClass){<span class="cstat-no" title="statement not covered" >for(index=0,length=value.length;index&lt;length;index++){<span class="cstat-no" title="statement not covered" >element=serialize(index,value,callback,properties,whitespace,indentation,stack);<span class="cstat-no" title="statement not covered" >r</span>esults.push(element===undef?"null":element)}<span class="cstat-no" title="statement not covered" ></span>r</span>esult=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}</span>else{<span class="cstat-no" title="statement not covered" >forEach(properties||value,<span class="fstat-no" title="function not covered" >function(property){<span class="cstat-no" title="statement not covered" ></span>var element=serialize(property,value,callback,properties,whitespace,indentation,stack);<span class="cstat-no" title="statement not covered" >i</span>f(element!==undef){<span class="cstat-no" title="statement not covered" >results.push(quote(property)+":"+(whitespace?" ":"")+element)}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>esult=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}<span class="cstat-no" title="statement not covered" ></span>s</span>tack.pop();<span class="cstat-no" title="statement not covered" >r</span>eturn result}</span>}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.stringify=<span class="fstat-no" title="function not covered" >function(source,filter,width){<span class="cstat-no" title="statement not covered" ></span>var whitespace,callback,properties,className;<span class="cstat-no" title="statement not covered" >i</span>f(objectTypes[typeof filter]&amp;&amp;filter){<span class="cstat-no" title="statement not covered" >if((className=getClass.call(filter))==functionClass){<span class="cstat-no" title="statement not covered" >callback=filter}</span>else <span class="cstat-no" title="statement not covered" >if(className==arrayClass){<span class="cstat-no" title="statement not covered" >properties={};<span class="cstat-no" title="statement not covered" >f</span>or(var index=0,length=filter.length,value;index&lt;length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&amp;&amp;(properties[value]=1));}</span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(width){<span class="cstat-no" title="statement not covered" >if((className=getClass.call(width))==numberClass){<span class="cstat-no" title="statement not covered" >if((width-=width%1)&gt;0){<span class="cstat-no" title="statement not covered" >for(whitespace="",width&gt;10&amp;&amp;(width=10);whitespace.length&lt;width;whitespace+=" ");}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(className==stringClass){<span class="cstat-no" title="statement not covered" >whitespace=width.length&lt;=10?width:width.slice(0,10)}</span>}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!has("json-parse")){<span class="cstat-no" title="statement not covered" >var fromCharCode=String.fromCharCode;<span class="cstat-no" title="statement not covered" >v</span>ar Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"};<span class="cstat-no" title="statement not covered" >v</span>ar Index,Source;<span class="cstat-no" title="statement not covered" >v</span>ar abort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>Index=Source=null;<span class="cstat-no" title="statement not covered" >t</span>hrow SyntaxError()}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar lex=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var source=Source,length=source.length,value,begin,position,isSigned,charCode;<span class="cstat-no" title="statement not covered" >w</span>hile(Index&lt;length){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(Index);<span class="cstat-no" title="statement not covered" >s</span>witch(charCode){case 9:case 10:case 13:case 32:<span class="cstat-no" title="statement not covered" >Index++;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 123:case 125:case 91:case 93:case 58:case 44:<span class="cstat-no" title="statement not covered" >value=charIndexBuggy?source.charAt(Index):source[Index];<span class="cstat-no" title="statement not covered" >I</span>ndex++;<span class="cstat-no" title="statement not covered" >r</span>eturn value;c</span>ase 34:<span class="cstat-no" title="statement not covered" >for(value="@",Index++;Index&lt;length;){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(Index);<span class="cstat-no" title="statement not covered" >i</span>f(charCode&lt;32){<span class="cstat-no" title="statement not covered" >abort()}</span>else <span class="cstat-no" title="statement not covered" >if(charCode==92){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(++Index);<span class="cstat-no" title="statement not covered" >s</span>witch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:<span class="cstat-no" title="statement not covered" >value+=Unescapes[charCode];<span class="cstat-no" title="statement not covered" >I</span>ndex++;<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 117:<span class="cstat-no" title="statement not covered" >begin=++Index;<span class="cstat-no" title="statement not covered" >f</span>or(position=Index+4;Index&lt;position;Index++){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(Index);<span class="cstat-no" title="statement not covered" >i</span>f(!(charCode&gt;=48&amp;&amp;charCode&lt;=57||charCode&gt;=97&amp;&amp;charCode&lt;=102||charCode&gt;=65&amp;&amp;charCode&lt;=70)){<span class="cstat-no" title="statement not covered" >abort()}</span>}<span class="cstat-no" title="statement not covered" ></span>v</span>alue+=fromCharCode("0x"+source.slice(begin,Index));<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >abort()}</span>}</span>else{<span class="cstat-no" title="statement not covered" >if(charCode==34){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>c</span>harCode=source.charCodeAt(Index);<span class="cstat-no" title="statement not covered" >b</span>egin=Index;<span class="cstat-no" title="statement not covered" >w</span>hile(charCode&gt;=32&amp;&amp;charCode!=92&amp;&amp;charCode!=34){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(++Index)}<span class="cstat-no" title="statement not covered" ></span>v</span>alue+=source.slice(begin,Index)}</span>}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(source.charCodeAt(Index)==34){<span class="cstat-no" title="statement not covered" >Index++;<span class="cstat-no" title="statement not covered" >r</span>eturn value}<span class="cstat-no" title="statement not covered" ></span>a</span>bort();d</span>efault:<span class="cstat-no" title="statement not covered" >begin=Index;<span class="cstat-no" title="statement not covered" >i</span>f(charCode==45){<span class="cstat-no" title="statement not covered" >isSigned=true;<span class="cstat-no" title="statement not covered" >c</span>harCode=source.charCodeAt(++Index)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(charCode&gt;=48&amp;&amp;charCode&lt;=57){<span class="cstat-no" title="statement not covered" >if(charCode==48&amp;&amp;(charCode=source.charCodeAt(Index+1),charCode&gt;=48&amp;&amp;charCode&lt;=57)){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>i</span>sSigned=false;<span class="cstat-no" title="statement not covered" >f</span>or(;Index&lt;length&amp;&amp;(charCode=source.charCodeAt(Index),charCode&gt;=48&amp;&amp;charCode&lt;=57);Index++);<span class="cstat-no" title="statement not covered" >i</span>f(source.charCodeAt(Index)==46){<span class="cstat-no" title="statement not covered" >position=++Index;<span class="cstat-no" title="statement not covered" >f</span>or(;position&lt;length&amp;&amp;(charCode=source.charCodeAt(position),charCode&gt;=48&amp;&amp;charCode&lt;=57);position++);<span class="cstat-no" title="statement not covered" >i</span>f(position==Index){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>I</span>ndex=position}<span class="cstat-no" title="statement not covered" ></span>c</span>harCode=source.charCodeAt(Index);<span class="cstat-no" title="statement not covered" >i</span>f(charCode==101||charCode==69){<span class="cstat-no" title="statement not covered" >charCode=source.charCodeAt(++Index);<span class="cstat-no" title="statement not covered" >i</span>f(charCode==43||charCode==45){<span class="cstat-no" title="statement not covered" >Index++}<span class="cstat-no" title="statement not covered" ></span>f</span>or(position=Index;position&lt;length&amp;&amp;(charCode=source.charCodeAt(position),charCode&gt;=48&amp;&amp;charCode&lt;=57);position++);<span class="cstat-no" title="statement not covered" >i</span>f(position==Index){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>I</span>ndex=position}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn+source.slice(begin,Index)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(isSigned){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(source.slice(Index,Index+4)=="true"){<span class="cstat-no" title="statement not covered" >Index+=4;<span class="cstat-no" title="statement not covered" >r</span>eturn true}</span>else <span class="cstat-no" title="statement not covered" >if(source.slice(Index,Index+5)=="false"){<span class="cstat-no" title="statement not covered" >Index+=5;<span class="cstat-no" title="statement not covered" >r</span>eturn false}</span>else <span class="cstat-no" title="statement not covered" >if(source.slice(Index,Index+4)=="null"){<span class="cstat-no" title="statement not covered" >Index+=4;<span class="cstat-no" title="statement not covered" >r</span>eturn null}<span class="cstat-no" title="statement not covered" ></span>a</span></span></span>bort()}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn"$"}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar get=<span class="fstat-no" title="function not covered" >function(value){<span class="cstat-no" title="statement not covered" ></span>var results,hasMembers;<span class="cstat-no" title="statement not covered" >i</span>f(value=="$"){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>i</span>f(typeof value=="string"){<span class="cstat-no" title="statement not covered" >if((charIndexBuggy?value.charAt(0):value[0])=="@"){<span class="cstat-no" title="statement not covered" >return value.slice(1)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(value=="["){<span class="cstat-no" title="statement not covered" >results=[];<span class="cstat-no" title="statement not covered" >f</span>or(;;hasMembers||(hasMembers=true)){<span class="cstat-no" title="statement not covered" >value=lex();<span class="cstat-no" title="statement not covered" >i</span>f(value=="]"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>i</span>f(hasMembers){<span class="cstat-no" title="statement not covered" >if(value==","){<span class="cstat-no" title="statement not covered" >value=lex();<span class="cstat-no" title="statement not covered" >i</span>f(value=="]"){<span class="cstat-no" title="statement not covered" >abort()}</span>}</span>else{<span class="cstat-no" title="statement not covered" >abort()}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(value==","){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>r</span>esults.push(get(value))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn results}</span>else <span class="cstat-no" title="statement not covered" >if(value=="{"){<span class="cstat-no" title="statement not covered" >results={};<span class="cstat-no" title="statement not covered" >f</span>or(;;hasMembers||(hasMembers=true)){<span class="cstat-no" title="statement not covered" >value=lex();<span class="cstat-no" title="statement not covered" >i</span>f(value=="}"){<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span>i</span>f(hasMembers){<span class="cstat-no" title="statement not covered" >if(value==","){<span class="cstat-no" title="statement not covered" >value=lex();<span class="cstat-no" title="statement not covered" >i</span>f(value=="}"){<span class="cstat-no" title="statement not covered" >abort()}</span>}</span>else{<span class="cstat-no" title="statement not covered" >abort()}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>r</span>esults[value.slice(1)]=get(lex())}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn results}<span class="cstat-no" title="statement not covered" ></span>a</span></span>bort()}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn value}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar update=<span class="fstat-no" title="function not covered" >function(source,property,callback){<span class="cstat-no" title="statement not covered" ></span>var element=walk(source,property,callback);<span class="cstat-no" title="statement not covered" >i</span>f(element===undef){<span class="cstat-no" title="statement not covered" >delete source[property]}</span>else{<span class="cstat-no" title="statement not covered" >source[property]=element}</span>}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar walk=<span class="fstat-no" title="function not covered" >function(source,property,callback){<span class="cstat-no" title="statement not covered" ></span>var value=source[property],length;<span class="cstat-no" title="statement not covered" >i</span>f(typeof value=="object"&amp;&amp;value){<span class="cstat-no" title="statement not covered" >if(getClass.call(value)==arrayClass){<span class="cstat-no" title="statement not covered" >for(length=value.length;length--;){<span class="cstat-no" title="statement not covered" >update(value,length,callback)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >forEach(value,<span class="fstat-no" title="function not covered" >function(property){<span class="cstat-no" title="statement not covered" ></span>update(value,property,callback)}</span>)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn callback.call(source,property,value)}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.parse=<span class="fstat-no" title="function not covered" >function(source,callback){<span class="cstat-no" title="statement not covered" ></span>var result,value;<span class="cstat-no" title="statement not covered" >I</span>ndex=0;<span class="cstat-no" title="statement not covered" >S</span>ource=""+source;<span class="cstat-no" title="statement not covered" >r</span>esult=get(lex());<span class="cstat-no" title="statement not covered" >i</span>f(lex()!="$"){<span class="cstat-no" title="statement not covered" >abort()}<span class="cstat-no" title="statement not covered" ></span>I</span>ndex=Source=null;<span class="cstat-no" title="statement not covered" >r</span>eturn callback&amp;&amp;getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}</span>}</span>}</span>exports["runInContext"]=runInContext;return exports}<span class="missing-if-branch" title="else path not taken" >E</span>if(freeExports&amp;&amp;!isLoader){runInContext(root,freeExports)}else{<span class="cstat-no" title="statement not covered" >var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;<span class="cstat-no" title="statement not covered" >v</span>ar JSON3=runInContext(root,root["JSON3"]={noConflict:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!isRestored){<span class="cstat-no" title="statement not covered" >isRestored=true;<span class="cstat-no" title="statement not covered" >r</span>oot.JSON=nativeJSON;<span class="cstat-no" title="statement not covered" >r</span>oot["JSON3"]=previousJSON;<span class="cstat-no" title="statement not covered" >n</span>ativeJSON=previousJSON=null}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn JSON3}</span>});<span class="cstat-no" title="statement not covered" >r</span>oot.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}<span class="missing-if-branch" title="if path not taken" >I</span></span>if(isLoader){<span class="cstat-no" title="statement not covered" >define(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return JSON3}</span>)}</span>}).call(this)}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{}],36:[function(_dereq_,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=<span class="fstat-no" title="function not covered" >function(val,options){<span class="cstat-no" title="statement not covered" ></span>options=options||{};<span class="cstat-no" title="statement not covered" >i</span>f("string"==typeof val)<span class="cstat-no" title="statement not covered" >return parse(val);<span class="cstat-no" title="statement not covered" >r</span></span>eturn options.long?long(val):short(val)}</span>;<span class="fstat-no" title="function not covered" >function parse(str){<span class="cstat-no" title="statement not covered" ></span>str=""+str;<span class="cstat-no" title="statement not covered" >i</span>f(str.length&gt;1e4)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);<span class="cstat-no" title="statement not covered" >i</span>f(!match)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >v</span></span>ar n=parseFloat(match[1]);<span class="cstat-no" title="statement not covered" >v</span>ar type=(match[2]||"ms").toLowerCase();<span class="cstat-no" title="statement not covered" >s</span>witch(type){case"years":case"year":case"yrs":case"yr":case"y":<span class="cstat-no" title="statement not covered" >return n*y;c</span>ase"days":case"day":case"d":<span class="cstat-no" title="statement not covered" >return n*d;c</span>ase"hours":case"hour":case"hrs":case"hr":case"h":<span class="cstat-no" title="statement not covered" >return n*h;c</span>ase"minutes":case"minute":case"mins":case"min":case"m":<span class="cstat-no" title="statement not covered" >return n*m;c</span>ase"seconds":case"second":case"secs":case"sec":case"s":<span class="cstat-no" title="statement not covered" >return n*s;c</span>ase"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":<span class="cstat-no" title="statement not covered" >return n}</span>}<span class="fstat-no" title="function not covered" ></span>function short(ms){<span class="cstat-no" title="statement not covered" ></span>if(ms&gt;=d)<span class="cstat-no" title="statement not covered" >return Math.round(ms/d)+"d";<span class="cstat-no" title="statement not covered" >i</span></span>f(ms&gt;=h)<span class="cstat-no" title="statement not covered" >return Math.round(ms/h)+"h";<span class="cstat-no" title="statement not covered" >i</span></span>f(ms&gt;=m)<span class="cstat-no" title="statement not covered" >return Math.round(ms/m)+"m";<span class="cstat-no" title="statement not covered" >i</span></span>f(ms&gt;=s)<span class="cstat-no" title="statement not covered" >return Math.round(ms/s)+"s";<span class="cstat-no" title="statement not covered" >r</span></span>eturn ms+"ms"}<span class="fstat-no" title="function not covered" ></span>function long(ms){<span class="cstat-no" title="statement not covered" ></span>return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}<span class="fstat-no" title="function not covered" ></span>function plural(ms,n,name){<span class="cstat-no" title="statement not covered" ></span>if(ms&lt;n)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >i</span></span>f(ms&lt;n*1.5)<span class="cstat-no" title="statement not covered" >return Math.floor(ms/n)+" "+name;<span class="cstat-no" title="statement not covered" >r</span></span>eturn Math.ceil(ms/n)+" "+name+"s"}</span>},{}],37:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(global){<span class="cstat-no" title="statement not covered" ></span>var rvalidchars=/^[\],:{}\s]*$/;<span class="cstat-no" title="statement not covered" >v</span>ar rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;<span class="cstat-no" title="statement not covered" >v</span>ar rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;<span class="cstat-no" title="statement not covered" >v</span>ar rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;<span class="cstat-no" title="statement not covered" >v</span>ar rtrimLeft=/^\s+/;<span class="cstat-no" title="statement not covered" >v</span>ar rtrimRight=/\s+$/;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=<span class="fstat-no" title="function not covered" >function parsejson(data){<span class="cstat-no" title="statement not covered" ></span>if("string"!=typeof data||!data){<span class="cstat-no" title="statement not covered" >return null}<span class="cstat-no" title="statement not covered" ></span>d</span>ata=data.replace(rtrimLeft,"").replace(rtrimRight,"");<span class="cstat-no" title="statement not covered" >i</span>f(global.JSON&amp;&amp;JSON.parse){<span class="cstat-no" title="statement not covered" >return JSON.parse(data)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){<span class="cstat-no" title="statement not covered" >return new Function("return "+data)()}</span>}</span>}</span>).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})}</span>,{}],38:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>exports.encode=<span class="fstat-no" title="function not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>var str="";<span class="cstat-no" title="statement not covered" >f</span>or(var i in obj){<span class="cstat-no" title="statement not covered" >if(obj.hasOwnProperty(i)){<span class="cstat-no" title="statement not covered" >if(str.length)<span class="cstat-no" title="statement not covered" >str+="&amp;";<span class="cstat-no" title="statement not covered" >s</span></span>tr+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn str}</span>;<span class="cstat-no" title="statement not covered" >e</span>xports.decode=<span class="fstat-no" title="function not covered" >function(qs){<span class="cstat-no" title="statement not covered" ></span>var qry={};<span class="cstat-no" title="statement not covered" >v</span>ar pairs=qs.split("&amp;");<span class="cstat-no" title="statement not covered" >f</span>or(var i=0,l=pairs.length;i&lt;l;i++){<span class="cstat-no" title="statement not covered" >var pair=pairs[i].split("=");<span class="cstat-no" title="statement not covered" >q</span>ry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn qry}</span>}</span>,{}],39:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=<span class="fstat-no" title="function not covered" >function parseuri(str){<span class="cstat-no" title="statement not covered" ></span>var src=str,b=str.indexOf("["),e=str.indexOf("]");<span class="cstat-no" title="statement not covered" >i</span>f(b!=-1&amp;&amp;e!=-1){<span class="cstat-no" title="statement not covered" >str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar m=re.exec(str||""),uri={},i=14;<span class="cstat-no" title="statement not covered" >w</span>hile(i--){<span class="cstat-no" title="statement not covered" >uri[parts[i]]=m[i]||""}<span class="cstat-no" title="statement not covered" ></span>i</span>f(b!=-1&amp;&amp;e!=-1){<span class="cstat-no" title="statement not covered" >uri.source=src;<span class="cstat-no" title="statement not covered" >u</span>ri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");<span class="cstat-no" title="statement not covered" >u</span>ri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");<span class="cstat-no" title="statement not covered" >u</span>ri.ipv6uri=true}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn uri}</span>},{}],40:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");var isBuf=_dereq_("./is-buffer");exports.deconstructPacket=<span class="fstat-no" title="function not covered" >function(packet){<span class="cstat-no" title="statement not covered" ></span>var buffers=[];<span class="cstat-no" title="statement not covered" >v</span>ar packetData=packet.data;<span class="fstat-no" title="function not covered" >f</span>unction _deconstructPacket(data){<span class="cstat-no" title="statement not covered" ></span>if(!data)<span class="cstat-no" title="statement not covered" >return data;<span class="cstat-no" title="statement not covered" >i</span></span>f(isBuf(data)){<span class="cstat-no" title="statement not covered" >var placeholder={_placeholder:true,num:buffers.length};<span class="cstat-no" title="statement not covered" >b</span>uffers.push(data);<span class="cstat-no" title="statement not covered" >r</span>eturn placeholder}</span>else <span class="cstat-no" title="statement not covered" >if(isArray(data)){<span class="cstat-no" title="statement not covered" >var newData=new Array(data.length);<span class="cstat-no" title="statement not covered" >f</span>or(var i=0;i&lt;data.length;i++){<span class="cstat-no" title="statement not covered" >newData[i]=_deconstructPacket(data[i])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn newData}</span>else <span class="cstat-no" title="statement not covered" >if("object"==typeof data&amp;&amp;!(data instanceof Date)){<span class="cstat-no" title="statement not covered" >var newData={};<span class="cstat-no" title="statement not covered" >f</span>or(var key in data){<span class="cstat-no" title="statement not covered" >newData[key]=_deconstructPacket(data[key])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn newData}<span class="cstat-no" title="statement not covered" ></span>r</span></span></span>eturn data}<span class="cstat-no" title="statement not covered" ></span>var pack=packet;<span class="cstat-no" title="statement not covered" >p</span>ack.data=_deconstructPacket(packetData);<span class="cstat-no" title="statement not covered" >p</span>ack.attachments=buffers.length;<span class="cstat-no" title="statement not covered" >r</span>eturn{packet:pack,buffers:buffers}}</span>;exports.reconstructPacket=<span class="fstat-no" title="function not covered" >function(packet,buffers){<span class="cstat-no" title="statement not covered" ></span>var curPlaceHolder=0;<span class="fstat-no" title="function not covered" >f</span>unction _reconstructPacket(data){<span class="cstat-no" title="statement not covered" ></span>if(data&amp;&amp;data._placeholder){<span class="cstat-no" title="statement not covered" >var buf=buffers[data.num];<span class="cstat-no" title="statement not covered" >r</span>eturn buf}</span>else <span class="cstat-no" title="statement not covered" >if(isArray(data)){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;data.length;i++){<span class="cstat-no" title="statement not covered" >data[i]=_reconstructPacket(data[i])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn data}</span>else <span class="cstat-no" title="statement not covered" >if(data&amp;&amp;"object"==typeof data){<span class="cstat-no" title="statement not covered" >for(var key in data){<span class="cstat-no" title="statement not covered" >data[key]=_reconstructPacket(data[key])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn data}<span class="cstat-no" title="statement not covered" ></span>r</span></span></span>eturn data}<span class="cstat-no" title="statement not covered" ></span>packet.data=_reconstructPacket(packet.data);<span class="cstat-no" title="statement not covered" >p</span>acket.attachments=undefined;<span class="cstat-no" title="statement not covered" >r</span>eturn packet}</span>;exports.removeBlobs=<span class="fstat-no" title="function not covered" >function(data,callback){<span class="fstat-no" title="function not covered" ></span>function _removeBlobs(obj,curKey,containingObject){<span class="cstat-no" title="statement not covered" ></span>if(!obj)<span class="cstat-no" title="statement not covered" >return obj;<span class="cstat-no" title="statement not covered" >i</span></span>f(global.Blob&amp;&amp;obj instanceof Blob||global.File&amp;&amp;obj instanceof File){<span class="cstat-no" title="statement not covered" >pendingBlobs++;<span class="cstat-no" title="statement not covered" >v</span>ar fileReader=new FileReader;<span class="cstat-no" title="statement not covered" >f</span>ileReader.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(containingObject){<span class="cstat-no" title="statement not covered" >containingObject[curKey]=this.result}</span>else{<span class="cstat-no" title="statement not covered" >bloblessData=this.result}<span class="cstat-no" title="statement not covered" ></span>i</span>f(!--pendingBlobs){<span class="cstat-no" title="statement not covered" >callback(bloblessData)}</span>}</span>;<span class="cstat-no" title="statement not covered" >f</span>ileReader.readAsArrayBuffer(obj)}</span>else <span class="cstat-no" title="statement not covered" >if(isArray(obj)){<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;obj.length;i++){<span class="cstat-no" title="statement not covered" >_removeBlobs(obj[i],i,obj)}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(obj&amp;&amp;"object"==typeof obj&amp;&amp;!isBuf(obj)){<span class="cstat-no" title="statement not covered" >for(var key in obj){<span class="cstat-no" title="statement not covered" >_removeBlobs(obj[key],key,obj)}</span>}</span>}<span class="cstat-no" title="statement not covered" ></span></span></span>var pendingBlobs=0;<span class="cstat-no" title="statement not covered" >v</span>ar bloblessData=data;<span class="cstat-no" title="statement not covered" >_</span>removeBlobs(bloblessData);<span class="cstat-no" title="statement not covered" >i</span>f(!pendingBlobs){<span class="cstat-no" title="statement not covered" >callback(bloblessData)}</span>}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{"./is-buffer":42,isarray:34}],41:[function(_dereq_,module,exports){var debug=_dereq_("debug")("socket.io-parser");var json=_dereq_("json3");var isArray=_dereq_("isarray");var Emitter=_dereq_("component-emitter");var binary=_dereq_("./binary");var isBuf=_dereq_("./is-buffer");exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;<span class="fstat-no" title="function not covered" >function Encoder(){</span>}Encoder.prototype.encode=<span class="fstat-no" title="function not covered" >function(obj,callback){<span class="cstat-no" title="statement not covered" ></span>debug("encoding packet %j",obj);<span class="cstat-no" title="statement not covered" >i</span>f(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){<span class="cstat-no" title="statement not covered" >encodeAsBinary(obj,callback)}</span>else{<span class="cstat-no" title="statement not covered" >var encoding=encodeAsString(obj);<span class="cstat-no" title="statement not covered" >c</span>allback([encoding])}</span>}</span>;<span class="fstat-no" title="function not covered" >function encodeAsString(obj){<span class="cstat-no" title="statement not covered" ></span>var str="";<span class="cstat-no" title="statement not covered" >v</span>ar nsp=false;<span class="cstat-no" title="statement not covered" >s</span>tr+=obj.type;<span class="cstat-no" title="statement not covered" >i</span>f(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){<span class="cstat-no" title="statement not covered" >str+=obj.attachments;<span class="cstat-no" title="statement not covered" >s</span>tr+="-"}<span class="cstat-no" title="statement not covered" ></span>i</span>f(obj.nsp&amp;&amp;"/"!=obj.nsp){<span class="cstat-no" title="statement not covered" >nsp=true;<span class="cstat-no" title="statement not covered" >s</span>tr+=obj.nsp}<span class="cstat-no" title="statement not covered" ></span>i</span>f(null!=obj.id){<span class="cstat-no" title="statement not covered" >if(nsp){<span class="cstat-no" title="statement not covered" >str+=",";<span class="cstat-no" title="statement not covered" >n</span>sp=false}<span class="cstat-no" title="statement not covered" ></span>s</span>tr+=obj.id}<span class="cstat-no" title="statement not covered" ></span>i</span>f(null!=obj.data){<span class="cstat-no" title="statement not covered" >if(nsp)<span class="cstat-no" title="statement not covered" >str+=",";<span class="cstat-no" title="statement not covered" >s</span></span>tr+=json.stringify(obj.data)}<span class="cstat-no" title="statement not covered" ></span>d</span>ebug("encoded %j as %s",obj,str);<span class="cstat-no" title="statement not covered" >r</span>eturn str}<span class="fstat-no" title="function not covered" ></span>function encodeAsBinary(obj,callback){<span class="fstat-no" title="function not covered" ></span>function writeEncoding(bloblessData){<span class="cstat-no" title="statement not covered" ></span>var deconstruction=binary.deconstructPacket(bloblessData);<span class="cstat-no" title="statement not covered" >v</span>ar pack=encodeAsString(deconstruction.packet);<span class="cstat-no" title="statement not covered" >v</span>ar buffers=deconstruction.buffers;<span class="cstat-no" title="statement not covered" >b</span>uffers.unshift(pack);<span class="cstat-no" title="statement not covered" >c</span>allback(buffers)}<span class="cstat-no" title="statement not covered" ></span>binary.removeBlobs(obj,writeEncoding)}<span class="fstat-no" title="function not covered" ></span>function Decoder(){<span class="cstat-no" title="statement not covered" ></span>this.reconstructor=null}</span>Emitter(Decoder.prototype);Decoder.prototype.add=<span class="fstat-no" title="function not covered" >function(obj){<span class="cstat-no" title="statement not covered" ></span>var packet;<span class="cstat-no" title="statement not covered" >i</span>f("string"==typeof obj){<span class="cstat-no" title="statement not covered" >packet=decodeString(obj);<span class="cstat-no" title="statement not covered" >i</span>f(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){<span class="cstat-no" title="statement not covered" >this.reconstructor=new BinaryReconstructor(packet);<span class="cstat-no" title="statement not covered" >i</span>f(this.reconstructor.reconPack.attachments===0){<span class="cstat-no" title="statement not covered" >this.emit("decoded",packet)}</span>}</span>else{<span class="cstat-no" title="statement not covered" >this.emit("decoded",packet)}</span>}</span>else <span class="cstat-no" title="statement not covered" >if(isBuf(obj)||obj.base64){<span class="cstat-no" title="statement not covered" >if(!this.reconstructor){<span class="cstat-no" title="statement not covered" >throw new Error("got binary data when not reconstructing a packet")}</span>else{<span class="cstat-no" title="statement not covered" >packet=this.reconstructor.takeBinaryData(obj);<span class="cstat-no" title="statement not covered" >i</span>f(packet){<span class="cstat-no" title="statement not covered" >this.reconstructor=null;<span class="cstat-no" title="statement not covered" >t</span>his.emit("decoded",packet)}</span>}</span>}</span>else{<span class="cstat-no" title="statement not covered" >throw new Error("Unknown type: "+obj)}</span>}</span></span>;<span class="fstat-no" title="function not covered" >function decodeString(str){<span class="cstat-no" title="statement not covered" ></span>var p={};<span class="cstat-no" title="statement not covered" >v</span>ar i=0;<span class="cstat-no" title="statement not covered" >p</span>.type=Number(str.charAt(0));<span class="cstat-no" title="statement not covered" >i</span>f(null==exports.types[p.type])<span class="cstat-no" title="statement not covered" >return error();<span class="cstat-no" title="statement not covered" >i</span></span>f(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){<span class="cstat-no" title="statement not covered" >var buf="";<span class="cstat-no" title="statement not covered" >w</span>hile(str.charAt(++i)!="-"){<span class="cstat-no" title="statement not covered" >buf+=str.charAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(i==str.length)<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span></span>i</span>f(buf!=Number(buf)||str.charAt(i)!="-"){<span class="cstat-no" title="statement not covered" >throw new Error("Illegal attachments")}<span class="cstat-no" title="statement not covered" ></span>p</span>.attachments=Number(buf)}<span class="cstat-no" title="statement not covered" ></span>i</span>f("/"==str.charAt(i+1)){<span class="cstat-no" title="statement not covered" >p.nsp="";<span class="cstat-no" title="statement not covered" >w</span>hile(++i){<span class="cstat-no" title="statement not covered" >var c=str.charAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(","==c)<span class="cstat-no" title="statement not covered" >break;<span class="cstat-no" title="statement not covered" >p</span></span>.nsp+=c;<span class="cstat-no" title="statement not covered" >i</span>f(i==str.length)<span class="cstat-no" title="statement not covered" >break}</span></span>}</span>else{<span class="cstat-no" title="statement not covered" >p.nsp="/"}<span class="cstat-no" title="statement not covered" ></span>v</span>ar next=str.charAt(i+1);<span class="cstat-no" title="statement not covered" >i</span>f(""!==next&amp;&amp;Number(next)==next){<span class="cstat-no" title="statement not covered" >p.id="";<span class="cstat-no" title="statement not covered" >w</span>hile(++i){<span class="cstat-no" title="statement not covered" >var c=str.charAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(null==c||Number(c)!=c){<span class="cstat-no" title="statement not covered" >--i;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>p</span>.id+=str.charAt(i);<span class="cstat-no" title="statement not covered" >i</span>f(i==str.length)<span class="cstat-no" title="statement not covered" >break}<span class="cstat-no" title="statement not covered" ></span></span>p</span>.id=Number(p.id)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(str.charAt(++i)){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >p.data=json.parse(str.substr(i))}</span>catch(e){<span class="cstat-no" title="statement not covered" >return error()}</span>}<span class="cstat-no" title="statement not covered" ></span>d</span>ebug("decoded %s as %j",str,p);<span class="cstat-no" title="statement not covered" >r</span>eturn p}</span>Decoder.prototype.destroy=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this.reconstructor){<span class="cstat-no" title="statement not covered" >this.reconstructor.finishedReconstruction()}</span>}</span>;<span class="fstat-no" title="function not covered" >function BinaryReconstructor(packet){<span class="cstat-no" title="statement not covered" ></span>this.reconPack=packet;<span class="cstat-no" title="statement not covered" >t</span>his.buffers=[]}</span>BinaryReconstructor.prototype.takeBinaryData=<span class="fstat-no" title="function not covered" >function(binData){<span class="cstat-no" title="statement not covered" ></span>this.buffers.push(binData);<span class="cstat-no" title="statement not covered" >i</span>f(this.buffers.length==this.reconPack.attachments){<span class="cstat-no" title="statement not covered" >var packet=binary.reconstructPacket(this.reconPack,this.buffers);<span class="cstat-no" title="statement not covered" >t</span>his.finishedReconstruction();<span class="cstat-no" title="statement not covered" >r</span>eturn packet}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn null}</span>;BinaryReconstructor.prototype.finishedReconstruction=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.reconPack=null;<span class="cstat-no" title="statement not covered" >t</span>his.buffers=[]}</span>;<span class="fstat-no" title="function not covered" >function error(data){<span class="cstat-no" title="statement not covered" ></span>return{type:exports.ERROR,data:"parser error"}}</span>},{"./binary":40,"./is-buffer":42,"component-emitter":43,debug:14,isarray:34,json3:35}],42:[function(_dereq_,module,exports){(function(global){module.exports=isBuf;<span class="fstat-no" title="function not covered" >function isBuf(obj){<span class="cstat-no" title="statement not covered" ></span>return global.Buffer&amp;&amp;global.Buffer.isBuffer(obj)||global.ArrayBuffer&amp;&amp;obj instanceof ArrayBuffer}</span>}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{}],43:[function(_dereq_,module,exports){arguments[4][26][0].apply(exports,arguments)},{dup:26}],44:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){<span class="cstat-no" title="statement not covered" ></span>module.exports=toArray;<span class="fstat-no" title="function not covered" >f</span>unction toArray(list,index){<span class="cstat-no" title="statement not covered" ></span>var array=[];<span class="cstat-no" title="statement not covered" >i</span>ndex=index||0;<span class="cstat-no" title="statement not covered" >f</span>or(var i=index||0;i&lt;list.length;i++){<span class="cstat-no" title="statement not covered" >array[i-index]=list[i]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn array}</span>},{}],45:[function(_dereq_,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&amp;&amp;exports;var freeModule=typeof module=="object"&amp;&amp;module&amp;&amp;module.exports==freeExports&amp;&amp;module;var freeGlobal=typeof global=="object"&amp;&amp;global;<span class="missing-if-branch" title="else path not taken" >E</span>if(freeGlobal.global===freeGlobal||<span class="branch-1 cbranch-no" title="branch not covered" >freeGlobal.window===freeGlobal)</span>{root=freeGlobal}var stringFromCharCode=String.fromCharCode;<span class="fstat-no" title="function not covered" >function ucs2decode(string){<span class="cstat-no" title="statement not covered" ></span>var output=[];<span class="cstat-no" title="statement not covered" >v</span>ar counter=0;<span class="cstat-no" title="statement not covered" >v</span>ar length=string.length;<span class="cstat-no" title="statement not covered" >v</span>ar value;<span class="cstat-no" title="statement not covered" >v</span>ar extra;<span class="cstat-no" title="statement not covered" >w</span>hile(counter&lt;length){<span class="cstat-no" title="statement not covered" >value=string.charCodeAt(counter++);<span class="cstat-no" title="statement not covered" >i</span>f(value&gt;=55296&amp;&amp;value&lt;=56319&amp;&amp;counter&lt;length){<span class="cstat-no" title="statement not covered" >extra=string.charCodeAt(counter++);<span class="cstat-no" title="statement not covered" >i</span>f((extra&amp;64512)==56320){<span class="cstat-no" title="statement not covered" >output.push(((value&amp;1023)&lt;&lt;10)+(extra&amp;1023)+65536)}</span>else{<span class="cstat-no" title="statement not covered" >output.push(value);<span class="cstat-no" title="statement not covered" >c</span>ounter--}</span>}</span>else{<span class="cstat-no" title="statement not covered" >output.push(value)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}<span class="fstat-no" title="function not covered" ></span>function ucs2encode(array){<span class="cstat-no" title="statement not covered" ></span>var length=array.length;<span class="cstat-no" title="statement not covered" >v</span>ar index=-1;<span class="cstat-no" title="statement not covered" >v</span>ar value;<span class="cstat-no" title="statement not covered" >v</span>ar output="";<span class="cstat-no" title="statement not covered" >w</span>hile(++index&lt;length){<span class="cstat-no" title="statement not covered" >value=array[index];<span class="cstat-no" title="statement not covered" >i</span>f(value&gt;65535){<span class="cstat-no" title="statement not covered" >value-=65536;<span class="cstat-no" title="statement not covered" >o</span>utput+=stringFromCharCode(value&gt;&gt;&gt;10&amp;1023|55296);<span class="cstat-no" title="statement not covered" >v</span>alue=56320|value&amp;1023}<span class="cstat-no" title="statement not covered" ></span>o</span>utput+=stringFromCharCode(value)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn output}<span class="fstat-no" title="function not covered" ></span>function checkScalarValue(codePoint){<span class="cstat-no" title="statement not covered" ></span>if(codePoint&gt;=55296&amp;&amp;codePoint&lt;=57343){<span class="cstat-no" title="statement not covered" >throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}</span>}<span class="fstat-no" title="function not covered" ></span>function createByte(codePoint,shift){<span class="cstat-no" title="statement not covered" ></span>return stringFromCharCode(codePoint&gt;&gt;shift&amp;63|128)}<span class="fstat-no" title="function not covered" ></span>function encodeCodePoint(codePoint){<span class="cstat-no" title="statement not covered" ></span>if((codePoint&amp;4294967168)==0){<span class="cstat-no" title="statement not covered" >return stringFromCharCode(codePoint)}<span class="cstat-no" title="statement not covered" ></span>v</span>ar symbol="";<span class="cstat-no" title="statement not covered" >i</span>f((codePoint&amp;4294965248)==0){<span class="cstat-no" title="statement not covered" >symbol=stringFromCharCode(codePoint&gt;&gt;6&amp;31|192)}</span>else <span class="cstat-no" title="statement not covered" >if((codePoint&amp;4294901760)==0){<span class="cstat-no" title="statement not covered" >checkScalarValue(codePoint);<span class="cstat-no" title="statement not covered" >s</span>ymbol=stringFromCharCode(codePoint&gt;&gt;12&amp;15|224);<span class="cstat-no" title="statement not covered" >s</span>ymbol+=createByte(codePoint,6)}</span>else <span class="cstat-no" title="statement not covered" >if((codePoint&amp;4292870144)==0){<span class="cstat-no" title="statement not covered" >symbol=stringFromCharCode(codePoint&gt;&gt;18&amp;7|240);<span class="cstat-no" title="statement not covered" >s</span>ymbol+=createByte(codePoint,12);<span class="cstat-no" title="statement not covered" >s</span>ymbol+=createByte(codePoint,6)}<span class="cstat-no" title="statement not covered" ></span>s</span></span></span>ymbol+=stringFromCharCode(codePoint&amp;63|128);<span class="cstat-no" title="statement not covered" >r</span>eturn symbol}<span class="fstat-no" title="function not covered" ></span>function utf8encode(string){<span class="cstat-no" title="statement not covered" ></span>var codePoints=ucs2decode(string);<span class="cstat-no" title="statement not covered" >v</span>ar length=codePoints.length;<span class="cstat-no" title="statement not covered" >v</span>ar index=-1;<span class="cstat-no" title="statement not covered" >v</span>ar codePoint;<span class="cstat-no" title="statement not covered" >v</span>ar byteString="";<span class="cstat-no" title="statement not covered" >w</span>hile(++index&lt;length){<span class="cstat-no" title="statement not covered" >codePoint=codePoints[index];<span class="cstat-no" title="statement not covered" >b</span>yteString+=encodeCodePoint(codePoint)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn byteString}<span class="fstat-no" title="function not covered" ></span>function readContinuationByte(){<span class="cstat-no" title="statement not covered" ></span>if(byteIndex&gt;=byteCount){<span class="cstat-no" title="statement not covered" >throw Error("Invalid byte index")}<span class="cstat-no" title="statement not covered" ></span>v</span>ar continuationByte=byteArray[byteIndex]&amp;255;<span class="cstat-no" title="statement not covered" >b</span>yteIndex++;<span class="cstat-no" title="statement not covered" >i</span>f((continuationByte&amp;192)==128){<span class="cstat-no" title="statement not covered" >return continuationByte&amp;63}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow Error("Invalid continuation byte")}<span class="fstat-no" title="function not covered" ></span>function decodeSymbol(){<span class="cstat-no" title="statement not covered" ></span>var byte1;<span class="cstat-no" title="statement not covered" >v</span>ar byte2;<span class="cstat-no" title="statement not covered" >v</span>ar byte3;<span class="cstat-no" title="statement not covered" >v</span>ar byte4;<span class="cstat-no" title="statement not covered" >v</span>ar codePoint;<span class="cstat-no" title="statement not covered" >i</span>f(byteIndex&gt;byteCount){<span class="cstat-no" title="statement not covered" >throw Error("Invalid byte index")}<span class="cstat-no" title="statement not covered" ></span>i</span>f(byteIndex==byteCount){<span class="cstat-no" title="statement not covered" >return false}<span class="cstat-no" title="statement not covered" ></span>b</span>yte1=byteArray[byteIndex]&amp;255;<span class="cstat-no" title="statement not covered" >b</span>yteIndex++;<span class="cstat-no" title="statement not covered" >i</span>f((byte1&amp;128)==0){<span class="cstat-no" title="statement not covered" >return byte1}<span class="cstat-no" title="statement not covered" ></span>i</span>f((byte1&amp;224)==192){<span class="cstat-no" title="statement not covered" >var byte2=readContinuationByte();<span class="cstat-no" title="statement not covered" >c</span>odePoint=(byte1&amp;31)&lt;&lt;6|byte2;<span class="cstat-no" title="statement not covered" >i</span>f(codePoint&gt;=128){<span class="cstat-no" title="statement not covered" >return codePoint}</span>else{<span class="cstat-no" title="statement not covered" >throw Error("Invalid continuation byte")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f((byte1&amp;240)==224){<span class="cstat-no" title="statement not covered" >byte2=readContinuationByte();<span class="cstat-no" title="statement not covered" >b</span>yte3=readContinuationByte();<span class="cstat-no" title="statement not covered" >c</span>odePoint=(byte1&amp;15)&lt;&lt;12|byte2&lt;&lt;6|byte3;<span class="cstat-no" title="statement not covered" >i</span>f(codePoint&gt;=2048){<span class="cstat-no" title="statement not covered" >checkScalarValue(codePoint);<span class="cstat-no" title="statement not covered" >r</span>eturn codePoint}</span>else{<span class="cstat-no" title="statement not covered" >throw Error("Invalid continuation byte")}</span>}<span class="cstat-no" title="statement not covered" ></span>i</span>f((byte1&amp;248)==240){<span class="cstat-no" title="statement not covered" >byte2=readContinuationByte();<span class="cstat-no" title="statement not covered" >b</span>yte3=readContinuationByte();<span class="cstat-no" title="statement not covered" >b</span>yte4=readContinuationByte();<span class="cstat-no" title="statement not covered" >c</span>odePoint=(byte1&amp;15)&lt;&lt;18|byte2&lt;&lt;12|byte3&lt;&lt;6|byte4;<span class="cstat-no" title="statement not covered" >i</span>f(codePoint&gt;=65536&amp;&amp;codePoint&lt;=1114111){<span class="cstat-no" title="statement not covered" >return codePoint}</span>}<span class="cstat-no" title="statement not covered" ></span>t</span>hrow Error("Invalid UTF-8 detected")}</span>var byteArray;var byteCount;var byteIndex;<span class="fstat-no" title="function not covered" >function utf8decode(byteString){<span class="cstat-no" title="statement not covered" ></span>byteArray=ucs2decode(byteString);<span class="cstat-no" title="statement not covered" >b</span>yteCount=byteArray.length;<span class="cstat-no" title="statement not covered" >b</span>yteIndex=0;<span class="cstat-no" title="statement not covered" >v</span>ar codePoints=[];<span class="cstat-no" title="statement not covered" >v</span>ar tmp;<span class="cstat-no" title="statement not covered" >w</span>hile((tmp=decodeSymbol())!==false){<span class="cstat-no" title="statement not covered" >codePoints.push(tmp)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn ucs2encode(codePoints)}</span>var utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};
<span class="missing-if-branch" title="if path not taken" >I</span>if(typeof define=="function"&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >typeof define.amd=="object"&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >define.amd)</span>{<span class="cstat-no" title="statement not covered" >define(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return utf8}</span>)}</span>else <span class="missing-if-branch" title="else path not taken" >E</span>if(freeExports&amp;&amp;!freeExports.nodeType){<span class="missing-if-branch" title="else path not taken" >E</span>if(freeModule){freeModule.exports=utf8}else{<span class="cstat-no" title="statement not covered" >var object={};<span class="cstat-no" title="statement not covered" >v</span>ar hasOwnProperty=object.hasOwnProperty;<span class="cstat-no" title="statement not covered" >f</span>or(var key in utf8){<span class="cstat-no" title="statement not covered" >hasOwnProperty.call(utf8,key)&amp;&amp;(freeExports[key]=utf8[key])}</span>}</span>}else{<span class="cstat-no" title="statement not covered" >root.utf8=utf8}</span>})(this)}).call(this,typeof self!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >self:</span>typeof window!=="undefined"?<span class="branch-0 cbranch-no" title="branch not covered" >window:</span>typeof global!=="undefined"?global:<span class="branch-1 cbranch-no" title="branch not covered" >{})</span>},{}],46:[<span class="fstat-no" title="function not covered" >function(_dereq_,module,exports){</span>"use strict";<span class="cstat-no" title="statement not covered" >var alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;<span class="fstat-no" title="function not covered" >f</span>unction encode(num){<span class="cstat-no" title="statement not covered" ></span>var encoded="";<span class="cstat-no" title="statement not covered" >d</span>o{<span class="cstat-no" title="statement not covered" >encoded=alphabet[num%length]+encoded;<span class="cstat-no" title="statement not covered" >n</span>um=Math.floor(num/length)}</span>while(num&gt;0);<span class="cstat-no" title="statement not covered" >r</span>eturn encoded}<span class="fstat-no" title="function not covered" ></span>function decode(str){<span class="cstat-no" title="statement not covered" ></span>var decoded=0;<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;str.length;i++){<span class="cstat-no" title="statement not covered" >decoded=decoded*length+map[str.charAt(i)]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn decoded}<span class="fstat-no" title="function not covered" ></span>function yeast(){<span class="cstat-no" title="statement not covered" ></span>var now=encode(+new Date);<span class="cstat-no" title="statement not covered" >i</span>f(now!==prev)<span class="cstat-no" title="statement not covered" >return seed=0,prev=now;<span class="cstat-no" title="statement not covered" >r</span></span>eturn now+"."+encode(seed++)}<span class="cstat-no" title="statement not covered" ></span>for(;i&lt;length;i++)<span class="cstat-no" title="statement not covered" >map[alphabet[i]]=i;<span class="cstat-no" title="statement not covered" >y</span></span>east.encode=encode;<span class="cstat-no" title="statement not covered" >y</span>east.decode=decode;<span class="cstat-no" title="statement not covered" >m</span>odule.exports=yeast}</span>,{}]},{},[1])(1)});
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 25 2017 22:09:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>
